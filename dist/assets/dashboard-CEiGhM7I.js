import{c as Z,r as h,b as qa,j as o,R as oe,d as Ka,e as go,f as Ja,i as Xa,a as Za}from"./theme-CSIzm6eU.js";import{c as Qa,h as po,a as es}from"./storage-nkJd08CP.js";import{C as Bt,S as Qe,L as _t}from"./shield-C475B-4x.js";import{P as qe,X as et}from"./x-CpU8X-NK.js";import{A as ts,T as rs}from"./timer-7xaFoGf9.js";import{B as ns}from"./bar-chart-3-D3m7d3Kc.js";import{S as os}from"./settings-V2N9LtMw.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=Z("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=Z("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=Z("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=Z("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=Z("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=Z("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=Z("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=Z("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=Z("Focus",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=Z("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=Z("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=Z("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=Z("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fo=Z("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=Z("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=Z("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=Z("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Er=Z("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=Z("Pencil",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=Z("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=Z("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=Z("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=Z("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=Z("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=Z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=Z("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=Z("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=Z("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=Z("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xt(){return xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xt.apply(this,arguments)}var _e;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(_e||(_e={}));const fn="popstate";function ys(e){e===void 0&&(e={});function t(a,s){let{pathname:i="/",search:l="",hash:c=""}=Je(a.location.hash.substr(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),Tr("",{pathname:i,search:l,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(a,s){let i=a.document.querySelector("base"),l="";if(i&&i.getAttribute("href")){let c=a.location.href,u=c.indexOf("#");l=u===-1?c:c.slice(0,u)}return l+"#"+(typeof s=="string"?s:$t(s))}function n(a,s){Zt(a.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return ws(t,r,n,e)}function ae(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Zt(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function vs(){return Math.random().toString(36).substr(2,8)}function bn(e,t){return{usr:e.state,key:e.key,idx:t}}function Tr(e,t,r,n){return r===void 0&&(r=null),xt({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Je(t):t,{state:r,key:t&&t.key||n||vs()})}function $t(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Je(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function ws(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:s=!1}=n,i=a.history,l=_e.Pop,c=null,u=m();u==null&&(u=0,i.replaceState(xt({},i.state,{idx:u}),""));function m(){return(i.state||{idx:null}).idx}function d(){l=_e.Pop;let b=m(),k=b==null?null:b-u;u=b,c&&c({action:l,location:y.location,delta:k})}function g(b,k){l=_e.Push;let v=Tr(y.location,b,k);r&&r(v,b),u=m()+1;let w=bn(v,u),j=y.createHref(v);try{i.pushState(w,"",j)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;a.location.assign(j)}s&&c&&c({action:l,location:y.location,delta:1})}function p(b,k){l=_e.Replace;let v=Tr(y.location,b,k);r&&r(v,b),u=m();let w=bn(v,u),j=y.createHref(v);i.replaceState(w,"",j),s&&c&&c({action:l,location:y.location,delta:0})}function f(b){let k=a.location.origin!=="null"?a.location.origin:a.location.href,v=typeof b=="string"?b:$t(b);return v=v.replace(/ $/,"%20"),ae(k,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,k)}let y={get action(){return l},get location(){return e(a,i)},listen(b){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(fn,d),c=b,()=>{a.removeEventListener(fn,d),c=null}},createHref(b){return t(a,b)},createURL:f,encodeLocation(b){let k=f(b);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:g,replace:p,go(b){return i.go(b)}};return y}var xn;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(xn||(xn={}));function ks(e,t,r){return r===void 0&&(r="/"),Ns(e,t,r)}function Ns(e,t,r,n){let a=typeof t=="string"?Je(t):t,s=tt(a.pathname||"/",r);if(s==null)return null;let i=vo(e);Ss(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let u=Os(s);l=Ms(i[c],u)}return l}function vo(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(s,i,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:i,route:s};c.relativePath.startsWith("/")&&(ae(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=$e([n,c.relativePath]),m=r.concat(c);s.children&&s.children.length>0&&(ae(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),vo(s.children,t,m,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:As(u,s.index),routesMeta:m})};return e.forEach((s,i)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))a(s,i);else for(let c of wo(s.path))a(s,i,c)}),t}function wo(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),s=r.replace(/\?$/,"");if(n.length===0)return a?[s,""]:[s];let i=wo(n.join("/")),l=[];return l.push(...i.map(c=>c===""?s:[s,c].join("/"))),a&&l.push(...i),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function Ss(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Ps(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const js=/^:[\w-]+$/,Ds=3,Cs=2,Es=1,Ts=10,Is=-2,yn=e=>e==="*";function As(e,t){let r=e.split("/"),n=r.length;return r.some(yn)&&(n+=Is),t&&(n+=Cs),r.filter(a=>!yn(a)).reduce((a,s)=>a+(js.test(s)?Ds:s===""?Es:Ts),n)}function Ps(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function Ms(e,t,r){let{routesMeta:n}=e,a={},s="/",i=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,m=s==="/"?t:t.slice(s.length)||"/",d=Ir({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},m),g=c.route;if(!d)return null;Object.assign(a,d.params),i.push({params:a,pathname:$e([s,d.pathname]),pathnameBase:$s($e([s,d.pathnameBase])),route:g}),d.pathnameBase!=="/"&&(s=$e([s,d.pathnameBase]))}return i}function Ir(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Rs(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let s=a[0],i=s.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,m,d)=>{let{paramName:g,isOptional:p}=m;if(g==="*"){let y=l[d]||"";i=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const f=l[d];return p&&!f?u[g]=void 0:u[g]=(f||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:i,pattern:e}}function Rs(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Zt(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function Os(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Zt(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function tt(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const Ls=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bs=e=>Ls.test(e);function _s(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Je(e):e,s;if(r)if(Bs(r))s=r;else{if(r.includes("//")){let i=r;r=r.replace(/\/\/+/g,"/"),Zt(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+r))}r.startsWith("/")?s=vn(r.substring(1),"/"):s=vn(r,t)}else s=t;return{pathname:s,search:Us(n),hash:Gs(a)}}function vn(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function mr(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Fs(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function ko(e,t){let r=Fs(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function No(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Je(e):(a=xt({},e),ae(!a.pathname||!a.pathname.includes("?"),mr("?","pathname","search",a)),ae(!a.pathname||!a.pathname.includes("#"),mr("#","pathname","hash",a)),ae(!a.search||!a.search.includes("#"),mr("#","search","hash",a)));let s=e===""||a.pathname==="",i=s?"/":a.pathname,l;if(i==null)l=r;else{let d=t.length-1;if(!n&&i.startsWith("..")){let g=i.split("/");for(;g[0]==="..";)g.shift(),d-=1;a.pathname=g.join("/")}l=d>=0?t[d]:"/"}let c=_s(a,l),u=i&&i!=="/"&&i.endsWith("/"),m=(s||i===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||m)&&(c.pathname+="/"),c}const $e=e=>e.join("/").replace(/\/\/+/g,"/"),$s=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Us=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Gs=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Ws(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const So=["post","put","patch","delete"];new Set(So);const zs=["get",...So];new Set(zs);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yt(){return yt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yt.apply(this,arguments)}const Qt=h.createContext(null),jo=h.createContext(null),ze=h.createContext(null),er=h.createContext(null),Xe=h.createContext({outlet:null,matches:[],isDataRoute:!1}),Do=h.createContext(null);function Hs(e,t){let{relative:r}=t===void 0?{}:t;Ct()||ae(!1);let{basename:n,navigator:a}=h.useContext(ze),{hash:s,pathname:i,search:l}=tr(e,{relative:r}),c=i;return n!=="/"&&(c=i==="/"?n:$e([n,i])),a.createHref({pathname:c,search:l,hash:s})}function Ct(){return h.useContext(er)!=null}function at(){return Ct()||ae(!1),h.useContext(er).location}function Co(e){h.useContext(ze).static||h.useLayoutEffect(e)}function Eo(){let{isDataRoute:e}=h.useContext(Xe);return e?oi():Vs()}function Vs(){Ct()||ae(!1);let e=h.useContext(Qt),{basename:t,future:r,navigator:n}=h.useContext(ze),{matches:a}=h.useContext(Xe),{pathname:s}=at(),i=JSON.stringify(ko(a,r.v7_relativeSplatPath)),l=h.useRef(!1);return Co(()=>{l.current=!0}),h.useCallback(function(u,m){if(m===void 0&&(m={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let d=No(u,JSON.parse(i),s,m.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:$e([t,d.pathname])),(m.replace?n.replace:n.push)(d,m.state,m)},[t,n,i,s,e])}function tr(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=h.useContext(ze),{matches:a}=h.useContext(Xe),{pathname:s}=at(),i=JSON.stringify(ko(a,n.v7_relativeSplatPath));return h.useMemo(()=>No(e,JSON.parse(i),s,r==="path"),[e,i,s,r])}function Ys(e,t){return qs(e,t)}function qs(e,t,r,n){Ct()||ae(!1);let{navigator:a}=h.useContext(ze),{matches:s}=h.useContext(Xe),i=s[s.length-1],l=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let u=at(),m;if(t){var d;let b=typeof t=="string"?Je(t):t;c==="/"||(d=b.pathname)!=null&&d.startsWith(c)||ae(!1),m=b}else m=u;let g=m.pathname||"/",p=g;if(c!=="/"){let b=c.replace(/^\//,"").split("/");p="/"+g.replace(/^\//,"").split("/").slice(b.length).join("/")}let f=ks(e,{pathname:p}),y=Qs(f&&f.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:$e([c,a.encodeLocation?a.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:$e([c,a.encodeLocation?a.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),s,r,n);return t&&y?h.createElement(er.Provider,{value:{location:yt({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:_e.Pop}},y):y}function Ks(){let e=ni(),t=Ws(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return h.createElement(h.Fragment,null,h.createElement("h2",null,"Unexpected Application Error!"),h.createElement("h3",{style:{fontStyle:"italic"}},t),r?h.createElement("pre",{style:a},r):null,null)}const Js=h.createElement(Ks,null);class Xs extends h.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?h.createElement(Xe.Provider,{value:this.props.routeContext},h.createElement(Do.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Zs(e){let{routeContext:t,match:r,children:n}=e,a=h.useContext(Qt);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),h.createElement(Xe.Provider,{value:t},n)}function Qs(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var s;if(!r)return null;if(r.errors)e=r.matches;else if((s=n)!=null&&s.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let i=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let m=i.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);m>=0||ae(!1),i=i.slice(0,Math.min(i.length,m+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let m=0;m<i.length;m++){let d=i[m];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=m),d.route.id){let{loaderData:g,errors:p}=r,f=d.route.loader&&g[d.route.id]===void 0&&(!p||p[d.route.id]===void 0);if(d.route.lazy||f){c=!0,u>=0?i=i.slice(0,u+1):i=[i[0]];break}}}return i.reduceRight((m,d,g)=>{let p,f=!1,y=null,b=null;r&&(p=l&&d.route.id?l[d.route.id]:void 0,y=d.route.errorElement||Js,c&&(u<0&&g===0?(ai("route-fallback"),f=!0,b=null):u===g&&(f=!0,b=d.route.hydrateFallbackElement||null)));let k=t.concat(i.slice(0,g+1)),v=()=>{let w;return p?w=y:f?w=b:d.route.Component?w=h.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=m,h.createElement(Zs,{match:d,routeContext:{outlet:m,matches:k,isDataRoute:r!=null},children:w})};return r&&(d.route.ErrorBoundary||d.route.errorElement||g===0)?h.createElement(Xs,{location:r.location,revalidation:r.revalidation,component:y,error:p,children:v(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):v()},null)}var To=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(To||{}),Io=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Io||{});function ei(e){let t=h.useContext(Qt);return t||ae(!1),t}function ti(e){let t=h.useContext(jo);return t||ae(!1),t}function ri(e){let t=h.useContext(Xe);return t||ae(!1),t}function Ao(e){let t=ri(),r=t.matches[t.matches.length-1];return r.route.id||ae(!1),r.route.id}function ni(){var e;let t=h.useContext(Do),r=ti(),n=Ao();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function oi(){let{router:e}=ei(To.UseNavigateStable),t=Ao(Io.UseNavigateStable),r=h.useRef(!1);return Co(()=>{r.current=!0}),h.useCallback(function(a,s){s===void 0&&(s={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,yt({fromRouteId:t},s)))},[e,t])}const wn={};function ai(e,t,r){wn[e]||(wn[e]=!0)}function si(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Be(e){ae(!1)}function ii(e){let{basename:t="/",children:r=null,location:n,navigationType:a=_e.Pop,navigator:s,static:i=!1,future:l}=e;Ct()&&ae(!1);let c=t.replace(/^\/*/,"/"),u=h.useMemo(()=>({basename:c,navigator:s,static:i,future:yt({v7_relativeSplatPath:!1},l)}),[c,l,s,i]);typeof n=="string"&&(n=Je(n));let{pathname:m="/",search:d="",hash:g="",state:p=null,key:f="default"}=n,y=h.useMemo(()=>{let b=tt(m,c);return b==null?null:{location:{pathname:b,search:d,hash:g,state:p,key:f},navigationType:a}},[c,m,d,g,p,f,a]);return y==null?null:h.createElement(ze.Provider,{value:u},h.createElement(er.Provider,{children:r,value:y}))}function li(e){let{children:t,location:r}=e;return Ys(Ar(t),r)}new Promise(()=>{});function Ar(e,t){t===void 0&&(t=[]);let r=[];return h.Children.forEach(e,(n,a)=>{if(!h.isValidElement(n))return;let s=[...t,a];if(n.type===h.Fragment){r.push.apply(r,Ar(n.props.children,s));return}n.type!==Be&&ae(!1),!n.props.index||!n.props.children||ae(!1);let i={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=Ar(n.props.children,s)),r.push(i)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ut(){return Ut=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ut.apply(this,arguments)}function Po(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,s;for(s=0;s<n.length;s++)a=n[s],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function ci(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function di(e,t){return e.button===0&&(!t||t==="_self")&&!ci(e)}const ui=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],mi=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],gi="6";try{window.__reactRouterVersion=gi}catch{}const pi=h.createContext({isTransitioning:!1}),hi="startTransition",kn=qa[hi];function fi(e){let{basename:t,children:r,future:n,window:a}=e,s=h.useRef();s.current==null&&(s.current=ys({window:a,v5Compat:!0}));let i=s.current,[l,c]=h.useState({action:i.action,location:i.location}),{v7_startTransition:u}=n||{},m=h.useCallback(d=>{u&&kn?kn(()=>c(d)):c(d)},[c,u]);return h.useLayoutEffect(()=>i.listen(m),[i,m]),h.useEffect(()=>si(n),[n]),h.createElement(ii,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:i,future:n})}const bi=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xi=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gt=h.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:s,replace:i,state:l,target:c,to:u,preventScrollReset:m,viewTransition:d}=t,g=Po(t,ui),{basename:p}=h.useContext(ze),f,y=!1;if(typeof u=="string"&&xi.test(u)&&(f=u,bi))try{let w=new URL(window.location.href),j=u.startsWith("//")?new URL(w.protocol+u):new URL(u),C=tt(j.pathname,p);j.origin===w.origin&&C!=null?u=C+j.search+j.hash:y=!0}catch{}let b=Hs(u,{relative:a}),k=wi(u,{replace:i,state:l,target:c,preventScrollReset:m,relative:a,viewTransition:d});function v(w){n&&n(w),w.defaultPrevented||k(w)}return h.createElement("a",Ut({},g,{href:f||b,onClick:y||s?n:v,ref:r,target:c}))}),yi=h.forwardRef(function(t,r){let{"aria-current":n="page",caseSensitive:a=!1,className:s="",end:i=!1,style:l,to:c,viewTransition:u,children:m}=t,d=Po(t,mi),g=tr(c,{relative:d.relative}),p=at(),f=h.useContext(jo),{navigator:y,basename:b}=h.useContext(ze),k=f!=null&&ki(g)&&u===!0,v=y.encodeLocation?y.encodeLocation(g).pathname:g.pathname,w=p.pathname,j=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;a||(w=w.toLowerCase(),j=j?j.toLowerCase():null,v=v.toLowerCase()),j&&b&&(j=tt(j,b)||j);const C=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let S=w===v||!i&&w.startsWith(v)&&w.charAt(C)==="/",D=j!=null&&(j===v||!i&&j.startsWith(v)&&j.charAt(v.length)==="/"),I={isActive:S,isPending:D,isTransitioning:k},E=S?n:void 0,T;typeof s=="function"?T=s(I):T=[s,S?"active":null,D?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let B=typeof l=="function"?l(I):l;return h.createElement(gt,Ut({},d,{"aria-current":E,className:T,ref:r,style:B,to:c,viewTransition:u}),typeof m=="function"?m(I):m)});var Pr;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Pr||(Pr={}));var Nn;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Nn||(Nn={}));function vi(e){let t=h.useContext(Qt);return t||ae(!1),t}function wi(e,t){let{target:r,replace:n,state:a,preventScrollReset:s,relative:i,viewTransition:l}=t===void 0?{}:t,c=Eo(),u=at(),m=tr(e,{relative:i});return h.useCallback(d=>{if(di(d,r)){d.preventDefault();let g=n!==void 0?n:$t(u)===$t(m);c(e,{replace:g,state:a,preventScrollReset:s,relative:i,viewTransition:l})}},[u,c,m,n,a,r,e,s,i,l])}function ki(e,t){t===void 0&&(t={});let r=h.useContext(pi);r==null&&ae(!1);let{basename:n}=vi(Pr.useViewTransitionState),a=tr(e,{relative:t.relative});if(!r.isTransitioning)return!1;let s=tt(r.currentLocation.pathname,n)||r.currentLocation.pathname,i=tt(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Ir(a.pathname,i)!=null||Ir(a.pathname,s)!=null}const ye=[{id:"social",name:"Social Media",color:"bg-pink-500"},{id:"entertainment",name:"Entertainment",color:"bg-purple-500"},{id:"news",name:"News & Media",color:"bg-blue-500"},{id:"shopping",name:"Shopping",color:"bg-orange-500"},{id:"productivity",name:"Productivity",color:"bg-green-500"},{id:"development",name:"Development",color:"bg-gray-700"},{id:"education",name:"Education",color:"bg-teal-500"},{id:"communication",name:"Communication",color:"bg-indigo-500"},{id:"other",name:"Other",color:"bg-gray-400"}],Ni=["social","entertainment","news","shopping","productivity","development","education","communication","other"],At=["bg-red-500","bg-orange-500","bg-amber-500","bg-yellow-500","bg-lime-500","bg-green-500","bg-emerald-500","bg-teal-500","bg-cyan-500","bg-sky-500","bg-blue-500","bg-indigo-500","bg-violet-500","bg-purple-500","bg-fuchsia-500","bg-pink-500","bg-rose-500","bg-gray-500"];function Mo(e){return Ni.includes(e)}function Ro(e){return ye.find(t=>t.id===e)||ye[ye.length-1]}function Sn(e,t,r){const n=t.find(a=>a.id===e);if(n)return{id:n.id,name:n.name,color:n.color};if(Mo(e)){const a=ye.find(i=>i.id===e)||ye[ye.length-1],s=r[e];return{id:a.id,name:s||a.name,color:a.color}}return ye[ye.length-1]}const Fe={"twitter.com":"social","x.com":"social","facebook.com":"social","instagram.com":"social","linkedin.com":"social","tiktok.com":"social","reddit.com":"social","threads.net":"social","pinterest.com":"social","snapchat.com":"social","tumblr.com":"social","mastodon.social":"social","bsky.app":"social","discord.com":"social","quora.com":"social","flickr.com":"social","weibo.com":"social","vk.com":"social","nextdoor.com":"social","meetup.com":"social","youtube.com":"entertainment","netflix.com":"entertainment","twitch.tv":"entertainment","hulu.com":"entertainment","disneyplus.com":"entertainment","hbomax.com":"entertainment","max.com":"entertainment","primevideo.com":"entertainment","peacocktv.com":"entertainment","paramountplus.com":"entertainment","crunchyroll.com":"entertainment","funimation.com":"entertainment","vimeo.com":"entertainment","dailymotion.com":"entertainment","pluto.tv":"entertainment","tubi.tv":"entertainment","roku.com":"entertainment","plex.tv":"entertainment","appletv.com":"entertainment","spotify.com":"entertainment","music.apple.com":"entertainment","soundcloud.com":"entertainment","pandora.com":"entertainment","deezer.com":"entertainment","tidal.com":"entertainment","bandcamp.com":"entertainment","last.fm":"entertainment","genius.com":"entertainment","steampowered.com":"entertainment","store.steampowered.com":"entertainment","epicgames.com":"entertainment","gog.com":"entertainment","itch.io":"entertainment","roblox.com":"entertainment","minecraft.net":"entertainment","ea.com":"entertainment","ubisoft.com":"entertainment","blizzard.com":"entertainment","battle.net":"entertainment","xbox.com":"entertainment","playstation.com":"entertainment","nintendo.com":"entertainment","ign.com":"entertainment","gamespot.com":"entertainment","kotaku.com":"entertainment","polygon.com":"entertainment","pcgamer.com":"entertainment","imdb.com":"entertainment","rottentomatoes.com":"entertainment","letterboxd.com":"entertainment","goodreads.com":"entertainment","9gag.com":"entertainment","imgur.com":"entertainment","giphy.com":"entertainment","buzzfeed.com":"entertainment","cnn.com":"news","bbc.com":"news","bbc.co.uk":"news","nytimes.com":"news","theguardian.com":"news","reuters.com":"news","apnews.com":"news","washingtonpost.com":"news","wsj.com":"news","ft.com":"news","bloomberg.com":"news","cnbc.com":"news","foxnews.com":"news","msnbc.com":"news","nbcnews.com":"news","abcnews.go.com":"news","cbsnews.com":"news","usatoday.com":"news","latimes.com":"news","nypost.com":"news","dailymail.co.uk":"news","huffpost.com":"news","politico.com":"news","thehill.com":"news","axios.com":"news","vox.com":"news","vice.com":"news","theatlantic.com":"news","newyorker.com":"news","economist.com":"news","time.com":"news","newsweek.com":"news","forbes.com":"news","businessinsider.com":"news","insider.com":"news","techcrunch.com":"news","theverge.com":"news","wired.com":"news","arstechnica.com":"news","engadget.com":"news","mashable.com":"news","gizmodo.com":"news","cnet.com":"news","zdnet.com":"news","venturebeat.com":"news","thenextweb.com":"news","news.ycombinator.com":"news","slashdot.org":"news","drudgereport.com":"news","npr.org":"news","pbs.org":"news","aljazeera.com":"news","rt.com":"news","france24.com":"news","dw.com":"news","scmp.com":"news","amazon.com":"shopping","amazon.co.uk":"shopping","amazon.de":"shopping","amazon.ca":"shopping","ebay.com":"shopping","walmart.com":"shopping","target.com":"shopping","etsy.com":"shopping","aliexpress.com":"shopping","alibaba.com":"shopping","wish.com":"shopping","shopify.com":"shopping","bestbuy.com":"shopping","costco.com":"shopping","homedepot.com":"shopping","lowes.com":"shopping","ikea.com":"shopping","wayfair.com":"shopping","overstock.com":"shopping","newegg.com":"shopping","bhphotovideo.com":"shopping","zappos.com":"shopping","nordstrom.com":"shopping","macys.com":"shopping","kohls.com":"shopping","jcpenney.com":"shopping","sephora.com":"shopping","ulta.com":"shopping","nike.com":"shopping","adidas.com":"shopping","gap.com":"shopping","hm.com":"shopping","zara.com":"shopping","uniqlo.com":"shopping","asos.com":"shopping","shein.com":"shopping","chewy.com":"shopping","petco.com":"shopping","petsmart.com":"shopping","instacart.com":"shopping","doordash.com":"shopping","ubereats.com":"shopping","grubhub.com":"shopping","postmates.com":"shopping","github.com":"development","gitlab.com":"development","bitbucket.org":"development","stackoverflow.com":"development","stackexchange.com":"development","npmjs.com":"development","pypi.org":"development","rubygems.org":"development","crates.io":"development","packagist.org":"development","maven.apache.org":"development","nuget.org":"development","hub.docker.com":"development","vercel.com":"development","netlify.com":"development","heroku.com":"development","railway.app":"development","render.com":"development","fly.io":"development","digitalocean.com":"development","aws.amazon.com":"development","console.aws.amazon.com":"development","cloud.google.com":"development","console.cloud.google.com":"development","azure.microsoft.com":"development","portal.azure.com":"development","cloudflare.com":"development","dash.cloudflare.com":"development","codepen.io":"development","codesandbox.io":"development","replit.com":"development","jsfiddle.net":"development","glitch.com":"development","dev.to":"development","medium.com":"development","hashnode.com":"development","devdocs.io":"development","mdn.io":"development","developer.mozilla.org":"development","w3schools.com":"development","freecodecamp.org":"development","leetcode.com":"development","hackerrank.com":"development","codewars.com":"development","exercism.org":"development","topcoder.com":"development","codeforces.com":"development","kaggle.com":"development","huggingface.co":"development","openai.com":"development","anthropic.com":"development","linear.app":"development","jira.atlassian.com":"development","atlassian.com":"development","postman.com":"development","swagger.io":"development","regex101.com":"development","json-generator.com":"development","notion.so":"productivity","docs.google.com":"productivity","sheets.google.com":"productivity","slides.google.com":"productivity","drive.google.com":"productivity","calendar.google.com":"productivity","keep.google.com":"productivity","office.com":"productivity","office365.com":"productivity","onedrive.live.com":"productivity","sharepoint.com":"productivity","trello.com":"productivity","asana.com":"productivity","monday.com":"productivity","clickup.com":"productivity","basecamp.com":"productivity","airtable.com":"productivity","coda.io":"productivity","todoist.com":"productivity","ticktick.com":"productivity","any.do":"productivity","evernote.com":"productivity","onenote.com":"productivity","bear.app":"productivity","craft.do":"productivity","obsidian.md":"productivity","roamresearch.com":"productivity","logseq.com":"productivity","figma.com":"productivity","sketch.com":"productivity","canva.com":"productivity","miro.com":"productivity","lucidchart.com":"productivity","whimsical.com":"productivity","excalidraw.com":"productivity","loom.com":"productivity","calendly.com":"productivity","doodle.com":"productivity","typeform.com":"productivity","surveymonkey.com":"productivity","dropbox.com":"productivity","box.com":"productivity","wetransfer.com":"productivity","1password.com":"productivity","lastpass.com":"productivity","bitwarden.com":"productivity","dashlane.com":"productivity","grammarly.com":"productivity","hemingwayapp.com":"productivity","otter.ai":"productivity","zapier.com":"productivity","ifttt.com":"productivity","make.com":"productivity","n8n.io":"productivity","gmail.com":"communication","mail.google.com":"communication","outlook.com":"communication","outlook.live.com":"communication","outlook.office.com":"communication","yahoo.com":"communication","mail.yahoo.com":"communication","proton.me":"communication","protonmail.com":"communication","icloud.com":"communication","aol.com":"communication","zoho.com":"communication","fastmail.com":"communication","hey.com":"communication","slack.com":"communication","teams.microsoft.com":"communication","zoom.us":"communication","meet.google.com":"communication","webex.com":"communication","gotomeeting.com":"communication","whereby.com":"communication","around.co":"communication","gather.town":"communication","telegram.org":"communication","web.telegram.org":"communication","whatsapp.com":"communication","web.whatsapp.com":"communication","messenger.com":"communication","signal.org":"communication","skype.com":"communication","viber.com":"communication","line.me":"communication","wechat.com":"communication","intercom.com":"communication","zendesk.com":"communication","freshdesk.com":"communication","crisp.chat":"communication","drift.com":"communication","hubspot.com":"communication","mailchimp.com":"communication","sendgrid.com":"communication","constantcontact.com":"communication","coursera.org":"education","udemy.com":"education","edx.org":"education","khanacademy.org":"education","skillshare.com":"education","linkedin.com/learning":"education","pluralsight.com":"education","udacity.com":"education","codecademy.com":"education","treehouse.com":"education","datacamp.com":"education","brilliant.org":"education","masterclass.com":"education","domestika.org":"education","futurelearn.com":"education","class-central.com":"education","mit.edu":"education","stanford.edu":"education","harvard.edu":"education","yale.edu":"education","berkeley.edu":"education","ox.ac.uk":"education","cam.ac.uk":"education","wikipedia.org":"education","en.wikipedia.org":"education","britannica.com":"education","scholarpedia.org":"education","ted.com":"education","duolingo.com":"education","babbel.com":"education","rosettastone.com":"education","busuu.com":"education","memrise.com":"education","anki.net":"education","quizlet.com":"education","brainly.com":"education","chegg.com":"education","studocu.com":"education","sparknotes.com":"education","cliffsnotes.com":"education","wolframalpha.com":"education","symbolab.com":"education","desmos.com":"education","geogebra.org":"education","mathway.com":"education","photomath.com":"education","gradeup.co":"education","unacademy.com":"education","byjus.com":"education","vedantu.com":"education"};function Gr(e,t){const r=e.replace(/^www\./,"");return t[r]?t[r]:t[e]?t[e]:Fe[r]?Fe[r]:Fe[e]?Fe[e]:"other"}function Si(e){if(!e||Array.isArray(e))return[];const t=[];for(const[r,n]of Object.entries(e))for(const[a,s]of n)t.push({domain:r,startTime:a*1e3,endTime:s*1e3,windowId:0});return t}function Ve(e){const t=Math.floor(e/3600),r=Math.floor(e%3600/60);return t>0?`${t}h ${r}m`:`${r}m`}function jn(e){return new Date(e).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}function ji(e){const t=["bg-blue-500","bg-green-500","bg-purple-500","bg-orange-500","bg-pink-500","bg-teal-500","bg-indigo-500","bg-red-500","bg-cyan-500","bg-amber-500","bg-lime-500","bg-emerald-500"];let r=0;for(let n=0;n<e.length;n++)r=e.charCodeAt(n)+((r<<5)-r);return t[Math.abs(r)%t.length]}function Di({sessions:e,sites:t}){const n=new Date,a=new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0),s=new Date(n.getFullYear(),n.getMonth(),n.getDate(),23,59,59);let i=s.getTime(),l=a.getTime();e.forEach(y=>{i=Math.min(i,y.startTime),l=Math.max(l,y.endTime)}),i=Math.max(a.getTime(),i-30*60*1e3),l=Math.min(s.getTime(),l+30*60*1e3),e.length===0&&(i=a.getTime()+8*60*60*1e3,l=n.getTime());const c=Math.max(l-i,1),u=Object.entries(t).sort((y,b)=>b[1]-y[1]),m=u.slice(0,5),d=new Map;e.forEach(y=>{const b=d.get(y.domain)||[];b.push({start:y.startTime,end:y.endTime}),d.set(y.domain,b)});for(const[y,b]of d){if(b.length<=1)continue;b.sort((v,w)=>v.start-w.start);const k=[b[0]];for(let v=1;v<b.length;v++){const w=k[k.length-1],j=b[v];j.start<=w.end?w.end=Math.max(w.end,j.end):k.push(j)}d.set(y,k)}const g=[],p=new Date(i).getHours(),f=new Date(l).getHours();for(let y=p;y<=f;y++){const b=new Date(n.getFullYear(),n.getMonth(),n.getDate(),y,0,0).getTime();if(b>=i&&b<=l){const k=(b-i)/c*100;g.push({hour:y,label:y===0?"12am":y<12?`${y}am`:y===12?"12pm":`${y-12}pm`,position:k})}}return u.length===0&&e.length===0?o.jsx("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:"No activity recorded yet today"}):u.length>0&&e.length===0?o.jsxs("div",{className:"text-center py-6 text-gray-500 dark:text-gray-400",children:[o.jsx("p",{children:"Timeline data will appear as you browse."}),o.jsx("p",{className:"text-xs mt-1",children:"Session tracking has just been enabled."})]}):o.jsxs("div",{children:[o.jsx("div",{className:"relative h-5 mb-2 ml-32",children:g.map(y=>o.jsx("div",{className:"absolute text-xs text-gray-400",style:{left:`${y.position}%`,transform:"translateX(-50%)"},children:y.label},y.hour))}),o.jsx("div",{className:"space-y-1.5",children:m.map(([y,b])=>{const k=d.get(y)||[],v=ji(y),w=e.filter(S=>S.domain===y),C=new Set(w.map(S=>S.windowId)).size>1;return o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"w-28 flex-shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("a",{href:`https://${y}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs font-medium truncate hover:text-blue-600 hover:underline",title:y,children:y.replace(/^www\./,"")}),C&&o.jsx("span",{title:"Multiple windows",children:o.jsx(fo,{className:"w-3 h-3 text-gray-400 flex-shrink-0"})})]}),o.jsx("span",{className:"text-xs text-gray-400",children:Ve(b)})]}),o.jsxs("div",{className:"flex-1 relative h-5 bg-gray-100 dark:bg-gray-700 rounded overflow-hidden",children:[g.map(S=>o.jsx("div",{className:"absolute top-0 bottom-0 w-px bg-gray-200 dark:bg-gray-600",style:{left:`${S.position}%`}},S.hour)),k.map((S,D)=>{const I=Math.max(0,(S.start-i)/c*100),E=Math.min(100,(S.end-i)/c*100),T=Math.max(.5,E-I);return o.jsx("div",{className:`absolute top-0.5 bottom-0.5 ${v} rounded-sm opacity-80`,style:{left:`${I}%`,width:`${T}%`},title:`${jn(S.start)} - ${jn(S.end)}`},D)})]})]},y)})}),u.length>5&&o.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center pt-2",children:["+",u.length-5," more sites"]})]})}function Ci(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function Ei(){const[e,t]=h.useState(null),[r,n]=h.useState([]),[a,s]=h.useState([]),[i,l]=h.useState({}),[c,u]=h.useState(null),[m,d]=h.useState({}),[g,p]=h.useState(!0),f=Ci(new Date);h.useEffect(()=>{y()},[]);async function y(){try{const[w,j,C,S,D,I]=await Promise.all([chrome.runtime.sendMessage({type:"GET_STATS",payload:{date:f}}),chrome.runtime.sendMessage({type:"GET_BLOCKED_SITES"}),chrome.runtime.sendMessage({type:"GET_DAILY_LIMITS"}),chrome.runtime.sendMessage({type:"GET_DOMAIN_CATEGORIES"}),chrome.runtime.sendMessage({type:"GET_SETTINGS"}),chrome.runtime.sendMessage({type:"GET_ACTIVE_YOUTUBE_SESSIONS"})]);t(w),n(j),s(C||[]),l(S||{}),u(D),d(I||{})}catch(w){console.error("Failed to load data:",w)}finally{p(!1)}}function b(){if(!(e!=null&&e.sites))return[];const w={};let j=0;for(const[C,S]of Object.entries(e.sites)){const D=Gr(C,i);w[D]=(w[D]||0)+S,j+=S}return ye.map(C=>({category:C.id,time:w[C.id]||0,percent:j>0?(w[C.id]||0)/j*100:0})).filter(C=>C.time>0).sort((C,S)=>S.time-C.time)}function k(){return e!=null&&e.sites?a.filter(w=>w.enabled).map(w=>{const j=w.pattern.replace(/^www\./,""),C=e.sites[j]||e.sites["www."+j]||e.sites[w.pattern]||0,S=C/w.limitSeconds*100;return{limit:w,timeSpent:C,percent:S}}).filter(w=>w.percent>=70).sort((w,j)=>j.percent-w.percent):[]}if(g)return o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});const v=e?Object.entries(e.sites).sort((w,j)=>j[1]-w[1]).slice(0,5):[];return o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-6",children:"Overview"}),o.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:o.jsx(Bt,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),o.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Time today"})]}),o.jsx("p",{className:"text-2xl font-bold",children:Ve((e==null?void 0:e.totalTime)||0)})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/50 rounded-lg",children:o.jsx(us,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),o.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Sites visited"})]}),o.jsx("p",{className:"text-2xl font-bold",children:Object.keys((e==null?void 0:e.sites)||{}).length})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("div",{className:"p-2 bg-red-100 dark:bg-red-900/50 rounded-lg",children:o.jsx(Qe,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),o.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Blocks today"})]}),o.jsx("p",{className:"text-2xl font-bold",children:(e==null?void 0:e.blockedAttempts)||0})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/50 rounded-lg",children:o.jsx(xo,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),o.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Active blocks"})]}),o.jsx("p",{className:"text-2xl font-bold",children:r.filter(w=>w.enabled).length})]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Today's activity"}),o.jsx(gt,{to:"/metrics#activity-timeline",className:"text-sm text-blue-600 hover:text-blue-700",children:"View all"})]}),o.jsx(Di,{sessions:Si(e==null?void 0:e.sessions),sites:(e==null?void 0:e.sites)||{}})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[o.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Top sites today"}),v.length>0?o.jsx("div",{className:"space-y-3",children:(()=>{var j;const w=((j=v[0])==null?void 0:j[1])||1;return v.map(([C,S],D)=>o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-sm text-gray-400 dark:text-gray-500 w-4",children:D+1}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("a",{href:`https://${C}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-medium truncate hover:text-blue-600 hover:underline",children:C}),o.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:Ve(S)})]}),o.jsx("div",{className:"h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-blue-600 rounded-full",style:{width:`${S/w*100}%`}})})]})]},C))})()}):o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:"No activity recorded yet"})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[o.jsx("h2",{className:"text-lg font-semibold mb-4",children:"By category"}),(()=>{var C;const w=b();if(w.length===0)return o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:"No activity recorded yet"});const j=((C=w[0])==null?void 0:C.time)||1;return o.jsx("div",{className:"space-y-3",children:w.slice(0,5).map(({category:S,time:D})=>{const I=Ro(S),E=D/j*100;return o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${I.color}`}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"text-sm font-medium",children:I.name}),o.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:Ve(D)})]}),o.jsx("div",{className:"h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full ${I.color} transition-all`,style:{width:`${E}%`}})})]})]},S)})})})()]})]}),(()=>{const w=k();return w.length===0?null:o.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-xl p-4 mb-6",children:[o.jsx("h3",{className:"text-sm font-semibold text-amber-800 dark:text-amber-300 mb-2",children:"Limits approaching"}),o.jsx("div",{className:"space-y-2",children:w.map(({limit:j,timeSpent:C,percent:S})=>o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"text-sm font-medium text-amber-900 dark:text-amber-200",children:j.pattern}),o.jsxs("span",{className:"text-xs text-amber-700 dark:text-amber-400",children:[Ve(C)," / ",Ve(j.limitSeconds)]})]}),o.jsx("div",{className:"h-2 bg-amber-100 dark:bg-amber-900/50 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full rounded-full transition-all ${S>=100?"bg-red-500":S>=90?"bg-orange-500":"bg-amber-500"}`,style:{width:`${Math.min(100,S)}%`}})})]}),o.jsx("span",{className:`text-xs font-medium ${S>=100?"text-red-600":"text-amber-600"}`,children:S>=100?"Exceeded":`${S.toFixed(0)}%`})]},j.id))})]})})(),(c==null?void 0:c.youtubeTrackingEnabled)&&o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[o.jsx(yo,{className:"w-5 h-5 text-red-600"}),"YouTube channels"]}),o.jsx(gt,{to:"/metrics#youtube-channels",className:"text-sm text-blue-600 hover:text-blue-700",children:"View all"})]}),(()=>{var I;const w=(e==null?void 0:e.youtubeSessions)||{};if(Object.keys(w).length===0)return o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:"No YouTube activity recorded today"});const j=Qa(w),C={};for(const E of Object.values(m))E.channelUrl&&E.channelName&&(C[E.channelName]=E.channelUrl);const S=Object.entries(j).sort((E,T)=>T[1].time-E[1].time).slice(0,5),D=((I=S[0])==null?void 0:I[1].time)||1;return o.jsxs("div",{className:"space-y-3",children:[S.map(([E,T])=>{const B=T.time/D*100,Y=T.url||C[E];return o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[Y?o.jsx("a",{href:Y,target:"_blank",rel:"noopener noreferrer",className:"font-medium truncate hover:text-red-600 hover:underline",children:E}):o.jsx("span",{className:"font-medium truncate",children:E}),o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:Ve(T.time)})]}),o.jsx("div",{className:"h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-red-500 rounded-full transition-all",style:{width:`${B}%`}})})]},E)}),Object.keys(j).length>5&&o.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center pt-2",children:["+",Object.keys(j).length-5," more channels"]})]})})()]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Blocked sites"}),o.jsx(gt,{to:"/blocked",className:"text-sm text-blue-600 hover:text-blue-700",children:"Manage"})]}),r.length>0?o.jsx("div",{className:"grid grid-cols-2 gap-2",children:r.slice(0,6).map(w=>o.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[o.jsx("span",{className:"text-sm font-medium truncate",children:w.pattern}),o.jsx("span",{className:`text-xs px-2 py-1 rounded-full flex-shrink-0 ${w.enabled?"bg-red-100 dark:bg-red-700/80 text-red-700 dark:text-red-200":"bg-gray-200 dark:bg-gray-600/80 text-gray-600 dark:text-gray-300"}`,children:w.enabled?"On":"Off"})]},w.id))}):o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:"No blocked sites configured"}),r.length>6&&o.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center pt-3",children:["+",r.length-6," more"]})]})]})}function pe(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Ti=typeof Symbol=="function"&&Symbol.observable||"@@observable",Dn=Ti,Cn=()=>Math.random().toString(36).substring(7).split("").join("."),Ii={INIT:`@@redux/INIT${Cn()}`,REPLACE:`@@redux/REPLACE${Cn()}`},En=Ii;function Ai(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Oo(e,t,r){if(typeof e!="function")throw new Error(pe(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(pe(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(pe(1));return r(Oo)(e,t)}let n=e,a=t,s=new Map,i=s,l=0,c=!1;function u(){i===s&&(i=new Map,s.forEach((b,k)=>{i.set(k,b)}))}function m(){if(c)throw new Error(pe(3));return a}function d(b){if(typeof b!="function")throw new Error(pe(4));if(c)throw new Error(pe(5));let k=!0;u();const v=l++;return i.set(v,b),function(){if(k){if(c)throw new Error(pe(6));k=!1,u(),i.delete(v),s=null}}}function g(b){if(!Ai(b))throw new Error(pe(7));if(typeof b.type>"u")throw new Error(pe(8));if(typeof b.type!="string")throw new Error(pe(17));if(c)throw new Error(pe(9));try{c=!0,a=n(a,b)}finally{c=!1}return(s=i).forEach(v=>{v()}),b}function p(b){if(typeof b!="function")throw new Error(pe(10));n=b,g({type:En.REPLACE})}function f(){const b=d;return{subscribe(k){if(typeof k!="object"||k===null)throw new Error(pe(11));function v(){const j=k;j.next&&j.next(m())}return v(),{unsubscribe:b(v)}},[Dn](){return this}}}return g({type:En.INIT}),{dispatch:g,subscribe:d,getState:m,replaceReducer:p,[Dn]:f}}function Tn(e,t){return function(...r){return t(e.apply(this,r))}}function In(e,t){if(typeof e=="function")return Tn(e,t);if(typeof e!="object"||e===null)throw new Error(pe(16));const r={};for(const n in e){const a=e[n];typeof a=="function"&&(r[n]=Tn(a,t))}return r}function Lo(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function Pi(...e){return t=>(r,n)=>{const a=t(r,n);let s=()=>{throw new Error(pe(15))};const i={getState:a.getState,dispatch:(c,...u)=>s(c,...u)},l=e.map(c=>c(i));return s=Lo(...l)(a.dispatch),{...a,dispatch:s}}}var Mi={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Et=h;function Ri(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Oi=typeof Object.is=="function"?Object.is:Ri,Li=Et.useSyncExternalStore,Bi=Et.useRef,_i=Et.useEffect,Fi=Et.useMemo,$i=Et.useDebugValue;Mi.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var s=Bi(null);if(s.current===null){var i={hasValue:!1,value:null};s.current=i}else i=s.current;s=Fi(function(){function c(p){if(!u){if(u=!0,m=p,p=n(p),a!==void 0&&i.hasValue){var f=i.value;if(a(f,p))return d=f}return d=p}if(f=d,Oi(m,p))return f;var y=n(p);return a!==void 0&&a(f,y)?(m=p,f):(m=p,d=y)}var u=!1,m,d,g=r===void 0?null:r;return[function(){return c(t())},g===null?void 0:function(){return c(g())}]},[t,r,n,a]);var l=Li(e,s[0],s[1]);return _i(function(){i.hasValue=!0,i.value=l},[l]),$i(l),l};var Ui=h.version.startsWith("19"),Gi=Symbol.for(Ui?"react.transitional.element":"react.element"),Wi=Symbol.for("react.portal"),zi=Symbol.for("react.fragment"),Hi=Symbol.for("react.strict_mode"),Vi=Symbol.for("react.profiler"),Yi=Symbol.for("react.consumer"),qi=Symbol.for("react.context"),Bo=Symbol.for("react.forward_ref"),Ki=Symbol.for("react.suspense"),Ji=Symbol.for("react.suspense_list"),Wr=Symbol.for("react.memo"),Xi=Symbol.for("react.lazy"),Zi=Bo,Qi=Wr;function el(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case Gi:switch(e=e.type,e){case zi:case Vi:case Hi:case Ki:case Ji:return e;default:switch(e=e&&e.$$typeof,e){case qi:case Bo:case Xi:case Wr:return e;case Yi:return e;default:return t}}case Wi:return t}}}function tl(e){return el(e)===Wr}function rl(e,t,r,n,{areStatesEqual:a,areOwnPropsEqual:s,areStatePropsEqual:i}){let l=!1,c,u,m,d,g;function p(v,w){return c=v,u=w,m=e(c,u),d=t(n,u),g=r(m,d,u),l=!0,g}function f(){return m=e(c,u),t.dependsOnOwnProps&&(d=t(n,u)),g=r(m,d,u),g}function y(){return e.dependsOnOwnProps&&(m=e(c,u)),t.dependsOnOwnProps&&(d=t(n,u)),g=r(m,d,u),g}function b(){const v=e(c,u),w=!i(v,m);return m=v,w&&(g=r(m,d,u)),g}function k(v,w){const j=!s(w,u),C=!a(v,c,w,u);return c=v,u=w,j&&C?f():j?y():C?b():g}return function(w,j){return l?k(w,j):p(w,j)}}function nl(e,{initMapStateToProps:t,initMapDispatchToProps:r,initMergeProps:n,...a}){const s=t(e,a),i=r(e,a),l=n(e,a);return rl(s,i,l,e,a)}function ol(e,t){const r={};for(const n in e){const a=e[n];typeof a=="function"&&(r[n]=(...s)=>t(a(...s)))}return r}function Mr(e){return function(r){const n=e(r);function a(){return n}return a.dependsOnOwnProps=!1,a}}function An(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function _o(e,t){return function(n,{displayName:a}){const s=function(l,c){return s.dependsOnOwnProps?s.mapToProps(l,c):s.mapToProps(l,void 0)};return s.dependsOnOwnProps=!0,s.mapToProps=function(l,c){s.mapToProps=e,s.dependsOnOwnProps=An(e);let u=s(l,c);return typeof u=="function"&&(s.mapToProps=u,s.dependsOnOwnProps=An(u),u=s(l,c)),u},s}}function zr(e,t){return(r,n)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${n.wrappedComponentName}.`)}}function al(e){return e&&typeof e=="object"?Mr(t=>ol(e,t)):e?typeof e=="function"?_o(e):zr(e,"mapDispatchToProps"):Mr(t=>({dispatch:t}))}function sl(e){return e?typeof e=="function"?_o(e):zr(e,"mapStateToProps"):Mr(()=>({}))}function il(e,t,r){return{...r,...e,...t}}function ll(e){return function(r,{displayName:n,areMergedPropsEqual:a}){let s=!1,i;return function(c,u,m){const d=e(c,u,m);return s?a(d,i)||(i=d):(s=!0,i=d),i}}}function cl(e){return e?typeof e=="function"?ll(e):zr(e,"mergeProps"):()=>il}function dl(e){e()}function ul(){let e=null,t=null;return{clear(){e=null,t=null},notify(){dl(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var Pn={notify(){},get:()=>[]};function Fo(e,t){let r,n=Pn,a=0,s=!1;function i(y){m();const b=n.subscribe(y);let k=!1;return()=>{k||(k=!0,b(),d())}}function l(){n.notify()}function c(){f.onStateChange&&f.onStateChange()}function u(){return s}function m(){a++,r||(r=t?t.addNestedSub(c):e.subscribe(c),n=ul())}function d(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=Pn)}function g(){s||(s=!0,m())}function p(){s&&(s=!1,d())}const f={addNestedSub:i,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:g,tryUnsubscribe:p,getListeners:()=>n};return f}var ml=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gl=ml(),pl=()=>typeof navigator<"u"&&navigator.product==="ReactNative",hl=pl(),fl=()=>gl||hl?h.useLayoutEffect:h.useEffect,Gt=fl();function Mn(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function gr(e,t){if(Mn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!Mn(e[r[a]],t[r[a]]))return!1;return!0}var bl={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},xl={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},yl={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},$o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},vl={[Zi]:yl,[Qi]:$o};function Rn(e){return tl(e)?$o:vl[e.$$typeof]||bl}var wl=Object.defineProperty,kl=Object.getOwnPropertyNames,On=Object.getOwnPropertySymbols,Nl=Object.getOwnPropertyDescriptor,Sl=Object.getPrototypeOf,Ln=Object.prototype;function Rr(e,t){if(typeof t!="string"){if(Ln){const s=Sl(t);s&&s!==Ln&&Rr(e,s)}let r=kl(t);On&&(r=r.concat(On(t)));const n=Rn(e),a=Rn(t);for(let s=0;s<r.length;++s){const i=r[s];if(!xl[i]&&!(a&&a[i])&&!(n&&n[i])){const l=Nl(t,i);try{wl(e,i,l)}catch{}}}}return e}var pr=Symbol.for("react-redux-context"),hr=typeof globalThis<"u"?globalThis:{};function jl(){if(!h.createContext)return{};const e=hr[pr]??(hr[pr]=new Map);let t=e.get(h.createContext);return t||(t=h.createContext(null),e.set(h.createContext,t)),t}var Uo=jl(),Dl=[null,null];function Cl(e,t,r){Gt(()=>e(...t),r)}function El(e,t,r,n,a,s){e.current=n,r.current=!1,a.current&&(a.current=null,s())}function Tl(e,t,r,n,a,s,i,l,c,u,m){if(!e)return()=>{};let d=!1,g=null;const p=()=>{if(d||!l.current)return;const y=t.getState();let b,k;try{b=n(y,a.current)}catch(v){k=v,g=v}k||(g=null),b===s.current?i.current||u():(s.current=b,c.current=b,i.current=!0,m())};return r.onStateChange=p,r.trySubscribe(),p(),()=>{if(d=!0,r.tryUnsubscribe(),r.onStateChange=null,g)throw g}}function Il(e,t){return e===t}function Al(e,t,r,{pure:n,areStatesEqual:a=Il,areOwnPropsEqual:s=gr,areStatePropsEqual:i=gr,areMergedPropsEqual:l=gr,forwardRef:c=!1,context:u=Uo}={}){const m=u,d=sl(e),g=al(t),p=cl(r),f=!!e;return b=>{const k=b.displayName||b.name||"Component",v=`Connect(${k})`,w={shouldHandleStateChanges:f,displayName:v,wrappedComponentName:k,WrappedComponent:b,initMapStateToProps:d,initMapDispatchToProps:g,initMergeProps:p,areStatesEqual:a,areStatePropsEqual:i,areOwnPropsEqual:s,areMergedPropsEqual:l};function j(D){const[I,E,T]=h.useMemo(()=>{const{reactReduxForwardedRef:G,...se}=D;return[D.context,G,se]},[D]),B=h.useMemo(()=>{let G=m;return I!=null&&I.Consumer,G},[I,m]),Y=h.useContext(B),V=!!D.store&&!!D.store.getState&&!!D.store.dispatch,de=!!Y&&!!Y.store,ne=V?D.store:Y.store,Ae=de?Y.getServerState:ne.getState,fe=h.useMemo(()=>nl(ne.dispatch,w),[ne]),[be,Oe]=h.useMemo(()=>{if(!f)return Dl;const G=Fo(ne,V?void 0:Y.subscription),se=G.notifyNestedSubs.bind(G);return[G,se]},[ne,V,Y]),Pe=h.useMemo(()=>V?Y:{...Y,subscription:be},[V,Y,be]),ve=h.useRef(void 0),Te=h.useRef(T),we=h.useRef(void 0),Le=h.useRef(!1),ie=h.useRef(!1),ke=h.useRef(void 0);Gt(()=>(ie.current=!0,()=>{ie.current=!1}),[]);const P=h.useMemo(()=>()=>we.current&&T===Te.current?we.current:fe(ne.getState(),T),[ne,T]),R=h.useMemo(()=>se=>be?Tl(f,ne,be,fe,Te,ve,Le,ie,we,Oe,se):()=>{},[be]);Cl(El,[Te,ve,Le,T,we,Oe]);let O;try{O=h.useSyncExternalStore(R,P,Ae?()=>fe(Ae(),T):P)}catch(G){throw ke.current&&(G.message+=`
The error may be correlated with this previous error:
${ke.current.stack}

`),G}Gt(()=>{ke.current=void 0,we.current=void 0,ve.current=O});const $=h.useMemo(()=>h.createElement(b,{...O,ref:E}),[E,b,O]);return h.useMemo(()=>f?h.createElement(B.Provider,{value:Pe},$):$,[B,$,Pe])}const S=h.memo(j);if(S.WrappedComponent=b,S.displayName=j.displayName=v,c){const I=h.forwardRef(function(T,B){return h.createElement(S,{...T,reactReduxForwardedRef:B})});return I.displayName=v,I.WrappedComponent=b,Rr(I,b)}return Rr(S,b)}}var Go=Al;function Pl(e){const{children:t,context:r,serverState:n,store:a}=e,s=h.useMemo(()=>{const c=Fo(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),i=h.useMemo(()=>a.getState(),[a]);Gt(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),i!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,i]);const l=r||Uo;return h.createElement(l.Provider,{value:s},t)}var Ml=Pl,Rl="Invariant failed";function Ol(e,t){throw new Error(Rl)}var Ie=function(t){var r=t.top,n=t.right,a=t.bottom,s=t.left,i=n-s,l=a-r,c={top:r,right:n,bottom:a,left:s,width:i,height:l,x:s,y:r,center:{x:(n+s)/2,y:(a+r)/2}};return c},Hr=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},Bn=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},Ll=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},fr={top:0,right:0,bottom:0,left:0},Vr=function(t){var r=t.borderBox,n=t.margin,a=n===void 0?fr:n,s=t.border,i=s===void 0?fr:s,l=t.padding,c=l===void 0?fr:l,u=Ie(Hr(r,a)),m=Ie(Bn(r,i)),d=Ie(Bn(m,c));return{marginBox:u,borderBox:Ie(r),paddingBox:m,contentBox:d,margin:a,border:i,padding:c}},De=function(t){var r=t.slice(0,-2),n=t.slice(-2);if(n!=="px")return 0;var a=Number(r);return isNaN(a)&&Ol(),a},Bl=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Wt=function(t,r){var n=t.borderBox,a=t.border,s=t.margin,i=t.padding,l=Ll(n,r);return Vr({borderBox:l,border:a,margin:s,padding:i})},zt=function(t,r){return r===void 0&&(r=Bl()),Wt(t,r)},Wo=function(t,r){var n={top:De(r.marginTop),right:De(r.marginRight),bottom:De(r.marginBottom),left:De(r.marginLeft)},a={top:De(r.paddingTop),right:De(r.paddingRight),bottom:De(r.paddingBottom),left:De(r.paddingLeft)},s={top:De(r.borderTopWidth),right:De(r.borderRightWidth),bottom:De(r.borderBottomWidth),left:De(r.borderLeftWidth)};return Vr({borderBox:t,margin:n,padding:a,border:s})},zo=function(t){var r=t.getBoundingClientRect(),n=window.getComputedStyle(t);return Wo(r,n)},vt=function(t){var r=[],n=null,a=function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];r=l,!n&&(n=requestAnimationFrame(function(){n=null,t.apply(void 0,r)}))};return a.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},a};function Ht(){return Ht=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ht.apply(null,arguments)}function Ho(e,t){}Ho.bind(null,"warn");Ho.bind(null,"error");function Ue(){}function _l(e,t){return{...e,...t}}function Ce(e,t,r){const n=t.map(a=>{const s=_l(r,a.options);return e.addEventListener(a.eventName,a.fn,s),function(){e.removeEventListener(a.eventName,a.fn,s)}});return function(){n.forEach(s=>{s()})}}const Fl="Invariant failed";class Vt extends Error{}Vt.prototype.toString=function(){return this.message};function M(e,t){throw new Vt(Fl)}class $l extends oe.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=Ue,this.onWindowError=r=>{const n=this.getCallbacks();n.isDragging()&&n.tryAbort(),r.error instanceof Vt&&r.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=r=>{this.callbacks=r}}componentDidMount(){this.unbind=Ce(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof Vt){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const Ul=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Yt=e=>e+1,Gl=e=>`
  You have lifted an item in position ${Yt(e.source.index)}
`,Vo=(e,t)=>{const r=e.droppableId===t.droppableId,n=Yt(e.index),a=Yt(t.index);return r?`
      You have moved the item from position ${n}
      to position ${a}
    `:`
    You have moved the item from position ${n}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${a}
  `},Yo=(e,t,r)=>t.droppableId===r.droppableId?`
      The item ${e}
      has been combined with ${r.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${r.draggableId}
      in list ${r.droppableId}
    `,Wl=e=>{const t=e.destination;if(t)return Vo(e.source,t);const r=e.combine;return r?Yo(e.draggableId,e.source,r):"You are over an area that cannot be dropped on"},_n=e=>`
  The item has returned to its starting position
  of ${Yt(e.index)}
`,zl=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${_n(e.source)}
    `;const t=e.destination,r=e.combine;return t?`
      You have dropped the item.
      ${Vo(e.source,t)}
    `:r?`
      You have dropped the item.
      ${Yo(e.draggableId,e.source,r)}
    `:`
    The item has been dropped while not over a drop area.
    ${_n(e.source)}
  `},Lt={dragHandleUsageInstructions:Ul,onDragStart:Gl,onDragUpdate:Wl,onDragEnd:zl};function Hl(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function qo(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Hl(e[r],t[r]))return!1;return!0}function K(e,t){const r=h.useState(()=>({inputs:t,result:e()}))[0],n=h.useRef(!0),a=h.useRef(r),i=n.current||!!(t&&a.current.inputs&&qo(t,a.current.inputs))?a.current:{inputs:t,result:e()};return h.useEffect(()=>{n.current=!1,a.current=i},[i]),i.result}function F(e,t){return K(()=>e,t)}const ce={x:0,y:0},ue=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),Ne=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),Ge=(e,t)=>e.x===t.x&&e.y===t.y,st=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),Ke=(e,t,r=0)=>e==="x"?{x:t,y:r}:{x:r,y:t},wt=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),Fn=(e,t)=>Math.min(...t.map(r=>wt(e,r))),Ko=e=>t=>({x:e(t.x),y:e(t.y)});var Vl=(e,t)=>{const r=Ie({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r};const Tt=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),$n=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],Yl={top:0,right:0,bottom:0,left:0},ql=(e,t)=>t?Tt(e,t.scroll.diff.displacement):e,Kl=(e,t,r)=>r&&r.increasedBy?{...e,[t.end]:e[t.end]+r.increasedBy[t.line]}:e,Jl=(e,t)=>t&&t.shouldClipSubject?Vl(t.pageMarginBox,e):Ie(e);var rt=({page:e,withPlaceholder:t,axis:r,frame:n})=>{const a=ql(e.marginBox,n),s=Kl(a,r,t),i=Jl(s,n);return{page:e,withPlaceholder:t,active:i}},Yr=(e,t)=>{e.frame||M();const r=e.frame,n=Ne(t,r.scroll.initial),a=st(n),s={...r,scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:a},max:r.scroll.max}},i=rt({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:s});return{...e,frame:s,subject:i}};function le(e,t=qo){let r=null;function n(...a){if(r&&r.lastThis===this&&t(a,r.lastArgs))return r.lastResult;const s=e.apply(this,a);return r={lastResult:s,lastArgs:a,lastThis:this},s}return n.clear=function(){r=null},n}const Jo=le(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{})),Xo=le(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{})),rr=le(e=>Object.values(e)),Xl=le(e=>Object.values(e));var it=le((e,t)=>Xl(t).filter(n=>e===n.descriptor.droppableId).sort((n,a)=>n.descriptor.index-a.descriptor.index));function qr(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function nr(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var or=le((e,t)=>t.filter(r=>r.descriptor.id!==e.descriptor.id)),Zl=({isMovingForward:e,draggable:t,destination:r,insideDestination:n,previousImpact:a})=>{if(!r.isCombineEnabled||!qr(a))return null;function i(p){const f={type:"COMBINE",combine:{draggableId:p,droppableId:r.descriptor.id}};return{...a,at:f}}const l=a.displaced.all,c=l.length?l[0]:null;if(e)return c?i(c):null;const u=or(t,n);if(!c){if(!u.length)return null;const p=u[u.length-1];return i(p.descriptor.id)}const m=u.findIndex(p=>p.descriptor.id===c);m===-1&&M();const d=m-1;if(d<0)return null;const g=u[d];return i(g.descriptor.id)},lt=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const Zo={point:ce,value:0},kt={invisible:{},visible:{},all:[]},Ql={displaced:kt,displacedBy:Zo,at:null};var Ee=(e,t)=>r=>e<=r&&r<=t,Qo=e=>{const t=Ee(e.top,e.bottom),r=Ee(e.left,e.right);return n=>{if(t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right))return!0;const s=t(n.top)||t(n.bottom),i=r(n.left)||r(n.right);if(s&&i)return!0;const c=n.top<e.top&&n.bottom>e.bottom,u=n.left<e.left&&n.right>e.right;return c&&u?!0:c&&i||u&&s}},ec=e=>{const t=Ee(e.top,e.bottom),r=Ee(e.left,e.right);return n=>t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right)};const Kr={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},ea={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var tc=e=>t=>{const r=Ee(t.top,t.bottom),n=Ee(t.left,t.right);return a=>e===Kr?r(a.top)&&r(a.bottom):n(a.left)&&n(a.right)};const rc=(e,t)=>{const r=t.frame?t.frame.scroll.diff.displacement:ce;return Tt(e,r)},nc=(e,t,r)=>t.subject.active?r(t.subject.active)(e):!1,oc=(e,t,r)=>r(t)(e),Jr=({target:e,destination:t,viewport:r,withDroppableDisplacement:n,isVisibleThroughFrameFn:a})=>{const s=n?rc(e,t):e;return nc(s,t,a)&&oc(s,r,a)},ac=e=>Jr({...e,isVisibleThroughFrameFn:Qo}),ta=e=>Jr({...e,isVisibleThroughFrameFn:ec}),sc=e=>Jr({...e,isVisibleThroughFrameFn:tc(e.destination.axis)}),ic=(e,t,r)=>{if(typeof r=="boolean")return r;if(!t)return!0;const{invisible:n,visible:a}=t;if(n[e])return!1;const s=a[e];return s?s.shouldAnimate:!0};function lc(e,t){const r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return Ie(Hr(r,n))}function Nt({afterDragging:e,destination:t,displacedBy:r,viewport:n,forceShouldAnimate:a,last:s}){return e.reduce(function(l,c){const u=lc(c,r),m=c.descriptor.id;if(l.all.push(m),!ac({target:u,destination:t,viewport:n,withDroppableDisplacement:!0}))return l.invisible[c.descriptor.id]=!0,l;const g=ic(m,s,a),p={draggableId:m,shouldAnimate:g};return l.visible[m]=p,l},{all:[],visible:{},invisible:{}})}function cc(e,t){if(!e.length)return 0;const r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function Un({insideDestination:e,inHomeList:t,displacedBy:r,destination:n}){const a=cc(e,{inHomeList:t});return{displaced:kt,displacedBy:r,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:a}}}}function qt({draggable:e,insideDestination:t,destination:r,viewport:n,displacedBy:a,last:s,index:i,forceShouldAnimate:l}){const c=lt(e,r);if(i==null)return Un({insideDestination:t,inHomeList:c,displacedBy:a,destination:r});const u=t.find(f=>f.descriptor.index===i);if(!u)return Un({insideDestination:t,inHomeList:c,displacedBy:a,destination:r});const m=or(e,t),d=t.indexOf(u),g=m.slice(d);return{displaced:Nt({afterDragging:g,destination:r,displacedBy:a,last:s,viewport:n.frame,forceShouldAnimate:l}),displacedBy:a,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:i}}}}function We(e,t){return!!t.effected[e]}var dc=({isMovingForward:e,destination:t,draggables:r,combine:n,afterCritical:a})=>{if(!t.isCombineEnabled)return null;const s=n.draggableId,l=r[s].descriptor.index;return We(s,a)?e?l:l-1:e?l+1:l},uc=({isMovingForward:e,isInHomeList:t,insideDestination:r,location:n})=>{if(!r.length)return null;const a=n.index,s=e?a+1:a-1,i=r[0].descriptor.index,l=r[r.length-1].descriptor.index,c=t?l:l+1;return s<i||s>c?null:s},mc=({isMovingForward:e,isInHomeList:t,draggable:r,draggables:n,destination:a,insideDestination:s,previousImpact:i,viewport:l,afterCritical:c})=>{const u=i.at;if(u||M(),u.type==="REORDER"){const d=uc({isMovingForward:e,isInHomeList:t,location:u.destination,insideDestination:s});return d==null?null:qt({draggable:r,insideDestination:s,destination:a,viewport:l,last:i.displaced,displacedBy:i.displacedBy,index:d})}const m=dc({isMovingForward:e,destination:a,displaced:i.displaced,draggables:n,combine:u.combine,afterCritical:c});return m==null?null:qt({draggable:r,insideDestination:s,destination:a,viewport:l,last:i.displaced,displacedBy:i.displacedBy,index:m})},gc=({displaced:e,afterCritical:t,combineWith:r,displacedBy:n})=>{const a=!!(e.visible[r]||e.invisible[r]);return We(r,t)?a?ce:st(n.point):a?n.point:ce},pc=({afterCritical:e,impact:t,draggables:r})=>{const n=nr(t);n||M();const a=n.draggableId,s=r[a].page.borderBox.center,i=gc({displaced:t.displaced,afterCritical:e,combineWith:a,displacedBy:t.displacedBy});return ue(s,i)};const ra=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,hc=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,Xr=(e,t,r)=>t[e.crossAxisStart]+r.margin[e.crossAxisStart]+r.borderBox[e.crossAxisSize]/2,Gn=({axis:e,moveRelativeTo:t,isMoving:r})=>Ke(e.line,t.marginBox[e.end]+ra(e,r),Xr(e,t.marginBox,r)),Wn=({axis:e,moveRelativeTo:t,isMoving:r})=>Ke(e.line,t.marginBox[e.start]-hc(e,r),Xr(e,t.marginBox,r)),fc=({axis:e,moveInto:t,isMoving:r})=>Ke(e.line,t.contentBox[e.start]+ra(e,r),Xr(e,t.contentBox,r));var bc=({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:a})=>{const s=it(n.descriptor.id,r),i=t.page,l=n.axis;if(!s.length)return fc({axis:l,moveInto:n.page,isMoving:i});const{displaced:c,displacedBy:u}=e,m=c.all[0];if(m){const g=r[m];if(We(m,a))return Wn({axis:l,moveRelativeTo:g.page,isMoving:i});const p=Wt(g.page,u.point);return Wn({axis:l,moveRelativeTo:p,isMoving:i})}const d=s[s.length-1];if(d.descriptor.id===t.descriptor.id)return i.borderBox.center;if(We(d.descriptor.id,a)){const g=Wt(d.page,st(a.displacedBy.point));return Gn({axis:l,moveRelativeTo:g,isMoving:i})}return Gn({axis:l,moveRelativeTo:d.page,isMoving:i})},Or=(e,t)=>{const r=e.frame;return r?ue(t,r.scroll.diff.displacement):t};const xc=({impact:e,draggable:t,droppable:r,draggables:n,afterCritical:a})=>{const s=t.page.borderBox.center,i=e.at;return!r||!i?s:i.type==="REORDER"?bc({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:a}):pc({impact:e,draggables:n,afterCritical:a})};var ar=e=>{const t=xc(e),r=e.droppable;return r?Or(r,t):t},na=(e,t)=>{const r=Ne(t,e.scroll.initial),n=st(r);return{frame:Ie({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}}};function zn(e,t){return e.map(r=>t[r])}function yc(e,t){for(let r=0;r<t.length;r++){const n=t[r].visible[e];if(n)return n}return null}var vc=({impact:e,viewport:t,destination:r,draggables:n,maxScrollChange:a})=>{const s=na(t,ue(t.scroll.current,a)),i=r.frame?Yr(r,ue(r.frame.scroll.current,a)):r,l=e.displaced,c=Nt({afterDragging:zn(l.all,n),destination:r,displacedBy:e.displacedBy,viewport:s.frame,last:l,forceShouldAnimate:!1}),u=Nt({afterDragging:zn(l.all,n),destination:i,displacedBy:e.displacedBy,viewport:t.frame,last:l,forceShouldAnimate:!1}),m={},d={},g=[l,c,u];return l.all.forEach(f=>{const y=yc(f,g);if(y){d[f]=y;return}m[f]=!0}),{...e,displaced:{all:l.all,invisible:m,visible:d}}},wc=(e,t)=>ue(e.scroll.diff.displacement,t),Zr=({pageBorderBoxCenter:e,draggable:t,viewport:r})=>{const n=wc(r,e),a=Ne(n,t.page.borderBox.center);return ue(t.client.borderBox.center,a)},oa=({draggable:e,destination:t,newPageBorderBoxCenter:r,viewport:n,withDroppableDisplacement:a,onlyOnMainAxis:s=!1})=>{const i=Ne(r,e.page.borderBox.center),c={target:Tt(e.page.borderBox,i),destination:t,withDroppableDisplacement:a,viewport:n};return s?sc(c):ta(c)},kc=({isMovingForward:e,draggable:t,destination:r,draggables:n,previousImpact:a,viewport:s,previousPageBorderBoxCenter:i,previousClientSelection:l,afterCritical:c})=>{if(!r.isEnabled)return null;const u=it(r.descriptor.id,n),m=lt(t,r),d=Zl({isMovingForward:e,draggable:t,destination:r,insideDestination:u,previousImpact:a})||mc({isMovingForward:e,isInHomeList:m,draggable:t,draggables:n,destination:r,insideDestination:u,previousImpact:a,viewport:s,afterCritical:c});if(!d)return null;const g=ar({impact:d,draggable:t,droppable:r,draggables:n,afterCritical:c});if(oa({draggable:t,destination:r,newPageBorderBoxCenter:g,viewport:s.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:Zr({pageBorderBoxCenter:g,draggable:t,viewport:s}),impact:d,scrollJumpRequest:null};const f=Ne(g,i),y=vc({impact:d,viewport:s,destination:r,draggables:n,maxScrollChange:f});return{clientSelection:l,impact:y,scrollJumpRequest:f}};const ge=e=>{const t=e.subject.active;return t||M(),t};var Nc=({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:n,viewport:a})=>{const s=r.subject.active;if(!s)return null;const i=r.axis,l=Ee(s[i.start],s[i.end]),c=rr(n).filter(m=>m!==r).filter(m=>m.isEnabled).filter(m=>!!m.subject.active).filter(m=>Qo(a.frame)(ge(m))).filter(m=>{const d=ge(m);return e?s[i.crossAxisEnd]<d[i.crossAxisEnd]:d[i.crossAxisStart]<s[i.crossAxisStart]}).filter(m=>{const d=ge(m),g=Ee(d[i.start],d[i.end]);return l(d[i.start])||l(d[i.end])||g(s[i.start])||g(s[i.end])}).sort((m,d)=>{const g=ge(m)[i.crossAxisStart],p=ge(d)[i.crossAxisStart];return e?g-p:p-g}).filter((m,d,g)=>ge(m)[i.crossAxisStart]===ge(g[0])[i.crossAxisStart]);if(!c.length)return null;if(c.length===1)return c[0];const u=c.filter(m=>Ee(ge(m)[i.start],ge(m)[i.end])(t[i.line]));return u.length===1?u[0]:u.length>1?u.sort((m,d)=>ge(m)[i.start]-ge(d)[i.start])[0]:c.sort((m,d)=>{const g=Fn(t,$n(ge(m))),p=Fn(t,$n(ge(d)));return g!==p?g-p:ge(m)[i.start]-ge(d)[i.start]})[0]};const Hn=(e,t)=>{const r=e.page.borderBox.center;return We(e.descriptor.id,t)?Ne(r,t.displacedBy.point):r},Sc=(e,t)=>{const r=e.page.borderBox;return We(e.descriptor.id,t)?Tt(r,st(t.displacedBy.point)):r};var jc=({pageBorderBoxCenter:e,viewport:t,destination:r,insideDestination:n,afterCritical:a})=>n.filter(i=>ta({target:Sc(i,a),destination:r,viewport:t.frame,withDroppableDisplacement:!0})).sort((i,l)=>{const c=wt(e,Or(r,Hn(i,a))),u=wt(e,Or(r,Hn(l,a)));return c<u?-1:u<c?1:i.descriptor.index-l.descriptor.index})[0]||null,It=le(function(t,r){const n=r[t.line];return{value:n,point:Ke(t.line,n)}});const Dc=(e,t,r)=>{const n=e.axis;if(e.descriptor.mode==="virtual")return Ke(n.line,t[n.line]);const a=e.subject.page.contentBox[n.size],c=it(e.descriptor.id,r).reduce((u,m)=>u+m.client.marginBox[n.size],0)+t[n.line]-a;return c<=0?null:Ke(n.line,c)},aa=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),sa=(e,t,r)=>{const n=e.frame;lt(t,e)&&M(),e.subject.withPlaceholder&&M();const a=It(e.axis,t.displaceBy).point,s=Dc(e,a,r),i={placeholderSize:a,increasedBy:s,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!n){const m=rt({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:e.frame});return{...e,subject:m}}const l=s?ue(n.scroll.max,s):n.scroll.max,c=aa(n,l),u=rt({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:c});return{...e,subject:u,frame:c}},Cc=e=>{const t=e.subject.withPlaceholder;t||M();const r=e.frame;if(!r){const i=rt({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:i}}const n=t.oldFrameMaxScroll;n||M();const a=aa(r,n),s=rt({page:e.subject.page,axis:e.axis,frame:a,withPlaceholder:null});return{...e,subject:s,frame:a}};var Ec=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:r,draggable:n,draggables:a,destination:s,viewport:i,afterCritical:l})=>{if(!t){if(r.length)return null;const d={displaced:kt,displacedBy:Zo,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:0}}},g=ar({impact:d,draggable:n,droppable:s,draggables:a,afterCritical:l}),p=lt(n,s)?s:sa(s,n,a);return oa({draggable:n,destination:p,newPageBorderBoxCenter:g,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?d:null}const c=e[s.axis.line]<=t.page.borderBox.center[s.axis.line],u=(()=>{const d=t.descriptor.index;return t.descriptor.id===n.descriptor.id||c?d:d+1})(),m=It(s.axis,n.displaceBy);return qt({draggable:n,insideDestination:r,destination:s,viewport:i,displacedBy:m,last:kt,index:u})},Tc=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:r,isOver:n,draggables:a,droppables:s,viewport:i,afterCritical:l})=>{const c=Nc({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:s,viewport:i});if(!c)return null;const u=it(c.descriptor.id,a),m=jc({pageBorderBoxCenter:t,viewport:i,destination:c,insideDestination:u,afterCritical:l}),d=Ec({previousPageBorderBoxCenter:t,destination:c,draggable:r,draggables:a,moveRelativeTo:m,insideDestination:u,viewport:i,afterCritical:l});if(!d)return null;const g=ar({impact:d,draggable:r,droppable:c,draggables:a,afterCritical:l});return{clientSelection:Zr({pageBorderBoxCenter:g,draggable:r,viewport:i}),impact:d,scrollJumpRequest:null}},Se=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const Ic=(e,t)=>{const r=Se(e);return r?t[r]:null};var Ac=({state:e,type:t})=>{const r=Ic(e.impact,e.dimensions.droppables),n=!!r,a=e.dimensions.droppables[e.critical.droppable.id],s=r||a,i=s.axis.direction,l=i==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||i==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(l&&!n)return null;const c=t==="MOVE_DOWN"||t==="MOVE_RIGHT",u=e.dimensions.draggables[e.critical.draggable.id],m=e.current.page.borderBoxCenter,{draggables:d,droppables:g}=e.dimensions;return l?kc({isMovingForward:c,previousPageBorderBoxCenter:m,draggable:u,destination:s,draggables:d,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):Tc({isMovingForward:c,previousPageBorderBoxCenter:m,draggable:u,isOver:s,draggables:d,droppables:g,viewport:e.viewport,afterCritical:e.afterCritical})};function Ye(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function ia(e){const t=Ee(e.top,e.bottom),r=Ee(e.left,e.right);return function(a){return t(a.y)&&r(a.x)}}function Pc(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function Mc({pageBorderBox:e,draggable:t,candidates:r}){const n=t.page.borderBox.center,a=r.map(s=>{const i=s.axis,l=Ke(s.axis.line,e.center[i.line],s.page.borderBox.center[i.crossAxisLine]);return{id:s.descriptor.id,distance:wt(n,l)}}).sort((s,i)=>i.distance-s.distance);return a[0]?a[0].id:null}function Rc({pageBorderBox:e,draggable:t,droppables:r}){const n=rr(r).filter(a=>{if(!a.isEnabled)return!1;const s=a.subject.active;if(!s||!Pc(e,s))return!1;if(ia(s)(e.center))return!0;const i=a.axis,l=s.center[i.crossAxisLine],c=e[i.crossAxisStart],u=e[i.crossAxisEnd],m=Ee(s[i.crossAxisStart],s[i.crossAxisEnd]),d=m(c),g=m(u);return!d&&!g?!0:d?c<l:u>l});return n.length?n.length===1?n[0].descriptor.id:Mc({pageBorderBox:e,draggable:t,candidates:n}):null}const la=(e,t)=>Ie(Tt(e,t));var Oc=(e,t)=>{const r=e.frame;return r?la(t,r.scroll.diff.value):t};function ca({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function Lc({draggable:e,closest:t,inHomeList:r}){return t?r&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var Bc=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:r,insideDestination:n,last:a,viewport:s,afterCritical:i})=>{const l=r.axis,c=It(r.axis,t.displaceBy),u=c.value,m=e[l.start],d=e[l.end],p=or(t,n).find(y=>{const b=y.descriptor.id,k=y.page.borderBox.center[l.line],v=We(b,i),w=ca({displaced:a,id:b});return v?w?d<=k:m<k-u:w?d<=k+u:m<k})||null,f=Lc({draggable:t,closest:p,inHomeList:lt(t,r)});return qt({draggable:t,insideDestination:n,destination:r,viewport:s,last:a,displacedBy:c,index:f})};const _c=4;var Fc=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:r,destination:n,insideDestination:a,afterCritical:s})=>{if(!n.isCombineEnabled)return null;const i=n.axis,l=It(n.axis,e.displaceBy),c=l.value,u=t[i.start],m=t[i.end],g=or(e,a).find(f=>{const y=f.descriptor.id,b=f.page.borderBox,v=b[i.size]/_c,w=We(y,s),j=ca({displaced:r.displaced,id:y});return w?j?m>b[i.start]+v&&m<b[i.end]-v:u>b[i.start]-c+v&&u<b[i.end]-c-v:j?m>b[i.start]+c+v&&m<b[i.end]+c-v:u>b[i.start]+v&&u<b[i.end]-v});return g?{displacedBy:l,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:g.descriptor.id,droppableId:n.descriptor.id}}}:null},da=({pageOffset:e,draggable:t,draggables:r,droppables:n,previousImpact:a,viewport:s,afterCritical:i})=>{const l=la(t.page.borderBox,e),c=Rc({pageBorderBox:l,draggable:t,droppables:n});if(!c)return Ql;const u=n[c],m=it(u.descriptor.id,r),d=Oc(u,l);return Fc({pageBorderBoxWithDroppableScroll:d,draggable:t,previousImpact:a,destination:u,insideDestination:m,afterCritical:i})||Bc({pageBorderBoxWithDroppableScroll:d,draggable:t,destination:u,insideDestination:m,last:a.displaced,viewport:s,afterCritical:i})},Qr=(e,t)=>({...e,[t.descriptor.id]:t});const $c=({previousImpact:e,impact:t,droppables:r})=>{const n=Se(e),a=Se(t);if(!n||n===a)return r;const s=r[n];if(!s.subject.withPlaceholder)return r;const i=Cc(s);return Qr(r,i)};var Uc=({draggable:e,draggables:t,droppables:r,previousImpact:n,impact:a})=>{const s=$c({previousImpact:n,impact:a,droppables:r}),i=Se(a);if(!i)return s;const l=r[i];if(lt(e,l)||l.subject.withPlaceholder)return s;const c=sa(l,e,t);return Qr(s,c)},pt=({state:e,clientSelection:t,dimensions:r,viewport:n,impact:a,scrollJumpRequest:s})=>{const i=n||e.viewport,l=r||e.dimensions,c=t||e.current.client.selection,u=Ne(c,e.initial.client.selection),m={offset:u,selection:c,borderBoxCenter:ue(e.initial.client.borderBoxCenter,u)},d={selection:ue(m.selection,i.scroll.current),borderBoxCenter:ue(m.borderBoxCenter,i.scroll.current),offset:ue(m.offset,i.scroll.diff.value)},g={client:m,page:d};if(e.phase==="COLLECTING")return{...e,dimensions:l,viewport:i,current:g};const p=l.draggables[e.critical.draggable.id],f=a||da({pageOffset:d.offset,draggable:p,draggables:l.draggables,droppables:l.droppables,previousImpact:e.impact,viewport:i,afterCritical:e.afterCritical}),y=Uc({draggable:p,impact:f,previousImpact:e.impact,draggables:l.draggables,droppables:l.droppables});return{...e,current:g,dimensions:{draggables:l.draggables,droppables:y},impact:f,viewport:i,scrollJumpRequest:s||null,forceShouldAnimate:s?!1:null}};function Gc(e,t){return e.map(r=>t[r])}var ua=({impact:e,viewport:t,draggables:r,destination:n,forceShouldAnimate:a})=>{const s=e.displaced,i=Gc(s.all,r),l=Nt({afterDragging:i,destination:n,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:a,last:s});return{...e,displaced:l}},ma=({impact:e,draggable:t,droppable:r,draggables:n,viewport:a,afterCritical:s})=>{const i=ar({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:s});return Zr({pageBorderBoxCenter:i,draggable:t,viewport:a})},ga=({state:e,dimensions:t,viewport:r})=>{e.movementMode!=="SNAP"&&M();const n=e.impact,a=r||e.viewport,s=t||e.dimensions,{draggables:i,droppables:l}=s,c=i[e.critical.draggable.id],u=Se(n);u||M();const m=l[u],d=ua({impact:n,viewport:a,destination:m,draggables:i}),g=ma({impact:d,draggable:c,droppable:m,draggables:i,viewport:a,afterCritical:e.afterCritical});return pt({impact:d,clientSelection:g,state:e,dimensions:s,viewport:a})},Wc=e=>({index:e.index,droppableId:e.droppableId}),pa=({draggable:e,home:t,draggables:r,viewport:n})=>{const a=It(t.axis,e.displaceBy),s=it(t.descriptor.id,r),i=s.indexOf(e);i===-1&&M();const l=s.slice(i+1),c=l.reduce((g,p)=>(g[p.descriptor.id]=!0,g),{}),u={inVirtualList:t.descriptor.mode==="virtual",displacedBy:a,effected:c};return{impact:{displaced:Nt({afterDragging:l,destination:t,displacedBy:a,last:null,viewport:n.frame,forceShouldAnimate:!1}),displacedBy:a,at:{type:"REORDER",destination:Wc(e.descriptor)}},afterCritical:u}},zc=(e,t)=>({draggables:e.draggables,droppables:Qr(e.droppables,t)}),Hc=({draggable:e,offset:t,initialWindowScroll:r})=>{const n=Wt(e.client,t),a=zt(n,r);return{...e,placeholder:{...e.placeholder,client:n},client:n,page:a}},Vc=e=>{const t=e.frame;return t||M(),t},Yc=({additions:e,updatedDroppables:t,viewport:r})=>{const n=r.scroll.diff.value;return e.map(a=>{const s=a.descriptor.droppableId,i=t[s],c=Vc(i).scroll.diff.value,u=ue(n,c);return Hc({draggable:a,offset:u,initialWindowScroll:r.scroll.initial})})},qc=({state:e,published:t})=>{const r=t.modified.map(k=>{const v=e.dimensions.droppables[k.droppableId];return Yr(v,k.scroll)}),n={...e.dimensions.droppables,...Jo(r)},a=Xo(Yc({additions:t.additions,updatedDroppables:n,viewport:e.viewport})),s={...e.dimensions.draggables,...a};t.removals.forEach(k=>{delete s[k]});const i={droppables:n,draggables:s},l=Se(e.impact),c=l?i.droppables[l]:null,u=i.draggables[e.critical.draggable.id],m=i.droppables[e.critical.droppable.id],{impact:d,afterCritical:g}=pa({draggable:u,home:m,draggables:s,viewport:e.viewport}),p=c&&c.isCombineEnabled?e.impact:d,f=da({pageOffset:e.current.page.offset,draggable:i.draggables[e.critical.draggable.id],draggables:i.draggables,droppables:i.droppables,previousImpact:p,viewport:e.viewport,afterCritical:g}),y={...e,phase:"DRAGGING",impact:f,onLiftImpact:d,dimensions:i,afterCritical:g,forceShouldAnimate:!1};return e.phase==="COLLECTING"?y:{...y,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const Lr=e=>e.movementMode==="SNAP",br=(e,t,r)=>{const n=zc(e.dimensions,t);return!Lr(e)||r?pt({state:e,dimensions:n}):ga({state:e,dimensions:n})};function xr(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const Vn={phase:"IDLE",completed:null,shouldFlush:!1};var Kc=(e=Vn,t)=>{if(t.type==="FLUSH")return{...Vn,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&M();const{critical:r,clientSelection:n,viewport:a,dimensions:s,movementMode:i}=t.payload,l=s.draggables[r.draggable.id],c=s.droppables[r.droppable.id],u={selection:n,borderBoxCenter:l.client.borderBox.center,offset:ce},m={client:u,page:{selection:ue(u.selection,a.scroll.initial),borderBoxCenter:ue(u.selection,a.scroll.initial),offset:ue(u.selection,a.scroll.diff.value)}},d=rr(s.droppables).every(y=>!y.isFixedOnPage),{impact:g,afterCritical:p}=pa({draggable:l,home:c,draggables:s.draggables,viewport:a});return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:i,dimensions:s,initial:m,current:m,isWindowScrollAllowed:d,impact:g,afterCritical:p,onLiftImpact:g,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&M(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||M(),qc({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Ye(e)||M();const{client:r}=t.payload;return Ge(r,e.current.client.selection)?e:pt({state:e,clientSelection:r,impact:Lr(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return xr(e);Ye(e)||M();const{id:r,newScroll:n}=t.payload,a=e.dimensions.droppables[r];if(!a)return e;const s=Yr(a,n);return br(e,s,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Ye(e)||M();const{id:r,isEnabled:n}=t.payload,a=e.dimensions.droppables[r];a||M(),a.isEnabled===n&&M();const s={...a,isEnabled:n};return br(e,s,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Ye(e)||M();const{id:r,isCombineEnabled:n}=t.payload,a=e.dimensions.droppables[r];a||M(),a.isCombineEnabled===n&&M();const s={...a,isCombineEnabled:n};return br(e,s,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Ye(e)||M(),e.isWindowScrollAllowed||M();const r=t.payload.newScroll;if(Ge(e.viewport.scroll.current,r))return xr(e);const n=na(e.viewport,r);return Lr(e)?ga({state:e,viewport:n}):pt({state:e,viewport:n})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Ye(e))return e;const r=t.payload.maxScroll;if(Ge(r,e.viewport.scroll.max))return e;const n={...e.viewport,scroll:{...e.viewport.scroll,max:r}};return{...e,viewport:n}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&M();const r=Ac({state:e,type:t.type});return r?pt({state:e,impact:r.impact,clientSelection:r.clientSelection,scrollJumpRequest:r.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const r=t.payload.reason;return e.phase!=="COLLECTING"&&M(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:r}}if(t.type==="DROP_ANIMATE"){const{completed:r,dropDuration:n,newHomeClientOffset:a}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||M(),{phase:"DROP_ANIMATING",completed:r,dropDuration:n,newHomeClientOffset:a,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:r}=t.payload;return{phase:"IDLE",completed:r,shouldFlush:!1}}return e};function X(e,t){return e instanceof Object&&"type"in e&&e.type===t}const Jc=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),Xc=e=>({type:"LIFT",payload:e}),Zc=e=>({type:"INITIAL_PUBLISH",payload:e}),Qc=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),ed=()=>({type:"COLLECTION_STARTING",payload:null}),td=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),rd=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),nd=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),ha=e=>({type:"MOVE",payload:e}),od=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),ad=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),sd=()=>({type:"MOVE_UP",payload:null}),id=()=>({type:"MOVE_DOWN",payload:null}),ld=()=>({type:"MOVE_RIGHT",payload:null}),cd=()=>({type:"MOVE_LEFT",payload:null}),en=()=>({type:"FLUSH",payload:null}),dd=e=>({type:"DROP_ANIMATE",payload:e}),tn=e=>({type:"DROP_COMPLETE",payload:e}),fa=e=>({type:"DROP",payload:e}),ud=e=>({type:"DROP_PENDING",payload:e}),ba=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var md=e=>({getState:t,dispatch:r})=>n=>a=>{if(!X(a,"LIFT")){n(a);return}const{id:s,clientSelection:i,movementMode:l}=a.payload,c=t();c.phase==="DROP_ANIMATING"&&r(tn({completed:c.completed})),t().phase!=="IDLE"&&M(),r(en()),r(Jc({draggableId:s,movementMode:l}));const m={draggableId:s,scrollOptions:{shouldPublishImmediately:l==="SNAP"}},{critical:d,dimensions:g,viewport:p}=e.startPublishing(m);r(Zc({critical:d,dimensions:g,clientSelection:i,movementMode:l,viewport:p}))},gd=e=>()=>t=>r=>{X(r,"INITIAL_PUBLISH")&&e.dragging(),X(r,"DROP_ANIMATE")&&e.dropping(r.payload.completed.result.reason),(X(r,"FLUSH")||X(r,"DROP_COMPLETE"))&&e.resting(),t(r)};const rn={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},St={opacity:{drop:0,combining:.7},scale:{drop:.75}},xa={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},He=`${xa.outOfTheWay}s ${rn.outOfTheWay}`,ht={fluid:`opacity ${He}`,snap:`transform ${He}, opacity ${He}`,drop:e=>{const t=`${e}s ${rn.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${He}`,placeholder:`height ${He}, width ${He}, margin ${He}`},Yn=e=>Ge(e,ce)?void 0:`translate(${e.x}px, ${e.y}px)`,Br={moveTo:Yn,drop:(e,t)=>{const r=Yn(e);if(r)return t?`${r} scale(${St.scale.drop})`:r}},{minDropTime:_r,maxDropTime:ya}=xa,pd=ya-_r,qn=1500,hd=.6;var fd=({current:e,destination:t,reason:r})=>{const n=wt(e,t);if(n<=0)return _r;if(n>=qn)return ya;const a=n/qn,s=_r+pd*a,i=r==="CANCEL"?s*hd:s;return Number(i.toFixed(2))},bd=({impact:e,draggable:t,dimensions:r,viewport:n,afterCritical:a})=>{const{draggables:s,droppables:i}=r,l=Se(e),c=l?i[l]:null,u=i[t.descriptor.droppableId],m=ma({impact:e,draggable:t,draggables:s,afterCritical:a,droppable:c||u,viewport:n});return Ne(m,t.client.borderBox.center)},xd=({draggables:e,reason:t,lastImpact:r,home:n,viewport:a,onLiftImpact:s})=>!r.at||t!=="DROP"?{impact:ua({draggables:e,impact:s,destination:n,viewport:a,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:r.at.type==="REORDER"?{impact:r,didDropInsideDroppable:!0}:{impact:{...r,displaced:kt},didDropInsideDroppable:!0};const yd=({getState:e,dispatch:t})=>r=>n=>{if(!X(n,"DROP")){r(n);return}const a=e(),s=n.payload.reason;if(a.phase==="COLLECTING"){t(ud({reason:s}));return}if(a.phase==="IDLE")return;a.phase==="DROP_PENDING"&&a.isWaiting&&M(),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||M();const l=a.critical,c=a.dimensions,u=c.draggables[a.critical.draggable.id],{impact:m,didDropInsideDroppable:d}=xd({reason:s,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),g=d?qr(m):null,p=d?nr(m):null,f={index:l.draggable.index,droppableId:l.droppable.id},y={draggableId:u.descriptor.id,type:u.descriptor.type,source:f,reason:s,mode:a.movementMode,destination:g,combine:p},b=bd({impact:m,draggable:u,dimensions:c,viewport:a.viewport,afterCritical:a.afterCritical}),k={critical:a.critical,afterCritical:a.afterCritical,result:y,impact:m};if(!(!Ge(a.current.client.offset,b)||!!y.combine)){t(tn({completed:k}));return}const w=fd({current:a.current.client.offset,destination:b,reason:s});t(dd({newHomeClientOffset:b,dropDuration:w,completed:k}))};var va=()=>({x:window.pageXOffset,y:window.pageYOffset});function vd(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function wd({onWindowScroll:e}){function t(){e(va())}const r=vt(t),n=vd(r);let a=Ue;function s(){return a!==Ue}function i(){s()&&M(),a=Ce(window,[n])}function l(){s()||M(),r.cancel(),a(),a=Ue}return{start:i,stop:l,isActive:s}}const kd=e=>X(e,"DROP_COMPLETE")||X(e,"DROP_ANIMATE")||X(e,"FLUSH"),Nd=e=>{const t=wd({onWindowScroll:r=>{e.dispatch(od({newScroll:r}))}});return r=>n=>{!t.isActive()&&X(n,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&kd(n)&&t.stop(),r(n)}};var Sd=e=>{let t=!1,r=!1;const n=setTimeout(()=>{r=!0}),a=s=>{t||r||(t=!0,e(s),clearTimeout(n))};return a.wasCalled=()=>t,a},jd=()=>{const e=[],t=a=>{const s=e.findIndex(l=>l.timerId===a);s===-1&&M();const[i]=e.splice(s,1);i.callback()};return{add:a=>{const s=setTimeout(()=>t(s)),i={timerId:s,callback:a};e.push(i)},flush:()=>{if(!e.length)return;const a=[...e];e.length=0,a.forEach(s=>{clearTimeout(s.timerId),s.callback()})}}};const Dd=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,Cd=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,Ed=(e,t)=>{if(e===t)return!0;const r=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,n=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return r&&n},ct=(e,t)=>{t()},Pt=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function yr(e,t,r,n){if(!e){r(n(t));return}const a=Sd(r);e(t,{announce:a}),a.wasCalled()||r(n(t))}var Td=(e,t)=>{const r=jd();let n=null;const a=(d,g)=>{n&&M(),ct("onBeforeCapture",()=>{const p=e().onBeforeCapture;p&&p({draggableId:d,mode:g})})},s=(d,g)=>{n&&M(),ct("onBeforeDragStart",()=>{const p=e().onBeforeDragStart;p&&p(Pt(d,g))})},i=(d,g)=>{n&&M();const p=Pt(d,g);n={mode:g,lastCritical:d,lastLocation:p.source,lastCombine:null},r.add(()=>{ct("onDragStart",()=>yr(e().onDragStart,p,t,Lt.onDragStart))})},l=(d,g)=>{const p=qr(g),f=nr(g);n||M();const y=!Ed(d,n.lastCritical);y&&(n.lastCritical=d);const b=!Dd(n.lastLocation,p);b&&(n.lastLocation=p);const k=!Cd(n.lastCombine,f);if(k&&(n.lastCombine=f),!y&&!b&&!k)return;const v={...Pt(d,n.mode),combine:f,destination:p};r.add(()=>{ct("onDragUpdate",()=>yr(e().onDragUpdate,v,t,Lt.onDragUpdate))})},c=()=>{n||M(),r.flush()},u=d=>{n||M(),n=null,ct("onDragEnd",()=>yr(e().onDragEnd,d,t,Lt.onDragEnd))};return{beforeCapture:a,beforeStart:s,start:i,update:l,flush:c,drop:u,abort:()=>{if(!n)return;const d={...Pt(n.lastCritical,n.mode),combine:null,destination:null,reason:"CANCEL"};u(d)}}},Id=(e,t)=>{const r=Td(e,t);return n=>a=>s=>{if(X(s,"BEFORE_INITIAL_CAPTURE")){r.beforeCapture(s.payload.draggableId,s.payload.movementMode);return}if(X(s,"INITIAL_PUBLISH")){const l=s.payload.critical;r.beforeStart(l,s.payload.movementMode),a(s),r.start(l,s.payload.movementMode);return}if(X(s,"DROP_COMPLETE")){const l=s.payload.completed.result;r.flush(),a(s),r.drop(l);return}if(a(s),X(s,"FLUSH")){r.abort();return}const i=n.getState();i.phase==="DRAGGING"&&r.update(i.critical,i.impact)}};const Ad=e=>t=>r=>{if(!X(r,"DROP_ANIMATION_FINISHED")){t(r);return}const n=e.getState();n.phase!=="DROP_ANIMATING"&&M(),e.dispatch(tn({completed:n.completed}))},Pd=e=>{let t=null,r=null;function n(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return a=>s=>{if((X(s,"FLUSH")||X(s,"DROP_COMPLETE")||X(s,"DROP_ANIMATION_FINISHED"))&&n(),a(s),!X(s,"DROP_ANIMATE"))return;const i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(ba())}};r=requestAnimationFrame(()=>{r=null,t=Ce(window,[i])})}};var Md=e=>()=>t=>r=>{(X(r,"DROP_COMPLETE")||X(r,"FLUSH")||X(r,"DROP_ANIMATE"))&&e.stopPublishing(),t(r)},Rd=e=>{let t=!1;return()=>r=>n=>{if(X(n,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),e.tryRestoreFocusRecorded();return}if(r(n),!!t){if(X(n,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(X(n,"DROP_COMPLETE")){t=!1;const a=n.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const Od=e=>X(e,"DROP_COMPLETE")||X(e,"DROP_ANIMATE")||X(e,"FLUSH");var Ld=e=>t=>r=>n=>{if(Od(n)){e.stop(),r(n);return}if(X(n,"INITIAL_PUBLISH")){r(n);const a=t.getState();a.phase!=="DRAGGING"&&M(),e.start(a);return}r(n),e.scroll(t.getState())};const Bd=e=>t=>r=>{if(t(r),!X(r,"PUBLISH_WHILE_DRAGGING"))return;const n=e.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||e.dispatch(fa({reason:n.reason})))},_d=Lo;var Fd=({dimensionMarshal:e,focusMarshal:t,styleMarshal:r,getResponders:n,announce:a,autoScroller:s})=>Oo(Kc,_d(Pi(gd(r),Md(e),md(e),yd,Ad,Pd,Bd,Ld(s),Nd,Rd(t),Id(n,a))));const vr=()=>({additions:{},removals:{},modified:{}});function $d({registry:e,callbacks:t}){let r=vr(),n=null;const a=()=>{n||(t.collectionStarting(),n=requestAnimationFrame(()=>{n=null;const{additions:c,removals:u,modified:m}=r,d=Object.keys(c).map(f=>e.draggable.getById(f).getDimension(ce)).sort((f,y)=>f.descriptor.index-y.descriptor.index),g=Object.keys(m).map(f=>{const b=e.droppable.getById(f).callbacks.getScrollWhileDragging();return{droppableId:f,scroll:b}}),p={additions:d,removals:Object.keys(u),modified:g};r=vr(),t.publish(p)}))};return{add:c=>{const u=c.descriptor.id;r.additions[u]=c,r.modified[c.descriptor.droppableId]=!0,r.removals[u]&&delete r.removals[u],a()},remove:c=>{const u=c.descriptor;r.removals[u.id]=!0,r.modified[u.droppableId]=!0,r.additions[u.id]&&delete r.additions[u.id],a()},stop:()=>{n&&(cancelAnimationFrame(n),n=null,r=vr())}}}var wa=({scrollHeight:e,scrollWidth:t,height:r,width:n})=>{const a=Ne({x:t,y:e},{x:n,y:r});return{x:Math.max(0,a.x),y:Math.max(0,a.y)}},ka=()=>{const e=document.documentElement;return e||M(),e},Na=()=>{const e=ka();return wa({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},Ud=()=>{const e=va(),t=Na(),r=e.y,n=e.x,a=ka(),s=a.clientWidth,i=a.clientHeight,l=n+s,c=r+i;return{frame:Ie({top:r,left:n,right:l,bottom:c}),scroll:{initial:e,current:e,max:t,diff:{value:ce,displacement:ce}}}},Gd=({critical:e,scrollOptions:t,registry:r})=>{const n=Ud(),a=n.scroll.current,s=e.droppable,i=r.droppable.getAllByType(s.type).map(m=>m.callbacks.getDimensionAndWatchScroll(a,t)),l=r.draggable.getAllByType(e.draggable.type).map(m=>m.getDimension(a));return{dimensions:{draggables:Xo(l),droppables:Jo(i)},critical:e,viewport:n}};function Kn(e,t,r){return!(r.descriptor.id===t.id||r.descriptor.type!==t.type||e.droppable.getById(r.descriptor.droppableId).descriptor.mode!=="virtual")}var Wd=(e,t)=>{let r=null;const n=$d({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),a=(g,p)=>{e.droppable.exists(g)||M(),r&&t.updateDroppableIsEnabled({id:g,isEnabled:p})},s=(g,p)=>{r&&(e.droppable.exists(g)||M(),t.updateDroppableIsCombineEnabled({id:g,isCombineEnabled:p}))},i=(g,p)=>{r&&(e.droppable.exists(g)||M(),t.updateDroppableScroll({id:g,newScroll:p}))},l=(g,p)=>{r&&e.droppable.getById(g).callbacks.scroll(p)},c=()=>{if(!r)return;n.stop();const g=r.critical.droppable;e.droppable.getAllByType(g.type).forEach(p=>p.callbacks.dragStopped()),r.unsubscribe(),r=null},u=g=>{r||M();const p=r.critical.draggable;g.type==="ADDITION"&&Kn(e,p,g.value)&&n.add(g.value),g.type==="REMOVAL"&&Kn(e,p,g.value)&&n.remove(g.value)};return{updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:s,scrollDroppable:l,updateDroppableScroll:i,startPublishing:g=>{r&&M();const p=e.draggable.getById(g.draggableId),f=e.droppable.getById(p.descriptor.droppableId),y={draggable:p.descriptor,droppable:f.descriptor},b=e.subscribe(u);return r={critical:y,unsubscribe:b},Gd({critical:y,registry:e,scrollOptions:g.scrollOptions})},stopPublishing:c}},Sa=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",zd=e=>{window.scrollBy(e.x,e.y)};const Hd=le(e=>rr(e).filter(t=>!(!t.isEnabled||!t.frame))),Vd=(e,t)=>Hd(t).find(n=>(n.frame||M(),ia(n.frame.pageMarginBox)(e)))||null;var Yd=({center:e,destination:t,droppables:r})=>{if(t){const a=r[t];return a.frame?a:null}return Vd(e,r)};const jt={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var qd=(e,t,r=()=>jt)=>{const n=r(),a=e[t.size]*n.startFromPercentage,s=e[t.size]*n.maxScrollAtPercentage;return{startScrollingFrom:a,maxScrollValueAt:s}},ja=({startOfRange:e,endOfRange:t,current:r})=>{const n=t-e;return n===0?0:(r-e)/n},nn=1,Kd=(e,t,r=()=>jt)=>{const n=r();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return n.maxPixelScroll;if(e===t.startScrollingFrom)return nn;const s=1-ja({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),i=n.maxPixelScroll*n.ease(s);return Math.ceil(i)},Jd=(e,t,r)=>{const n=r(),a=n.durationDampening.accelerateAt,s=n.durationDampening.stopDampeningAt,i=t,l=s,u=Date.now()-i;if(u>=s)return e;if(u<a)return nn;const m=ja({startOfRange:a,endOfRange:l,current:u}),d=e*n.ease(m);return Math.ceil(d)},Jn=({distanceToEdge:e,thresholds:t,dragStartTime:r,shouldUseTimeDampening:n,getAutoScrollerOptions:a})=>{const s=Kd(e,t,a);return s===0?0:n?Math.max(Jd(s,r,a),nn):s},Xn=({container:e,distanceToEdges:t,dragStartTime:r,axis:n,shouldUseTimeDampening:a,getAutoScrollerOptions:s})=>{const i=qd(e,n,s);return t[n.end]<t[n.start]?Jn({distanceToEdge:t[n.end],thresholds:i,dragStartTime:r,shouldUseTimeDampening:a,getAutoScrollerOptions:s}):-1*Jn({distanceToEdge:t[n.start],thresholds:i,dragStartTime:r,shouldUseTimeDampening:a,getAutoScrollerOptions:s})},Xd=({container:e,subject:t,proposedScroll:r})=>{const n=t.height>e.height,a=t.width>e.width;return!a&&!n?r:a&&n?null:{x:a?0:r.x,y:n?0:r.y}};const Zd=Ko(e=>e===0?0:e);var Da=({dragStartTime:e,container:t,subject:r,center:n,shouldUseTimeDampening:a,getAutoScrollerOptions:s})=>{const i={top:n.y-t.top,right:t.right-n.x,bottom:t.bottom-n.y,left:n.x-t.left},l=Xn({container:t,distanceToEdges:i,dragStartTime:e,axis:Kr,shouldUseTimeDampening:a,getAutoScrollerOptions:s}),c=Xn({container:t,distanceToEdges:i,dragStartTime:e,axis:ea,shouldUseTimeDampening:a,getAutoScrollerOptions:s}),u=Zd({x:c,y:l});if(Ge(u,ce))return null;const m=Xd({container:t,subject:r,proposedScroll:u});return m?Ge(m,ce)?null:m:null};const Qd=Ko(e=>e===0?0:e>0?1:-1),on=(()=>{const e=(t,r)=>t<0?t:t>r?t-r:0;return({current:t,max:r,change:n})=>{const a=ue(t,n),s={x:e(a.x,r.x),y:e(a.y,r.y)};return Ge(s,ce)?null:s}})(),Ca=({max:e,current:t,change:r})=>{const n={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},a=Qd(r),s=on({max:n,current:t,change:a});return!s||a.x!==0&&s.x===0||a.y!==0&&s.y===0},an=(e,t)=>Ca({current:e.scroll.current,max:e.scroll.max,change:t}),eu=(e,t)=>{if(!an(e,t))return null;const r=e.scroll.max,n=e.scroll.current;return on({current:n,max:r,change:t})},sn=(e,t)=>{const r=e.frame;return r?Ca({current:r.scroll.current,max:r.scroll.max,change:t}):!1},tu=(e,t)=>{const r=e.frame;return!r||!sn(e,t)?null:on({current:r.scroll.current,max:r.scroll.max,change:t})};var ru=({viewport:e,subject:t,center:r,dragStartTime:n,shouldUseTimeDampening:a,getAutoScrollerOptions:s})=>{const i=Da({dragStartTime:n,container:e.frame,subject:t,center:r,shouldUseTimeDampening:a,getAutoScrollerOptions:s});return i&&an(e,i)?i:null},nu=({droppable:e,subject:t,center:r,dragStartTime:n,shouldUseTimeDampening:a,getAutoScrollerOptions:s})=>{const i=e.frame;if(!i)return null;const l=Da({dragStartTime:n,container:i.pageMarginBox,subject:t,center:r,shouldUseTimeDampening:a,getAutoScrollerOptions:s});return l&&sn(e,l)?l:null},Zn=({state:e,dragStartTime:t,shouldUseTimeDampening:r,scrollWindow:n,scrollDroppable:a,getAutoScrollerOptions:s})=>{const i=e.current.page.borderBoxCenter,c=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const d=e.viewport,g=ru({dragStartTime:t,viewport:d,subject:c,center:i,shouldUseTimeDampening:r,getAutoScrollerOptions:s});if(g){n(g);return}}const u=Yd({center:i,destination:Se(e.impact),droppables:e.dimensions.droppables});if(!u)return;const m=nu({dragStartTime:t,droppable:u,subject:c,center:i,shouldUseTimeDampening:r,getAutoScrollerOptions:s});m&&a(u.descriptor.id,m)},ou=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:r=()=>jt})=>{const n=vt(e),a=vt(t);let s=null;const i=u=>{s||M();const{shouldUseTimeDampening:m,dragStartTime:d}=s;Zn({state:u,scrollWindow:n,scrollDroppable:a,dragStartTime:d,shouldUseTimeDampening:m,getAutoScrollerOptions:r})};return{start:u=>{s&&M();const m=Date.now();let d=!1;const g=()=>{d=!0};Zn({state:u,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:g,scrollDroppable:g,getAutoScrollerOptions:r}),s={dragStartTime:m,shouldUseTimeDampening:d},d&&i(u)},stop:()=>{s&&(n.cancel(),a.cancel(),s=null)},scroll:i}},au=({move:e,scrollDroppable:t,scrollWindow:r})=>{const n=(l,c)=>{const u=ue(l.current.client.selection,c);e({client:u})},a=(l,c)=>{if(!sn(l,c))return c;const u=tu(l,c);if(!u)return t(l.descriptor.id,c),null;const m=Ne(c,u);return t(l.descriptor.id,m),Ne(c,m)},s=(l,c,u)=>{if(!l||!an(c,u))return u;const m=eu(c,u);if(!m)return r(u),null;const d=Ne(u,m);return r(d),Ne(u,d)};return l=>{const c=l.scrollJumpRequest;if(!c)return;const u=Se(l.impact);u||M();const m=a(l.dimensions.droppables[u],c);if(!m)return;const d=l.viewport,g=s(l.isWindowScrollAllowed,d,m);g&&n(l,g)}},su=({scrollDroppable:e,scrollWindow:t,move:r,getAutoScrollerOptions:n})=>{const a=ou({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:n}),s=au({move:r,scrollWindow:t,scrollDroppable:e});return{scroll:c=>{if(!(n().disabled||c.phase!=="DRAGGING")){if(c.movementMode==="FLUID"){a.scroll(c);return}c.scrollJumpRequest&&s(c)}},start:a.start,stop:a.stop}};const nt="data-rfd",ot=(()=>{const e=`${nt}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),Fr=(()=>{const e=`${nt}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),iu=(()=>{const e=`${nt}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),Qn={contextId:`${nt}-scroll-container-context-id`},lu=e=>t=>`[${t}="${e}"]`,dt=(e,t)=>e.map(r=>{const n=r.styles[t];return n?`${r.selector} { ${n} }`:""}).join(" "),cu="pointer-events: none;";var du=e=>{const t=lu(e),r=(()=>{const l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(ot.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:cu,dropAnimating:l}}})(),n=(()=>{const l=`
      transition: ${ht.outOfTheWay};
    `;return{selector:t(Fr.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}})(),a={selector:t(iu.contextId),styles:{always:"overflow-anchor: none;"}},i=[n,r,a,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:dt(i,"always"),resting:dt(i,"resting"),dragging:dt(i,"dragging"),dropAnimating:dt(i,"dropAnimating"),userCancel:dt(i,"userCancel")}};const je=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?h.useLayoutEffect:h.useEffect,wr=()=>{const e=document.querySelector("head");return e||M(),e},eo=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function uu(e,t){const r=K(()=>du(e),[e]),n=h.useRef(null),a=h.useRef(null),s=F(le(d=>{const g=a.current;g||M(),g.textContent=d}),[]),i=F(d=>{const g=n.current;g||M(),g.textContent=d},[]);je(()=>{!n.current&&!a.current||M();const d=eo(t),g=eo(t);return n.current=d,a.current=g,d.setAttribute(`${nt}-always`,e),g.setAttribute(`${nt}-dynamic`,e),wr().appendChild(d),wr().appendChild(g),i(r.always),s(r.resting),()=>{const p=f=>{const y=f.current;y||M(),wr().removeChild(y),f.current=null};p(n),p(a)}},[t,i,s,r.always,r.resting,e]);const l=F(()=>s(r.dragging),[s,r.dragging]),c=F(d=>{if(d==="DROP"){s(r.dropAnimating);return}s(r.userCancel)},[s,r.dropAnimating,r.userCancel]),u=F(()=>{a.current&&s(r.resting)},[s,r.resting]);return K(()=>({dragging:l,dropping:c,resting:u}),[l,c,u])}function Ea(e,t){return Array.from(e.querySelectorAll(t))}var Ta=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function sr(e){return e instanceof Ta(e).HTMLElement}function mu(e,t){const r=`[${ot.contextId}="${e}"]`,n=Ea(document,r);if(!n.length)return null;const a=n.find(s=>s.getAttribute(ot.draggableId)===t);return!a||!sr(a)?null:a}function gu(e){const t=h.useRef({}),r=h.useRef(null),n=h.useRef(null),a=h.useRef(!1),s=F(function(g,p){const f={id:g,focus:p};return t.current[g]=f,function(){const b=t.current;b[g]!==f&&delete b[g]}},[]),i=F(function(g){const p=mu(e,g);p&&p!==document.activeElement&&p.focus()},[e]),l=F(function(g,p){r.current===g&&(r.current=p)},[]),c=F(function(){n.current||a.current&&(n.current=requestAnimationFrame(()=>{n.current=null;const g=r.current;g&&i(g)}))},[i]),u=F(function(g){r.current=null;const p=document.activeElement;p&&p.getAttribute(ot.draggableId)===g&&(r.current=g)},[]);return je(()=>(a.current=!0,function(){a.current=!1;const g=n.current;g&&cancelAnimationFrame(g)}),[]),K(()=>({register:s,tryRecordFocus:u,tryRestoreFocusRecorded:c,tryShiftRecord:l}),[s,u,c,l])}function pu(){const e={draggables:{},droppables:{}},t=[];function r(d){return t.push(d),function(){const p=t.indexOf(d);p!==-1&&t.splice(p,1)}}function n(d){t.length&&t.forEach(g=>g(d))}function a(d){return e.draggables[d]||null}function s(d){const g=a(d);return g||M(),g}const i={register:d=>{e.draggables[d.descriptor.id]=d,n({type:"ADDITION",value:d})},update:(d,g)=>{const p=e.draggables[g.descriptor.id];p&&p.uniqueId===d.uniqueId&&(delete e.draggables[g.descriptor.id],e.draggables[d.descriptor.id]=d)},unregister:d=>{const g=d.descriptor.id,p=a(g);p&&d.uniqueId===p.uniqueId&&(delete e.draggables[g],e.droppables[d.descriptor.droppableId]&&n({type:"REMOVAL",value:d}))},getById:s,findById:a,exists:d=>!!a(d),getAllByType:d=>Object.values(e.draggables).filter(g=>g.descriptor.type===d)};function l(d){return e.droppables[d]||null}function c(d){const g=l(d);return g||M(),g}const u={register:d=>{e.droppables[d.descriptor.id]=d},unregister:d=>{const g=l(d.descriptor.id);g&&d.uniqueId===g.uniqueId&&delete e.droppables[d.descriptor.id]},getById:c,findById:l,exists:d=>!!l(d),getAllByType:d=>Object.values(e.droppables).filter(g=>g.descriptor.type===d)};function m(){e.draggables={},e.droppables={},t.length=0}return{draggable:i,droppable:u,subscribe:r,clean:m}}function hu(){const e=K(pu,[]);return h.useEffect(()=>function(){e.clean()},[e]),e}var ln=oe.createContext(null),Kt=()=>{const e=document.body;return e||M(),e};const fu={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},bu=e=>`rfd-announcement-${e}`;function xu(e){const t=K(()=>bu(e),[e]),r=h.useRef(null);return h.useEffect(function(){const s=document.createElement("div");return r.current=s,s.id=t,s.setAttribute("aria-live","assertive"),s.setAttribute("aria-atomic","true"),Ht(s.style,fu),Kt().appendChild(s),function(){setTimeout(function(){const c=Kt();c.contains(s)&&c.removeChild(s),s===r.current&&(r.current=null)})}},[t]),F(a=>{const s=r.current;if(s){s.textContent=a;return}},[])}const yu={separator:"::"};function cn(e,t=yu){const r=oe.useId();return K(()=>`${e}${t.separator}${r}`,[t.separator,e,r])}function vu({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function wu({contextId:e,text:t}){const r=cn("hidden-text",{separator:"-"}),n=K(()=>vu({contextId:e,uniqueId:r}),[r,e]);return h.useEffect(function(){const s=document.createElement("div");return s.id=n,s.textContent=t,s.style.display="none",Kt().appendChild(s),function(){const l=Kt();l.contains(s)&&l.removeChild(s)}},[n,t]),n}var ir=oe.createContext(null);function Ia(e){const t=h.useRef(e);return h.useEffect(()=>{t.current=e}),t}function ku(){let e=null;function t(){return!!e}function r(i){return i===e}function n(i){e&&M();const l={abandon:i};return e=l,l}function a(){e||M(),e=null}function s(){e&&(e.abandon(),a())}return{isClaimed:t,isActive:r,claim:n,release:a,tryAbandon:s}}function Dt(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const Nu=9,Su=13,dn=27,Aa=32,ju=33,Du=34,Cu=35,Eu=36,Tu=37,Iu=38,Au=39,Pu=40,Mu={[Su]:!0,[Nu]:!0};var Pa=e=>{Mu[e.keyCode]&&e.preventDefault()};const lr=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(n=>`on${n}`in document)||e})(),Ma=0,to=5;function Ru(e,t){return Math.abs(t.x-e.x)>=to||Math.abs(t.y-e.y)>=to}const ro={type:"IDLE"};function Ou({cancel:e,completed:t,getPhase:r,setPhase:n}){return[{eventName:"mousemove",fn:a=>{const{button:s,clientX:i,clientY:l}=a;if(s!==Ma)return;const c={x:i,y:l},u=r();if(u.type==="DRAGGING"){a.preventDefault(),u.actions.move(c);return}u.type!=="PENDING"&&M();const m=u.point;if(!Ru(m,c))return;a.preventDefault();const d=u.actions.fluidLift(c);n({type:"DRAGGING",actions:d})}},{eventName:"mouseup",fn:a=>{const s=r();if(s.type!=="DRAGGING"){e();return}a.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:a=>{r().type==="DRAGGING"&&a.preventDefault(),e()}},{eventName:"keydown",fn:a=>{if(r().type==="PENDING"){e();return}if(a.keyCode===dn){a.preventDefault(),e();return}Pa(a)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{r().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:a=>{const s=r();if(s.type==="IDLE"&&M(),s.actions.shouldRespectForcePress()){e();return}a.preventDefault()}},{eventName:lr,fn:e}]}function Lu(e){const t=h.useRef(ro),r=h.useRef(Ue),n=K(()=>({eventName:"mousedown",fn:function(d){if(d.defaultPrevented||d.button!==Ma||d.ctrlKey||d.metaKey||d.shiftKey||d.altKey)return;const g=e.findClosestDraggableId(d);if(!g)return;const p=e.tryGetLock(g,i,{sourceEvent:d});if(!p)return;d.preventDefault();const f={x:d.clientX,y:d.clientY};r.current(),u(p,f)}}),[e]),a=K(()=>({eventName:"webkitmouseforcewillbegin",fn:m=>{if(m.defaultPrevented)return;const d=e.findClosestDraggableId(m);if(!d)return;const g=e.findOptionsForDraggable(d);g&&(g.shouldRespectForcePress||e.canGetLock(d)&&m.preventDefault())}}),[e]),s=F(function(){const d={passive:!1,capture:!0};r.current=Ce(window,[a,n],d)},[a,n]),i=F(()=>{t.current.type!=="IDLE"&&(t.current=ro,r.current(),s())},[s]),l=F(()=>{const m=t.current;i(),m.type==="DRAGGING"&&m.actions.cancel({shouldBlockNextClick:!0}),m.type==="PENDING"&&m.actions.abort()},[i]),c=F(function(){const d={capture:!0,passive:!1},g=Ou({cancel:l,completed:i,getPhase:()=>t.current,setPhase:p=>{t.current=p}});r.current=Ce(window,g,d)},[l,i]),u=F(function(d,g){t.current.type!=="IDLE"&&M(),t.current={type:"PENDING",point:g,actions:d},c()},[c]);je(function(){return s(),function(){r.current()}},[s])}function Bu(){}const _u={[Du]:!0,[ju]:!0,[Eu]:!0,[Cu]:!0};function Fu(e,t){function r(){t(),e.cancel()}function n(){t(),e.drop()}return[{eventName:"keydown",fn:a=>{if(a.keyCode===dn){a.preventDefault(),r();return}if(a.keyCode===Aa){a.preventDefault(),n();return}if(a.keyCode===Pu){a.preventDefault(),e.moveDown();return}if(a.keyCode===Iu){a.preventDefault(),e.moveUp();return}if(a.keyCode===Au){a.preventDefault(),e.moveRight();return}if(a.keyCode===Tu){a.preventDefault(),e.moveLeft();return}if(_u[a.keyCode]){a.preventDefault();return}Pa(a)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:lr,fn:r}]}function $u(e){const t=h.useRef(Bu),r=K(()=>({eventName:"keydown",fn:function(s){if(s.defaultPrevented||s.keyCode!==Aa)return;const i=e.findClosestDraggableId(s);if(!i)return;const l=e.tryGetLock(i,m,{sourceEvent:s});if(!l)return;s.preventDefault();let c=!0;const u=l.snapLift();t.current();function m(){c||M(),c=!1,t.current(),n()}t.current=Ce(window,Fu(u,m),{capture:!0,passive:!1})}}),[e]),n=F(function(){const s={passive:!1,capture:!0};t.current=Ce(window,[r],s)},[r]);je(function(){return n(),function(){t.current()}},[n])}const kr={type:"IDLE"},Uu=120,Gu=.15;function Wu({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:r=>{r.preventDefault()}},{eventName:"keydown",fn:r=>{if(t().type!=="DRAGGING"){e();return}r.keyCode===dn&&r.preventDefault(),e()}},{eventName:lr,fn:e}]}function zu({cancel:e,completed:t,getPhase:r}){return[{eventName:"touchmove",options:{capture:!1},fn:n=>{const a=r();if(a.type!=="DRAGGING"){e();return}a.hasMoved=!0;const{clientX:s,clientY:i}=n.touches[0],l={x:s,y:i};n.preventDefault(),a.actions.move(l)}},{eventName:"touchend",fn:n=>{const a=r();if(a.type!=="DRAGGING"){e();return}n.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:n=>{if(r().type!=="DRAGGING"){e();return}n.preventDefault(),e()}},{eventName:"touchforcechange",fn:n=>{const a=r();a.type==="IDLE"&&M();const s=n.touches[0];if(!s||!(s.force>=Gu))return;const l=a.actions.shouldRespectForcePress();if(a.type==="PENDING"){l&&e();return}if(l){if(a.hasMoved){n.preventDefault();return}e();return}n.preventDefault()}},{eventName:lr,fn:e}]}function Hu(e){const t=h.useRef(kr),r=h.useRef(Ue),n=F(function(){return t.current},[]),a=F(function(p){t.current=p},[]),s=K(()=>({eventName:"touchstart",fn:function(p){if(p.defaultPrevented)return;const f=e.findClosestDraggableId(p);if(!f)return;const y=e.tryGetLock(f,l,{sourceEvent:p});if(!y)return;const b=p.touches[0],{clientX:k,clientY:v}=b,w={x:k,y:v};r.current(),d(y,w)}}),[e]),i=F(function(){const p={capture:!0,passive:!1};r.current=Ce(window,[s],p)},[s]),l=F(()=>{const g=t.current;g.type!=="IDLE"&&(g.type==="PENDING"&&clearTimeout(g.longPressTimerId),a(kr),r.current(),i())},[i,a]),c=F(()=>{const g=t.current;l(),g.type==="DRAGGING"&&g.actions.cancel({shouldBlockNextClick:!0}),g.type==="PENDING"&&g.actions.abort()},[l]),u=F(function(){const p={capture:!0,passive:!1},f={cancel:c,completed:l,getPhase:n},y=Ce(window,zu(f),p),b=Ce(window,Wu(f),p);r.current=function(){y(),b()}},[c,n,l]),m=F(function(){const p=n();p.type!=="PENDING"&&M();const f=p.actions.fluidLift(p.point);a({type:"DRAGGING",actions:f,hasMoved:!1})},[n,a]),d=F(function(p,f){n().type!=="IDLE"&&M();const y=setTimeout(m,Uu);a({type:"PENDING",point:f,actions:p,longPressTimerId:y}),u()},[u,n,a,m]);je(function(){return i(),function(){r.current();const f=n();f.type==="PENDING"&&(clearTimeout(f.longPressTimerId),a(kr))}},[n,i,a]),je(function(){return Ce(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const Vu=["input","button","textarea","select","option","optgroup","video","audio"];function Ra(e,t){if(t==null)return!1;if(Vu.includes(t.tagName.toLowerCase()))return!0;const n=t.getAttribute("contenteditable");return n==="true"||n===""?!0:t===e?!1:Ra(e,t.parentElement)}function Yu(e,t){const r=t.target;return sr(r)?Ra(e,r):!1}var qu=e=>Ie(e.getBoundingClientRect()).center;function Ku(e){return e instanceof Ta(e).Element}const Ju=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(n=>n in Element.prototype)||e})();function Oa(e,t){return e==null?null:e[Ju](t)?e:Oa(e.parentElement,t)}function Xu(e,t){return e.closest?e.closest(t):Oa(e,t)}function Zu(e){return`[${ot.contextId}="${e}"]`}function Qu(e,t){const r=t.target;if(!Ku(r))return null;const n=Zu(e),a=Xu(r,n);return!a||!sr(a)?null:a}function em(e,t){const r=Qu(e,t);return r?r.getAttribute(ot.draggableId):null}function tm(e,t){const r=`[${Fr.contextId}="${e}"]`,a=Ea(document,r).find(s=>s.getAttribute(Fr.id)===t);return!a||!sr(a)?null:a}function rm(e){e.preventDefault()}function Mt({expected:e,phase:t,isLockActive:r,shouldWarn:n}){return!(!r()||e!==t)}function La({lockAPI:e,store:t,registry:r,draggableId:n}){if(e.isClaimed())return!1;const a=r.draggable.findById(n);return!(!a||!a.options.isEnabled||!Sa(t.getState(),n))}function nm({lockAPI:e,contextId:t,store:r,registry:n,draggableId:a,forceSensorStop:s,sourceEvent:i}){if(!La({lockAPI:e,store:r,registry:n,draggableId:a}))return null;const c=n.draggable.getById(a),u=tm(t,c.descriptor.id);if(!u||i&&!c.options.canDragInteractiveElements&&Yu(u,i))return null;const m=e.claim(s||Ue);let d="PRE_DRAG";function g(){return c.options.shouldRespectForcePress}function p(){return e.isActive(m)}function f(C,S){Mt({expected:C,phase:d,isLockActive:p,shouldWarn:!0})&&r.dispatch(S())}const y=f.bind(null,"DRAGGING");function b(C){function S(){e.release(),d="COMPLETED"}d!=="PRE_DRAG"&&(S(),M()),r.dispatch(Xc(C.liftActionArgs)),d="DRAGGING";function D(I,E={shouldBlockNextClick:!1}){if(C.cleanup(),E.shouldBlockNextClick){const T=Ce(window,[{eventName:"click",fn:rm,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(T)}S(),r.dispatch(fa({reason:I}))}return{isActive:()=>Mt({expected:"DRAGGING",phase:d,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:g,drop:I=>D("DROP",I),cancel:I=>D("CANCEL",I),...C.actions}}function k(C){const S=vt(I=>{y(()=>ha({client:I}))});return{...b({liftActionArgs:{id:a,clientSelection:C,movementMode:"FLUID"},cleanup:()=>S.cancel(),actions:{move:S}}),move:S}}function v(){const C={moveUp:()=>y(sd),moveRight:()=>y(ld),moveDown:()=>y(id),moveLeft:()=>y(cd)};return b({liftActionArgs:{id:a,clientSelection:qu(u),movementMode:"SNAP"},cleanup:Ue,actions:C})}function w(){Mt({expected:"PRE_DRAG",phase:d,isLockActive:p,shouldWarn:!0})&&e.release()}return{isActive:()=>Mt({expected:"PRE_DRAG",phase:d,isLockActive:p,shouldWarn:!1}),shouldRespectForcePress:g,fluidLift:k,snapLift:v,abort:w}}const om=[Lu,$u,Hu];function am({contextId:e,store:t,registry:r,customSensors:n,enableDefaultSensors:a}){const s=[...a?om:[],...n||[]],i=h.useState(()=>ku())[0],l=F(function(b,k){Dt(b)&&!Dt(k)&&i.tryAbandon()},[i]);je(function(){let b=t.getState();return t.subscribe(()=>{const v=t.getState();l(b,v),b=v})},[i,t,l]),je(()=>i.tryAbandon,[i.tryAbandon]);const c=F(y=>La({lockAPI:i,registry:r,store:t,draggableId:y}),[i,r,t]),u=F((y,b,k)=>nm({lockAPI:i,registry:r,contextId:e,store:t,draggableId:y,forceSensorStop:b||null,sourceEvent:k&&k.sourceEvent?k.sourceEvent:null}),[e,i,r,t]),m=F(y=>em(e,y),[e]),d=F(y=>{const b=r.draggable.findById(y);return b?b.options:null},[r.draggable]),g=F(function(){i.isClaimed()&&(i.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(en()))},[i,t]),p=F(()=>i.isClaimed(),[i]),f=K(()=>({canGetLock:c,tryGetLock:u,findClosestDraggableId:m,findOptionsForDraggable:d,tryReleaseLock:g,isLockClaimed:p}),[c,u,m,d,g,p]);for(let y=0;y<s.length;y++)s[y](f)}const sm=e=>({onBeforeCapture:t=>{const r=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};go.flushSync(r)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),im=e=>({...jt,...e.autoScrollerOptions,durationDampening:{...jt.durationDampening,...e.autoScrollerOptions}});function ut(e){return e.current||M(),e.current}function lm(e){const{contextId:t,setCallbacks:r,sensors:n,nonce:a,dragHandleUsageInstructions:s}=e,i=h.useRef(null),l=Ia(e),c=F(()=>sm(l.current),[l]),u=F(()=>im(l.current),[l]),m=xu(t),d=wu({contextId:t,text:s}),g=uu(t,a),p=F(T=>{ut(i).dispatch(T)},[]),f=K(()=>In({publishWhileDragging:Qc,updateDroppableScroll:td,updateDroppableIsEnabled:rd,updateDroppableIsCombineEnabled:nd,collectionStarting:ed},p),[p]),y=hu(),b=K(()=>Wd(y,f),[y,f]),k=K(()=>su({scrollWindow:zd,scrollDroppable:b.scrollDroppable,getAutoScrollerOptions:u,...In({move:ha},p)}),[b.scrollDroppable,p,u]),v=gu(t),w=K(()=>Fd({announce:m,autoScroller:k,dimensionMarshal:b,focusMarshal:v,getResponders:c,styleMarshal:g}),[m,k,b,v,c,g]);i.current=w;const j=F(()=>{const T=ut(i);T.getState().phase!=="IDLE"&&T.dispatch(en())},[]),C=F(()=>{const T=ut(i).getState();return T.phase==="DROP_ANIMATING"?!0:T.phase==="IDLE"?!1:T.isDragging},[]),S=K(()=>({isDragging:C,tryAbort:j}),[C,j]);r(S);const D=F(T=>Sa(ut(i).getState(),T),[]),I=F(()=>Ye(ut(i).getState()),[]),E=K(()=>({marshal:b,focus:v,contextId:t,canLift:D,isMovementAllowed:I,dragHandleUsageInstructionsId:d,registry:y}),[t,b,d,v,D,I,y]);return am({contextId:t,store:w,registry:y,customSensors:n||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),h.useEffect(()=>j,[j]),oe.createElement(ir.Provider,{value:E},oe.createElement(Ml,{context:ln,store:w},e.children))}function cm(){return oe.useId()}function Ba(e){const t=cm(),r=e.dragHandleUsageInstructions||Lt.dragHandleUsageInstructions;return oe.createElement($l,null,n=>oe.createElement(lm,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const no={dragging:5e3,dropAnimating:4500},dm=(e,t)=>t?ht.drop(t.duration):e?ht.snap:ht.fluid,um=(e,t)=>{if(e)return t?St.opacity.drop:St.opacity.combining},mm=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function gm(e){const r=e.dimension.client,{offset:n,combineWith:a,dropping:s}=e,i=!!a,l=mm(e),c=!!s,u=c?Br.drop(n,i):Br.moveTo(n);return{position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:dm(l,s),transform:u,opacity:um(i,c),zIndex:c?no.dropAnimating:no.dragging,pointerEvents:"none"}}function pm(e){return{transform:Br.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function hm(e){return e.type==="DRAGGING"?gm(e):pm(e)}function fm(e,t,r=ce){const n=window.getComputedStyle(t),a=t.getBoundingClientRect(),s=Wo(a,n),i=zt(s,r),l={client:s,tagName:t.tagName.toLowerCase(),display:n.display},c={x:s.marginBox.width,y:s.marginBox.height};return{descriptor:e,placeholder:l,displaceBy:c,client:s,page:i}}function bm(e){const t=cn("draggable"),{descriptor:r,registry:n,getDraggableRef:a,canDragInteractiveElements:s,shouldRespectForcePress:i,isEnabled:l}=e,c=K(()=>({canDragInteractiveElements:s,shouldRespectForcePress:i,isEnabled:l}),[s,l,i]),u=F(p=>{const f=a();return f||M(),fm(r,f,p)},[r,a]),m=K(()=>({uniqueId:t,descriptor:r,options:c,getDimension:u}),[r,u,c,t]),d=h.useRef(m),g=h.useRef(!0);je(()=>(n.draggable.register(d.current),()=>n.draggable.unregister(d.current)),[n.draggable]),je(()=>{if(g.current){g.current=!1;return}const p=d.current;d.current=m,n.draggable.update(m,p)},[m,n.draggable])}var un=oe.createContext(null);function Jt(e){const t=h.useContext(e);return t||M(),t}function xm(e){e.preventDefault()}const ym=e=>{const t=h.useRef(null),r=F((S=null)=>{t.current=S},[]),n=F(()=>t.current,[]),{contextId:a,dragHandleUsageInstructionsId:s,registry:i}=Jt(ir),{type:l,droppableId:c}=Jt(un),u=K(()=>({id:e.draggableId,index:e.index,type:l,droppableId:c}),[e.draggableId,e.index,l,c]),{children:m,draggableId:d,isEnabled:g,shouldRespectForcePress:p,canDragInteractiveElements:f,isClone:y,mapped:b,dropAnimationFinished:k}=e;if(!y){const S=K(()=>({descriptor:u,registry:i,getDraggableRef:n,canDragInteractiveElements:f,shouldRespectForcePress:p,isEnabled:g}),[u,i,n,f,p,g]);bm(S)}const v=K(()=>g?{tabIndex:0,role:"button","aria-describedby":s,"data-rfd-drag-handle-draggable-id":d,"data-rfd-drag-handle-context-id":a,draggable:!1,onDragStart:xm}:null,[a,s,d,g]),w=F(S=>{b.type==="DRAGGING"&&b.dropping&&S.propertyName==="transform"&&go.flushSync(k)},[k,b]),j=K(()=>{const S=hm(b),D=b.type==="DRAGGING"&&b.dropping?w:void 0;return{innerRef:r,draggableProps:{"data-rfd-draggable-context-id":a,"data-rfd-draggable-id":d,style:S,onTransitionEnd:D},dragHandleProps:v}},[a,v,d,b,w,r]),C=K(()=>({draggableId:u.id,type:u.type,source:{index:u.index,droppableId:u.droppableId}}),[u.droppableId,u.id,u.index,u.type]);return oe.createElement(oe.Fragment,null,m(j,b.snapshot,C))};var _a=(e,t)=>e===t,Fa=e=>{const{combine:t,destination:r}=e;return r?r.droppableId:t?t.droppableId:null};const vm=e=>e.combine?e.combine.draggableId:null,wm=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function km(){const e=le((a,s)=>({x:a,y:s})),t=le((a,s,i=null,l=null,c=null)=>({isDragging:!0,isClone:s,isDropAnimating:!!c,dropAnimation:c,mode:a,draggingOver:i,combineWith:l,combineTargetFor:null})),r=le((a,s,i,l,c=null,u=null,m=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:u,mode:s,offset:a,dimension:i,forceShouldAnimate:m,snapshot:t(s,l,c,u,null)}}));return(a,s)=>{if(Dt(a)){if(a.critical.draggable.id!==s.draggableId)return null;const i=a.current.client.offset,l=a.dimensions.draggables[s.draggableId],c=Se(a.impact),u=wm(a.impact),m=a.forceShouldAnimate;return r(e(i.x,i.y),a.movementMode,l,s.isClone,c,u,m)}if(a.phase==="DROP_ANIMATING"){const i=a.completed;if(i.result.draggableId!==s.draggableId)return null;const l=s.isClone,c=a.dimensions.draggables[s.draggableId],u=i.result,m=u.mode,d=Fa(u),g=vm(u),f={duration:a.dropDuration,curve:rn.drop,moveTo:a.newHomeClientOffset,opacity:g?St.opacity.drop:null,scale:g?St.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:c,dropping:f,draggingOver:d,combineWith:g,mode:m,forceShouldAnimate:null,snapshot:t(m,l,d,g,f)}}}return null}}function $a(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const Nm={mapped:{type:"SECONDARY",offset:ce,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:$a(null)}};function Sm(){const e=le((i,l)=>({x:i,y:l})),t=le($a),r=le((i,l=null,c)=>({mapped:{type:"SECONDARY",offset:i,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:t(l)}})),n=i=>i?r(ce,i,!0):null,a=(i,l,c,u)=>{const m=c.displaced.visible[i],d=!!(u.inVirtualList&&u.effected[i]),g=nr(c),p=g&&g.draggableId===i?l:null;if(!m){if(!d)return n(p);if(c.displaced.invisible[i])return null;const b=st(u.displacedBy.point),k=e(b.x,b.y);return r(k,p,!0)}if(d)return n(p);const f=c.displacedBy.point,y=e(f.x,f.y);return r(y,p,m.shouldAnimate)};return(i,l)=>{if(Dt(i))return i.critical.draggable.id===l.draggableId?null:a(l.draggableId,i.critical.draggable.id,i.impact,i.afterCritical);if(i.phase==="DROP_ANIMATING"){const c=i.completed;return c.result.draggableId===l.draggableId?null:a(l.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null}}const jm=()=>{const e=km(),t=Sm();return(n,a)=>e(n,a)||t(n,a)||Nm},Dm={dropAnimationFinished:ba},Cm=Go(jm,Dm,null,{context:ln,areStatePropsEqual:_a})(ym);function Ua(e){return Jt(un).isUsingCloneFor===e.draggableId&&!e.isClone?null:oe.createElement(Cm,e)}function Xt(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,n=!!e.shouldRespectForcePress;return oe.createElement(Ua,Ht({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}const Ga=e=>t=>e===t,Em=Ga("scroll"),Tm=Ga("auto"),oo=(e,t)=>t(e.overflowX)||t(e.overflowY),Im=e=>{const t=window.getComputedStyle(e),r={overflowX:t.overflowX,overflowY:t.overflowY};return oo(r,Em)||oo(r,Tm)},Am=()=>!1,Wa=e=>e==null?null:e===document.body?Am()?e:null:e===document.documentElement?null:Im(e)?e:Wa(e.parentElement);var $r=e=>({x:e.scrollLeft,y:e.scrollTop});const za=e=>e?window.getComputedStyle(e).position==="fixed"?!0:za(e.parentElement):!1;var Pm=e=>{const t=Wa(e),r=za(e);return{closestScrollable:t,isFixedOnPage:r}},Mm=({descriptor:e,isEnabled:t,isCombineEnabled:r,isFixedOnPage:n,direction:a,client:s,page:i,closest:l})=>{const c=(()=>{if(!l)return null;const{scrollSize:g,client:p}=l,f=wa({scrollHeight:g.scrollHeight,scrollWidth:g.scrollWidth,height:p.paddingBox.height,width:p.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:p,scrollSize:g,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:f,diff:{value:ce,displacement:ce}}}})(),u=a==="vertical"?Kr:ea,m=rt({page:i,withPlaceholder:null,axis:u,frame:c});return{descriptor:e,isCombineEnabled:r,isFixedOnPage:n,axis:u,isEnabled:t,client:s,page:i,frame:c,subject:m}};const Rm=(e,t)=>{const r=zo(e);if(!t||e!==t)return r;const n=r.paddingBox.top-t.scrollTop,a=r.paddingBox.left-t.scrollLeft,s=n+t.scrollHeight,i=a+t.scrollWidth,c=Hr({top:n,right:i,bottom:s,left:a},r.border);return Vr({borderBox:c,margin:r.margin,border:r.border,padding:r.padding})};var Om=({ref:e,descriptor:t,env:r,windowScroll:n,direction:a,isDropDisabled:s,isCombineEnabled:i,shouldClipSubject:l})=>{const c=r.closestScrollable,u=Rm(e,c),m=zt(u,n),d=(()=>{if(!c)return null;const p=zo(c),f={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:p,page:zt(p,n),scroll:$r(c),scrollSize:f,shouldClipSubject:l}})();return Mm({descriptor:t,isEnabled:!s,isCombineEnabled:i,isFixedOnPage:r.isFixedOnPage,direction:a,client:u,page:m,closest:d})};const Lm={passive:!1},Bm={passive:!0};var ao=e=>e.shouldPublishImmediately?Lm:Bm;const Rt=e=>e&&e.env.closestScrollable||null;function _m(e){const t=h.useRef(null),r=Jt(ir),n=cn("droppable"),{registry:a,marshal:s}=r,i=Ia(e),l=K(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),c=h.useRef(l),u=K(()=>le((j,C)=>{t.current||M();const S={x:j,y:C};s.updateDroppableScroll(l.id,S)}),[l.id,s]),m=F(()=>{const j=t.current;return!j||!j.env.closestScrollable?ce:$r(j.env.closestScrollable)},[]),d=F(()=>{const j=m();u(j.x,j.y)},[m,u]),g=K(()=>vt(d),[d]),p=F(()=>{const j=t.current,C=Rt(j);if(j&&C||M(),j.scrollOptions.shouldPublishImmediately){d();return}g()},[g,d]),f=F((j,C)=>{t.current&&M();const S=i.current,D=S.getDroppableRef();D||M();const I=Pm(D),E={ref:D,descriptor:l,env:I,scrollOptions:C};t.current=E;const T=Om({ref:D,descriptor:l,env:I,windowScroll:j,direction:S.direction,isDropDisabled:S.isDropDisabled,isCombineEnabled:S.isCombineEnabled,shouldClipSubject:!S.ignoreContainerClipping}),B=I.closestScrollable;return B&&(B.setAttribute(Qn.contextId,r.contextId),B.addEventListener("scroll",p,ao(E.scrollOptions))),T},[r.contextId,l,p,i]),y=F(()=>{const j=t.current,C=Rt(j);return j&&C||M(),$r(C)},[]),b=F(()=>{const j=t.current;j||M();const C=Rt(j);t.current=null,C&&(g.cancel(),C.removeAttribute(Qn.contextId),C.removeEventListener("scroll",p,ao(j.scrollOptions)))},[p,g]),k=F(j=>{const C=t.current;C||M();const S=Rt(C);S||M(),S.scrollTop+=j.y,S.scrollLeft+=j.x},[]),v=K(()=>({getDimensionAndWatchScroll:f,getScrollWhileDragging:y,dragStopped:b,scroll:k}),[b,f,y,k]),w=K(()=>({uniqueId:n,descriptor:l,callbacks:v}),[v,l,n]);je(()=>(c.current=w.descriptor,a.droppable.register(w),()=>{t.current&&b(),a.droppable.unregister(w)}),[v,l,b,w,s,a.droppable]),je(()=>{t.current&&s.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,s]),je(()=>{t.current&&s.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,s])}function Nr(){}const so={width:0,height:0,margin:Yl},Fm=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>e||r==="close"?so:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},$m=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>{const n=Fm({isAnimatingOpenOnMount:e,placeholder:t,animate:r});return{display:t.display,boxSizing:"border-box",width:n.width,height:n.height,marginTop:n.margin.top,marginRight:n.margin.right,marginBottom:n.margin.bottom,marginLeft:n.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:r!=="none"?ht.placeholder:null}},Um=e=>{const t=h.useRef(null),r=F(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:n,onTransitionEnd:a,onClose:s,contextId:i}=e,[l,c]=h.useState(e.animate==="open");h.useEffect(()=>l?n!=="open"?(r(),c(!1),Nr):t.current?Nr:(t.current=setTimeout(()=>{t.current=null,c(!1)}),r):Nr,[n,l,r]);const u=F(d=>{d.propertyName==="height"&&(a(),n==="close"&&s())},[n,s,a]),m=$m({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return oe.createElement(e.placeholder.tagName,{style:m,"data-rfd-placeholder-context-id":i,onTransitionEnd:u,ref:e.innerRef})};var Gm=oe.memo(Um);class Wm extends oe.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,r){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:r.isVisible?{isVisible:!0,data:r.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const zm=e=>{const t=h.useContext(ir);t||M();const{contextId:r,isMovementAllowed:n}=t,a=h.useRef(null),s=h.useRef(null),{children:i,droppableId:l,type:c,mode:u,direction:m,ignoreContainerClipping:d,isDropDisabled:g,isCombineEnabled:p,snapshot:f,useClone:y,updateViewportMaxScroll:b,getContainerForClone:k}=e,v=F(()=>a.current,[]),w=F((B=null)=>{a.current=B},[]);F(()=>s.current,[]);const j=F((B=null)=>{s.current=B},[]),C=F(()=>{n()&&b({maxScroll:Na()})},[n,b]);_m({droppableId:l,type:c,mode:u,direction:m,isDropDisabled:g,isCombineEnabled:p,ignoreContainerClipping:d,getDroppableRef:v});const S=K(()=>oe.createElement(Wm,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:B,data:Y,animate:V})=>oe.createElement(Gm,{placeholder:Y,onClose:B,innerRef:j,animate:V,contextId:r,onTransitionEnd:C})),[r,C,e.placeholder,e.shouldAnimatePlaceholder,j]),D=K(()=>({innerRef:w,placeholder:S,droppableProps:{"data-rfd-droppable-id":l,"data-rfd-droppable-context-id":r}}),[r,l,S,w]),I=y?y.dragging.draggableId:null,E=K(()=>({droppableId:l,type:c,isUsingCloneFor:I}),[l,I,c]);function T(){if(!y)return null;const{dragging:B,render:Y}=y,V=oe.createElement(Ua,{draggableId:B.draggableId,index:B.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(de,ne)=>Y(de,ne,B));return Ka.createPortal(V,k())}return oe.createElement(un.Provider,{value:E},i(D,f),T())};function Hm(){return document.body||M(),document.body}const io={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Hm},Ha=e=>{let t={...e},r;for(r in io)e[r]===void 0&&(t={...t,[r]:io[r]});return t},Sr=(e,t)=>e===t.droppable.type,lo=(e,t)=>t.draggables[e.draggable.id],Vm=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},r=le(s=>({draggableId:s.id,type:s.type,source:{index:s.index,droppableId:s.droppableId}})),n=le((s,i,l,c,u,m)=>{const d=u.descriptor.id;if(u.descriptor.droppableId===s){const f=m?{render:m,dragging:r(u.descriptor)}:null,y={isDraggingOver:l,draggingOverWith:l?d:null,draggingFromThisWith:d,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!1,snapshot:y,useClone:f}}if(!i)return t;if(!c)return e;const p={isDraggingOver:l,draggingOverWith:d,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!0,snapshot:p,useClone:null}});return(s,i)=>{const l=Ha(i),c=l.droppableId,u=l.type,m=!l.isDropDisabled,d=l.renderClone;if(Dt(s)){const g=s.critical;if(!Sr(u,g))return t;const p=lo(g,s.dimensions),f=Se(s.impact)===c;return n(c,m,f,f,p,d)}if(s.phase==="DROP_ANIMATING"){const g=s.completed;if(!Sr(u,g.critical))return t;const p=lo(g.critical,s.dimensions);return n(c,m,Fa(g.result)===c,Se(g.impact)===c,p,d)}if(s.phase==="IDLE"&&s.completed&&!s.shouldFlush){const g=s.completed;if(!Sr(u,g.critical))return t;const p=Se(g.impact)===c,f=!!(g.impact.at&&g.impact.at.type==="COMBINE"),y=g.critical.droppable.id===c;return p?f?e:t:y?e:t}return t}},Ym={updateViewportMaxScroll:ad},ft=Go(Vm,Ym,(e,t,r)=>({...Ha(r),...e,...t}),{context:ln,areStatePropsEqual:_a})(zm),Va=h.createContext(null);function mn(){const e=h.useContext(Va);if(!e)throw new Error("useLockdown must be used within a LockdownProvider");return e}function qm({children:e}){const[t,r]=h.useState(null),[n,a]=h.useState(!0),[s,i]=h.useState(!1),[l,c]=h.useState(null),u=h.useCallback(async()=>{try{const f=await chrome.runtime.sendMessage({type:"LOCKDOWN_GET_STATUS"});r(f)}catch(f){console.error("Failed to get lockdown status:",f)}},[]);h.useEffect(()=>{u().finally(()=>a(!1))},[u]);const m=h.useCallback(async f=>{try{const y=await chrome.runtime.sendMessage({type:"LOCKDOWN_AUTHENTICATE",payload:{password:f}});return y.success&&await u(),y}catch(y){return console.error("Failed to authenticate:",y),{success:!1,error:"Authentication failed"}}},[u]),d=h.useCallback(async()=>{try{await chrome.runtime.sendMessage({type:"LOCKDOWN_CLEAR_SESSION"}),await u()}catch(f){console.error("Failed to clear session:",f)}},[u]),g=h.useCallback(async f=>{if(!(t!=null&&t.lockdownEnabled)){await f();return}if(t.sessionValid){await f();return}c(()=>f),i(!0)},[t]),p={status:t,loading:n,refreshStatus:u,authenticate:m,clearSession:d,showPasswordModal:s,setShowPasswordModal:i,pendingAction:l,withLockdownCheck:g};return o.jsx(Va.Provider,{value:p,children:e})}const Km=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function Jm(e){let t=e.trim().toLowerCase();t=t.replace(/^https?:\/\//,"");const r=t.indexOf("/");if(r!==-1){const n=t.slice(r+1);!n||!n.trim()?t=t.slice(0,r):(t=t.replace(/\/+$/,""),t.endsWith("/*")||(t=t+"/*"))}return t}const co={pattern:"",unlockType:"none",password:"",timerDuration:30,scheduleDays:[1,2,3,4,5],scheduleStart:"09:00",scheduleEnd:"17:00",folderId:void 0};function Xm(){var U;const[e,t]=h.useState([]),[r,n]=h.useState([]),[a,s]=h.useState(!0),[i,l]=h.useState(!1),[c,u]=h.useState(!1),[m,d]=h.useState(null),[g,p]=h.useState(null),[f,y]=h.useState(co),[b,k]=h.useState(""),[v,w]=h.useState({}),[j,C]=h.useState({}),[S,D]=h.useState(!1),[I,E]=h.useState(null),[T,B]=h.useState(30),{withLockdownCheck:Y}=mn();h.useEffect(()=>{V()},[]),h.useEffect(()=>{const x=e.filter(W=>W.unlockType==="timer");if(x.length===0)return;const N=async()=>{const W={};for(const z of x)try{const q=await chrome.runtime.sendMessage({type:"GET_TIMER_STATUS",payload:{id:z.id}});q!=null&&q.found&&(W[z.id]={isActive:q.isActive,blockedUntil:q.blockedUntil,remainingMs:q.remainingMs})}catch{}w(W)};N();const A=setInterval(N,1e3);return()=>clearInterval(A)},[e]),h.useEffect(()=>{if(r.length===0)return;const x=async()=>{const A={};for(const W of r)try{const z=await chrome.runtime.sendMessage({type:"GET_FOCUS_STATUS",payload:{folderId:W.id}});z!=null&&z.found&&(A[W.id]={isActive:z.isActive,focusUntil:z.focusUntil,remainingMs:z.remainingMs,focusDuration:z.focusDuration})}catch{}C(A)};x();const N=setInterval(x,1e3);return()=>clearInterval(N)},[r]);async function V(){try{const[x,N]=await Promise.all([chrome.runtime.sendMessage({type:"GET_BLOCKED_SITES"}),chrome.runtime.sendMessage({type:"GET_BLOCKED_SITE_FOLDERS"})]);t(x),n(N)}catch(x){console.error("Failed to load data:",x)}finally{s(!1)}}function de(){d(null),y(co),l(!0)}function ne(x){var N,A,W;d(x),y({pattern:x.pattern,unlockType:x.unlockType,password:"",timerDuration:x.timerDuration||30,scheduleDays:((N=x.schedule)==null?void 0:N.days)||[1,2,3,4,5],scheduleStart:((A=x.schedule)==null?void 0:A.startTime)||"09:00",scheduleEnd:((W=x.schedule)==null?void 0:W.endTime)||"17:00",folderId:x.folderId}),l(!0)}function Ae(){p(null),k(""),u(!0)}function fe(x){p(x),k(x.name),u(!0)}async function be(x){x.preventDefault();const N={pattern:Jm(f.pattern),enabled:!0,unlockType:f.unlockType,folderId:f.folderId};f.unlockType==="password"&&f.password&&(N.passwordHash=await po(f.password)),f.unlockType==="timer"&&(N.timerDuration=f.timerDuration),f.unlockType==="schedule"&&(N.schedule={days:f.scheduleDays,startTime:f.scheduleStart,endTime:f.scheduleEnd});try{m?await chrome.runtime.sendMessage({type:"UPDATE_BLOCKED_SITE",payload:{...m,...N}}):await chrome.runtime.sendMessage({type:"ADD_BLOCKED_SITE",payload:N}),await V(),l(!1)}catch(A){console.error("Failed to save site:",A)}}async function Oe(x){if(x.preventDefault(),!!b.trim())try{g?await chrome.runtime.sendMessage({type:"UPDATE_BLOCKED_SITE_FOLDER",payload:{...g,name:b.trim()}}):await chrome.runtime.sendMessage({type:"ADD_BLOCKED_SITE_FOLDER",payload:{name:b.trim(),order:r.length}}),await V(),u(!1)}catch(N){console.error("Failed to save folder:",N)}}async function Pe(x){await Y(async()=>{if(confirm("Delete this folder? Sites in this folder will be moved to Uncategorized."))try{await chrome.runtime.sendMessage({type:"REMOVE_BLOCKED_SITE_FOLDER",payload:{id:x}}),await V()}catch(N){console.error("Failed to delete folder:",N)}})}async function ve(x){const N={...x,collapsed:!x.collapsed};n(r.map(A=>A.id===x.id?N:A)),await chrome.runtime.sendMessage({type:"UPDATE_BLOCKED_SITE_FOLDER",payload:N})}async function Te(x,N){const A=async()=>{const W=e.filter(J=>J.folderId===x),z=W.filter(J=>J.unlockType!=="timer");if(z.length>0){const J=z.map(ee=>({...ee,enabled:N})),Q=[...e.filter(ee=>ee.folderId!==x||ee.unlockType==="timer"),...J];t(Q),await chrome.runtime.sendMessage({type:"UPDATE_BLOCKED_SITES",payload:Q})}const q=W.filter(J=>J.unlockType==="timer");if(q.length>0)if(N){const J=q.filter(ee=>{var H;return!((H=v[ee.id])!=null&&H.isActive)}),me=await Promise.all(J.map(ee=>chrome.runtime.sendMessage({type:"START_TIMER_BLOCK",payload:{id:ee.id}}).then(H=>({site:ee,result:H})))),Q={};for(const{site:ee,result:H}of me)H!=null&&H.success&&H.blockedUntil&&(Q[ee.id]={isActive:!0,blockedUntil:H.blockedUntil,remainingMs:H.blockedUntil-Date.now()});Object.keys(Q).length>0&&w(ee=>({...ee,...Q}))}else{await Promise.all(q.map(me=>chrome.runtime.sendMessage({type:"CLEAR_TIMER_BLOCK",payload:{id:me.id}})));const J={};for(const me of q)J[me.id]={isActive:!1,blockedUntil:void 0,remainingMs:0};w(me=>({...me,...J}))}};N?await A():await Y(A)}async function we(x){const N=async()=>{try{await chrome.runtime.sendMessage({type:"UPDATE_BLOCKED_SITE",payload:{...x,enabled:!x.enabled}}),await V()}catch(A){console.error("Failed to toggle site:",A)}};x.enabled?await Y(N):await N()}async function Le(x){await Y(async()=>{if(confirm("Are you sure you want to remove this blocked site?"))try{await chrome.runtime.sendMessage({type:"REMOVE_BLOCKED_SITE",payload:{id:x}}),await V()}catch(N){console.error("Failed to delete site:",N)}})}async function ie(x){try{const N=await chrome.runtime.sendMessage({type:"START_TIMER_BLOCK",payload:{id:x}});N!=null&&N.success&&N.blockedUntil&&w(A=>({...A,[x]:{isActive:!0,blockedUntil:N.blockedUntil,remainingMs:N.blockedUntil-Date.now()}}))}catch(N){console.error("Failed to start timer:",N)}}async function ke(x){await Y(async()=>{try{await chrome.runtime.sendMessage({type:"CLEAR_TIMER_BLOCK",payload:{id:x}}),w(N=>({...N,[x]:{isActive:!1,blockedUntil:void 0,remainingMs:0}}))}catch(N){console.error("Failed to clear timer:",N)}})}function P(x){const N=Math.ceil(x/1e3),A=Math.floor(N/3600),W=Math.floor(N%3600/60),z=N%60;return A>0?`${A}h ${W}m`:W>0?`${W}m ${z}s`:`${z}s`}function R(x){const N=r.find(A=>A.id===x);E(x),B((N==null?void 0:N.focusDuration)||30),D(!0)}async function O(){if(I)try{const x=await chrome.runtime.sendMessage({type:"START_FOCUS_SESSION",payload:{folderId:I,durationMinutes:T}});x!=null&&x.success&&x.focusUntil&&C(N=>({...N,[I]:{isActive:!0,focusUntil:x.focusUntil,remainingMs:x.focusUntil-Date.now(),focusDuration:T}})),D(!1)}catch(x){console.error("Failed to start focus session:",x)}}async function $(x){await Y(async()=>{try{await chrome.runtime.sendMessage({type:"STOP_FOCUS_SESSION",payload:{folderId:x}}),C(N=>({...N,[x]:{isActive:!1,focusUntil:void 0,remainingMs:0}}))}catch(N){console.error("Failed to stop focus session:",N)}})}async function te(x){if(!x.destination)return;const{source:N,destination:A,type:W}=x;if(W==="folder"){if(N.index===A.index)return;const Q=Array.from(r),[ee]=Q.splice(N.index,1);Q.splice(A.index,0,ee);const H=Q.map((re,xe)=>({...re,order:xe}));n(H),await chrome.runtime.sendMessage({type:"UPDATE_BLOCKED_SITE_FOLDERS",payload:H});return}const z=N.droppableId==="uncategorized"?void 0:N.droppableId,q=A.droppableId==="uncategorized"?void 0:A.droppableId,J=e.filter(Q=>Q.folderId===z).sort((Q,ee)=>(Q.order??0)-(ee.order??0)),me=J[N.index];if(me)if(N.droppableId===A.droppableId){if(N.index===A.index)return;const Q=Array.from(J),[ee]=Q.splice(N.index,1);Q.splice(A.index,0,ee);const H=e.map(re=>{if(re.folderId!==z)return re;const xe=Q.findIndex(cr=>cr.id===re.id);return{...re,order:xe}});t(H),await chrome.runtime.sendMessage({type:"UPDATE_BLOCKED_SITES",payload:H})}else{const Q=e.filter(H=>H.folderId===q).sort((H,re)=>(H.order??0)-(re.order??0)),ee=e.map(H=>{if(H.id===me.id)return{...H,folderId:q,order:A.index};if(H.folderId===z){const re=J.findIndex(xe=>xe.id===H.id);if(re>N.index)return{...H,order:re-1}}if(H.folderId===q){const re=Q.findIndex(xe=>xe.id===H.id);if(re>=A.index)return{...H,order:re+1}}return H});t(ee),await chrome.runtime.sendMessage({type:"UPDATE_BLOCKED_SITES",payload:ee})}}const G=new Map;r.forEach(x=>G.set(x.id,[])),G.set(void 0,[]),e.forEach(x=>{const N=x.folderId,A=G.get(N)||[];A.push(x),G.set(N,A)});for(const[,x]of G)x.sort((N,A)=>(N.order??0)-(A.order??0));function se(x){switch(x){case"password":return o.jsx(_t,{className:"w-4 h-4"});case"timer":return o.jsx(Bt,{className:"w-4 h-4"});case"schedule":return o.jsx(Cr,{className:"w-4 h-4"});default:return o.jsx(Qe,{className:"w-4 h-4"})}}function Me(x){switch(x.unlockType){case"password":return"Password protected";case"timer":return`${x.timerDuration}min block`;case"schedule":return"Scheduled";default:return"Always blocked"}}if(a)return o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});const L=(x,N)=>{const A=v[x.id],W=x.unlockType==="timer"&&(A==null?void 0:A.isActive);return o.jsx(Xt,{draggableId:x.id,index:N,children:z=>o.jsxs("div",{ref:z.innerRef,...z.draggableProps,className:"flex items-center gap-3 px-4 py-3 bg-white dark:bg-gray-800 border-b border-gray-100 dark:border-gray-700 last:border-b-0 hover:bg-gray-50 dark:hover:bg-gray-700/50",children:[o.jsx("div",{...z.dragHandleProps,className:"text-gray-300 dark:text-gray-600 hover:text-gray-500 dark:hover:text-gray-400 cursor-grab",children:o.jsx(Ft,{className:"w-4 h-4"})}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:x.pattern})}),W&&A&&o.jsx("span",{className:"text-xs text-red-600 dark:text-red-400 font-medium",children:P(A.remainingMs)}),o.jsxs("div",{className:"flex items-center gap-2 text-gray-500 dark:text-gray-400 text-sm",children:[se(x.unlockType),o.jsx("span",{className:"hidden sm:inline",children:Me(x)})]}),x.unlockType==="timer"?W?o.jsx("button",{onClick:()=>ke(x.id),className:"text-xs py-1 rounded-full bg-red-100 dark:bg-red-700/80 text-red-700 dark:text-red-200 hover:bg-red-200 dark:hover:bg-red-700 transition-colors w-[72px]",children:"Stop"}):o.jsx("button",{onClick:()=>ie(x.id),className:"text-xs py-1 rounded-full bg-gray-100 dark:bg-gray-600/80 text-gray-500 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors w-[72px]",children:"Disabled"}):o.jsx("button",{onClick:()=>we(x),className:`text-xs py-1 rounded-full transition-colors w-[72px] ${x.enabled?"bg-red-100 dark:bg-red-700/80 text-red-700 dark:text-red-200 hover:bg-red-200 dark:hover:bg-red-700":"bg-gray-100 dark:bg-gray-600/80 text-gray-500 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:x.enabled?"Blocking":"Disabled"}),o.jsx("button",{onClick:()=>ne(x),className:"p-1.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:o.jsx(Er,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>Le(x.id),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded",children:o.jsx(bt,{className:"w-4 h-4"})})]})},x.id)},_=(x,N,A)=>{const W=x==null?void 0:x.id,z=x==null?void 0:x.collapsed,q=re=>{var xe;return re.unlockType==="timer"?(xe=v[re.id])==null?void 0:xe.isActive:re.enabled},J=N.length>0&&N.every(q),me=N.some(q),Q=W?j[W]:null,ee=Q==null?void 0:Q.isActive,H=re=>o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[o.jsxs("div",{className:`flex items-center gap-2 px-4 py-3 bg-gray-100 dark:bg-gray-700 ${z?"":"border-b border-gray-200 dark:border-gray-600"}`,children:[x&&o.jsx("div",{...re,className:"text-gray-300 dark:text-gray-600 hover:text-gray-500 dark:hover:text-gray-400 cursor-grab",children:o.jsx(Ft,{className:"w-4 h-4"})}),o.jsxs("div",{className:`flex items-center gap-2 flex-1 ${x?"cursor-pointer":""}`,onClick:()=>x&&ve(x),children:[x&&o.jsx("span",{className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 transition-transform duration-200",children:o.jsx(mt,{className:`w-5 h-5 transition-transform duration-200 ${z?"":"rotate-90"}`})}),o.jsxs("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:[(x==null?void 0:x.name)||"Uncategorized"," (",N.length,")"]})]}),x&&N.length>0&&(ee&&Q?o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xs text-purple-600 dark:text-purple-400 font-medium",children:P(Q.remainingMs)}),o.jsxs("button",{onClick:()=>$(x.id),className:"text-xs py-1 rounded bg-purple-100 dark:bg-purple-700/80 text-purple-700 dark:text-purple-200 hover:bg-purple-200 dark:hover:bg-purple-700 transition-colors w-[72px] flex items-center justify-center gap-1",children:[o.jsx(ur,{className:"w-3 h-3"}),"Stop"]})]}):o.jsxs("button",{onClick:()=>R(x.id),className:"text-xs py-1 rounded bg-purple-100 dark:bg-purple-700/80 text-purple-700 dark:text-purple-200 hover:bg-purple-200 dark:hover:bg-purple-700 transition-colors w-[72px] flex items-center justify-center gap-1",children:[o.jsx(ur,{className:"w-3 h-3"}),"Focus"]})),N.length>0&&o.jsx("button",{onClick:()=>Te(W,!J),className:`text-xs py-1 rounded transition-colors w-[82px] ${J?"bg-red-100 dark:bg-red-700/80 text-red-700 dark:text-red-200 hover:bg-red-200 dark:hover:bg-red-700":me?"bg-yellow-100 dark:bg-yellow-600/80 text-yellow-700 dark:text-yellow-200 hover:bg-yellow-200 dark:hover:bg-yellow-600":"bg-gray-100 dark:bg-gray-600/80 text-gray-500 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:J?"Disable All":"Enable All"}),x&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>fe(x),className:"p-1.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:o.jsx(Er,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>Pe(x.id),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded",children:o.jsx(bt,{className:"w-4 h-4"})})]})]}),o.jsx("div",{className:"grid transition-all duration-200 ease-in-out",style:{gridTemplateRows:!x||!z?"1fr":"0fr"},children:o.jsx("div",{className:"overflow-hidden",children:o.jsx(ft,{droppableId:W||"uncategorized",type:"site",isDropDisabled:!!z,children:xe=>o.jsxs("div",{ref:xe.innerRef,...xe.droppableProps,className:"min-h-[48px]",children:[N.length>0?N.map((cr,Ya)=>L(cr,Ya)):o.jsx("div",{className:"px-4 py-6 text-center text-gray-400 dark:text-gray-500 text-sm",children:"Drag sites here or add new ones"}),xe.placeholder]})})})})]});return x?o.jsx(Xt,{draggableId:`folder-${x.id}`,index:A,children:re=>o.jsx("div",{ref:re.innerRef,...re.draggableProps,children:H(re.dragHandleProps||void 0)})},x.id):o.jsx("div",{children:H()},"uncategorized")};return o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Blocked Sites"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:Ae,className:"flex items-center gap-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:[o.jsx(cs,{className:"w-5 h-5"}),"Add Folder"]}),o.jsxs("button",{onClick:de,className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:[o.jsx(qe,{className:"w-5 h-5"}),"Add Site"]})]})]}),o.jsx(Ba,{onDragEnd:te,children:o.jsx(ft,{droppableId:"folders",type:"folder",children:x=>o.jsxs("div",{ref:x.innerRef,...x.droppableProps,className:"space-y-4",children:[r.map((N,A)=>_(N,G.get(N.id)||[],A)),x.placeholder,_(null,G.get(void 0)||[],r.length)]})})}),e.length===0&&r.length===0&&o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-12 text-center mt-4",children:[o.jsx(Qe,{className:"w-12 h-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No blocked sites"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Add sites you want to block to help stay focused."}),o.jsxs("button",{onClick:de,className:"inline-flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:[o.jsx(qe,{className:"w-5 h-5"}),"Add Your First Site"]})]}),i&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl w-full max-w-lg mx-4 overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b dark:border-gray-700",children:[o.jsx("h2",{className:"text-lg font-semibold",children:m?"Edit Blocked Site":"Add Blocked Site"}),o.jsx("button",{onClick:()=>l(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:o.jsx(et,{className:"w-5 h-5"})})]}),o.jsxs("form",{onSubmit:be,className:"p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Site Pattern"}),o.jsx("input",{type:"text",value:f.pattern,onChange:x=>y({...f,pattern:x.target.value}),placeholder:"e.g., twitter.com or *.reddit.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Use *.domain.com to block all subdomains"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Unlock Method"}),o.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{value:"none",label:"Always Blocked",icon:Qe},{value:"password",label:"Password",icon:_t},{value:"timer",label:"Timer",icon:Bt},{value:"schedule",label:"Schedule",icon:Cr}].map(({value:x,label:N,icon:A})=>o.jsxs("button",{type:"button",onClick:()=>y({...f,unlockType:x}),className:`flex items-center gap-2 p-3 border rounded-lg transition-colors ${f.unlockType===x?"border-blue-500 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[o.jsx(A,{className:"w-5 h-5"}),o.jsx("span",{className:"text-sm font-medium",children:N})]},x))})]}),f.unlockType==="password"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Unlock Password"}),o.jsx("input",{type:"password",value:f.password,onChange:x=>y({...f,password:x.target.value}),placeholder:m?"Leave blank to keep current":"Enter password",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!m})]}),f.unlockType==="timer"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Block Duration (minutes)"}),o.jsx("input",{type:"number",value:f.timerDuration||"",onChange:x=>{const N=x.target.value;y({...f,timerDuration:N===""?0:parseInt(N)||0})},onBlur:x=>{const N=parseInt(x.target.value);(!N||N<1)&&y({...f,timerDuration:30})},min:1,max:480,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Enable timer to block site for this duration"})]}),f.unlockType==="schedule"&&o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Block on these days"}),o.jsx("div",{className:"flex gap-1",children:Km.map((x,N)=>o.jsx("button",{type:"button",onClick:()=>{const A=f.scheduleDays.includes(N)?f.scheduleDays.filter(W=>W!==N):[...f.scheduleDays,N];y({...f,scheduleDays:A})},className:`flex-1 py-2 text-xs font-medium rounded transition-colors ${f.scheduleDays.includes(N)?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:x},x))})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Start Time"}),o.jsx("input",{type:"time",value:f.scheduleStart,onChange:x=>y({...f,scheduleStart:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"End Time"}),o.jsx("input",{type:"time",value:f.scheduleEnd,onChange:x=>y({...f,scheduleEnd:x.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]})]}),r.length>0&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Folder"}),o.jsxs("select",{value:f.folderId||"",onChange:x=>y({...f,folderId:x.target.value||void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[o.jsx("option",{value:"",children:"Uncategorized"}),r.map(x=>o.jsx("option",{value:x.id,children:x.name},x.id))]})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:()=>l(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:m?"Save Changes":"Add Site"})]})]})]})}),c&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl w-full max-w-md mx-4 overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b dark:border-gray-700",children:[o.jsx("h2",{className:"text-lg font-semibold",children:g?"Edit Folder":"Add Folder"}),o.jsx("button",{onClick:()=>u(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:o.jsx(et,{className:"w-5 h-5"})})]}),o.jsxs("form",{onSubmit:Oe,className:"p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Folder Name"}),o.jsx("input",{type:"text",value:b,onChange:x=>k(x.target.value),placeholder:"e.g., Social Media, Shopping",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,autoFocus:!0})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:()=>u(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:g?"Save Changes":"Add Folder"})]})]})]})}),S&&I&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl w-full max-w-sm mx-4 overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b dark:border-gray-700",children:[o.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[o.jsx(ur,{className:"w-5 h-5 text-purple-600"}),"Start Focus Session"]}),o.jsx("button",{onClick:()=>D(!1),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:o.jsx(et,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:['Block all sites in "',(U=r.find(x=>x.id===I))==null?void 0:U.name,'" for:']}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Duration (minutes)"}),o.jsx("input",{type:"number",value:T||"",onChange:x=>{const N=x.target.value;B(N===""?0:parseInt(N)||0)},onBlur:()=>{(!T||T<1)&&B(30)},min:1,max:480,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",autoFocus:!0})]}),o.jsx("div",{className:"flex gap-2",children:[15,30,60,120].map(x=>o.jsx("button",{type:"button",onClick:()=>B(x),className:`flex-1 py-1.5 text-sm rounded-lg transition-colors ${T===x?"bg-purple-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:x>=60?`${x/60}h`:`${x}m`},x))}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:()=>D(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),o.jsx("button",{onClick:O,className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:"Start Focus"})]})]})]})})]})}function jr(e){const t=Math.floor(e/3600),r=Math.floor(e%3600/60);return t>0?`${t}h ${r}m`:`${r}m`}function Zm(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}const uo={pattern:"",limitHours:0,limitMinutes:30,bypassType:"cooldown",password:"",cooldownSeconds:30};function Qm(){const[e,t]=h.useState([]),[r,n]=h.useState(null),[a,s]=h.useState(!0),[i,l]=h.useState(!1),[c,u]=h.useState(null),[m,d]=h.useState(uo),[g,p]=h.useState(null),{withLockdownCheck:f}=mn(),y=Zm(new Date);h.useEffect(()=>{b()},[]);async function b(){try{const[D,I]=await Promise.all([chrome.runtime.sendMessage({type:"GET_DAILY_LIMITS"}),chrome.runtime.sendMessage({type:"GET_STATS",payload:{date:y}})]);t(D||[]),n(I)}catch(D){console.error("Failed to load limits:",D)}finally{s(!1)}}function k(){u(null),d(uo),p(null),l(!0)}function v(D){u(D),d({pattern:D.pattern,limitHours:Math.floor(D.limitSeconds/3600),limitMinutes:Math.floor(D.limitSeconds%3600/60),bypassType:D.bypassType,password:"",cooldownSeconds:D.cooldownSeconds||30}),p(null),l(!0)}async function w(){if(!m.pattern.trim()){p("Domain is required");return}const D=m.limitHours*3600+m.limitMinutes*60;if(D<60){p("Limit must be at least 1 minute");return}if(m.bypassType==="password"&&!m.password&&!c){p("Password is required for password bypass");return}try{let I;m.bypassType==="password"&&m.password?I=await po(m.password):c!=null&&c.passwordHash&&m.bypassType==="password"&&(I=c.passwordHash),c?await chrome.runtime.sendMessage({type:"UPDATE_DAILY_LIMIT",payload:{...c,pattern:m.pattern.trim().toLowerCase(),limitSeconds:D,bypassType:m.bypassType,passwordHash:I,cooldownSeconds:m.bypassType==="cooldown"?m.cooldownSeconds:void 0}}):await chrome.runtime.sendMessage({type:"ADD_DAILY_LIMIT",payload:{pattern:m.pattern.trim().toLowerCase(),limitSeconds:D,enabled:!0,bypassType:m.bypassType,passwordHash:I,cooldownSeconds:m.bypassType==="cooldown"?m.cooldownSeconds:void 0}}),l(!1),b()}catch{p("Failed to save limit")}}async function j(D){await f(async()=>{if(confirm("Are you sure you want to delete this limit?"))try{await chrome.runtime.sendMessage({type:"REMOVE_DAILY_LIMIT",payload:{id:D}}),b()}catch(I){console.error("Failed to delete limit:",I)}})}async function C(D){const I=async()=>{try{await chrome.runtime.sendMessage({type:"UPDATE_DAILY_LIMIT",payload:{...D,enabled:!D.enabled}}),b()}catch(E){console.error("Failed to toggle limit:",E)}};D.enabled?await f(I):await I()}function S(D){if(!(r!=null&&r.sites))return 0;const I=D.replace(/^www\./,"");return r.sites[I]||r.sites["www."+I]||r.sites[D]||0}return a?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Daily Limits"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Set maximum daily time for specific sites"})]}),o.jsxs("button",{onClick:k,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[o.jsx(qe,{className:"w-5 h-5"}),"Add Limit"]})]}),e.length===0?o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-12 text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(qe,{className:"w-8 h-8 text-gray-400 dark:text-gray-500"})}),o.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"No limits configured"}),o.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Set daily time limits to control how much time you spend on specific sites"}),o.jsx("button",{onClick:k,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Add Your First Limit"})]}):o.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 divide-y divide-gray-200 dark:divide-gray-700",children:e.map(D=>{const I=S(D.pattern),E=I/D.limitSeconds*100,T=E>=100,B=E>=70&&E<100;return o.jsxs("div",{className:"p-4",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:D.pattern}),!D.enabled&&o.jsx("span",{className:"text-xs px-2 py-0.5 bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-400 rounded-full",children:"Disabled"}),T&&D.enabled&&o.jsx("span",{className:"text-xs px-2 py-0.5 bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 rounded-full",children:"Exceeded"}),B&&D.enabled&&!T&&o.jsx("span",{className:"text-xs px-2 py-0.5 bg-amber-100 dark:bg-amber-900/50 text-amber-700 dark:text-amber-300 rounded-full",children:"Approaching"})]}),o.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400",children:[o.jsxs("span",{children:["Limit: ",jr(D.limitSeconds),"/day"]}),o.jsxs("span",{children:["Bypass:"," ",D.bypassType==="password"?"Password":D.bypassType==="cooldown"?`${D.cooldownSeconds||30}s wait`:"None"]})]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>C(D),className:`relative w-10 h-6 rounded-full transition-colors ${D.enabled?"bg-blue-600":"bg-gray-300"}`,children:o.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${D.enabled?"left-5":"left-1"}`})}),o.jsx("button",{onClick:()=>v(D),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:o.jsx(Er,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>j(D.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg",children:o.jsx(bt,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex-1 h-3 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full rounded-full transition-all ${T?"bg-red-500":B?"bg-amber-500":"bg-green-500"}`,style:{width:`${Math.min(100,E)}%`}})}),o.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400 w-24 text-right",children:[jr(I)," / ",jr(D.limitSeconds)]})]})]},D.id)})}),i&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl w-full max-w-md p-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-lg font-semibold",children:c?"Edit Limit":"Add Daily Limit"}),o.jsx("button",{onClick:()=>l(!1),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 rounded-lg",children:o.jsx(et,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Domain"}),o.jsx("input",{type:"text",value:m.pattern,onChange:D=>d({...m,pattern:D.target.value}),placeholder:"e.g., twitter.com",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Daily Limit"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"number",min:"0",value:m.limitHours,onChange:D=>d({...m,limitHours:parseInt(D.target.value)||0}),className:"w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"hours"}),o.jsx("input",{type:"number",min:"0",max:"59",value:m.limitMinutes,onChange:D=>d({...m,limitMinutes:parseInt(D.target.value)||0}),className:"w-20 px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"minutes"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Bypass Method"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"How can you continue after reaching the limit?"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-200 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700",children:[o.jsx("input",{type:"radio",name:"bypassType",checked:m.bypassType==="cooldown",onChange:()=>d({...m,bypassType:"cooldown"}),className:"w-4 h-4 text-blue-600"}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium",children:"Wait to continue"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Must wait before bypassing"})]})]}),o.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-200 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700",children:[o.jsx("input",{type:"radio",name:"bypassType",checked:m.bypassType==="password",onChange:()=>d({...m,bypassType:"password"}),className:"w-4 h-4 text-blue-600"}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium",children:"Password required"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Enter password to continue"})]})]}),o.jsxs("label",{className:"flex items-center gap-3 p-3 border border-gray-200 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700",children:[o.jsx("input",{type:"radio",name:"bypassType",checked:m.bypassType==="none",onChange:()=>d({...m,bypassType:"none"}),className:"w-4 h-4 text-blue-600"}),o.jsxs("div",{children:[o.jsx("span",{className:"text-sm font-medium",children:"No bypass"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Blocked until midnight"})]})]})]})]}),m.bypassType==="cooldown"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Wait Time (seconds)"}),o.jsx("input",{type:"number",min:"10",max:"300",value:m.cooldownSeconds,onChange:D=>d({...m,cooldownSeconds:parseInt(D.target.value)||30}),className:"w-24 px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),m.bypassType==="password"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:c?"New Password (leave empty to keep current)":"Password"}),o.jsx("input",{type:"password",value:m.password,onChange:D=>d({...m,password:D.target.value}),placeholder:"Enter password",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),g&&o.jsx("p",{className:"text-sm text-red-600",children:g}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[o.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),o.jsxs("button",{onClick:w,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[o.jsx(is,{className:"w-4 h-4"}),c?"Save Changes":"Add Limit"]})]})]})]})})]})}function Re(e){const t=Math.floor(e/3600),r=Math.floor(e%3600/60);return t>0?`${t}h ${r}m`:`${r}m`}function Dr(e){return new Date(e+"T00:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}function Ot(e){return new Date(e).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}function he(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function Ur(e){const t=he(new Date),r=he(new Date(Date.now()-864e5));return e===t?"Today":e===r?"Yesterday":new Date(e+"T00:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}function eg(e){const t=["bg-blue-500","bg-green-500","bg-purple-500","bg-orange-500","bg-pink-500","bg-teal-500","bg-indigo-500","bg-red-500","bg-cyan-500","bg-amber-500","bg-lime-500","bg-emerald-500"];let r=0;for(let n=0;n<e.length;n++)r=e.charCodeAt(n)+((r<<5)-r);return t[Math.abs(r)%t.length]}const Ze=["bg-blue-500","bg-indigo-500","bg-purple-500","bg-pink-500","bg-red-500","bg-orange-500","bg-yellow-500","bg-green-500","bg-teal-500","bg-cyan-500"];function tg({startDate:e,endDate:t,onSelectRange:r,onClose:n}){const[a,s]=h.useState(e||he(new Date)),[i,l]=h.useState(t||he(new Date)),[c,u]=h.useState(!0),[m,d]=h.useState(()=>{const E=new Date((e||he(new Date))+"T00:00:00");return{year:E.getFullYear(),month:E.getMonth()}}),g=he(new Date),p=new Date(m.year,m.month+1,0).getDate(),f=new Date(m.year,m.month,1).getDay(),y=[];for(let E=0;E<f;E++)y.push(null);for(let E=1;E<=p;E++)y.push(E);const b=()=>{d(E=>E.month===0?{year:E.year-1,month:11}:{...E,month:E.month-1})},k=()=>{d(E=>E.month===11?{year:E.year+1,month:0}:{...E,month:E.month+1})},v=new Date(m.year,m.month).toLocaleDateString("en-US",{month:"long",year:"numeric"}),w=E=>{const T=`${m.year}-${String(m.month+1).padStart(2,"0")}-${String(E).padStart(2,"0")}`;T>g||(c?(s(T),T>i&&l(T),u(!1)):(T<a?s(T):l(T),u(!0)))},j=E=>E>=a&&E<=i,C=()=>{const E=new Date,T=E.getDay(),B=new Date(E);B.setDate(E.getDate()-T),s(he(B)),l(g)},S=()=>{const E=new Date,T=new Date(E.getFullYear(),E.getMonth(),1);s(he(T)),l(g)},D=()=>{const E=new Date,T=new Date(E);T.setDate(E.getDate()-6),s(he(T)),l(g)},I=()=>{const E=new Date,T=new Date(E);T.setDate(E.getDate()-29),s(he(T)),l(g)};return o.jsxs("div",{className:"absolute top-full right-0 mt-2 bg-white dark:bg-gray-800 rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 p-4 z-50 w-80",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3 text-sm",children:[o.jsx("button",{onClick:()=>u(!0),className:`px-3 py-1.5 rounded-lg transition-colors ${c?"bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300":"bg-gray-100 dark:bg-gray-700"}`,children:Ur(a)}),o.jsx("span",{className:"text-gray-400",children:""}),o.jsx("button",{onClick:()=>u(!1),className:`px-3 py-1.5 rounded-lg transition-colors ${c?"bg-gray-100 dark:bg-gray-700":"bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300"}`,children:Ur(i)})]}),o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("button",{onClick:b,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:o.jsx(ls,{className:"w-5 h-5"})}),o.jsx("span",{className:"font-medium",children:v}),o.jsx("button",{onClick:k,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:o.jsx(mt,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"grid grid-cols-7 gap-1 text-center text-xs text-gray-500 dark:text-gray-400 mb-2",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(E=>o.jsx("div",{children:E},E))}),o.jsx("div",{className:"grid grid-cols-7 gap-1",children:y.map((E,T)=>{if(E===null)return o.jsx("div",{},T);const B=`${m.year}-${String(m.month+1).padStart(2,"0")}-${String(E).padStart(2,"0")}`,Y=B===a||B===i,V=j(B),de=B===g,ne=B>g;return o.jsx("button",{onClick:()=>!ne&&w(E),disabled:ne,className:`p-2 text-sm rounded-lg transition-colors ${Y?"bg-blue-600 text-white":V?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":de?"bg-gray-200 dark:bg-gray-600":ne?"text-gray-300 dark:text-gray-600 cursor-not-allowed":"hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:E},T)})}),o.jsxs("div",{className:"flex flex-wrap gap-2 mt-4 pt-4 border-t dark:border-gray-700",children:[o.jsx("button",{onClick:C,className:"h-7 px-3 text-xs bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"Week to date"}),o.jsx("button",{onClick:S,className:"h-7 px-3 text-xs bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"Month to date"}),o.jsx("button",{onClick:D,className:"h-7 px-3 text-xs bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"Last 7 days"}),o.jsx("button",{onClick:I,className:"h-7 px-3 text-xs bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg transition-colors",children:"Last 30 days"})]}),o.jsxs("div",{className:"flex justify-between mt-4 pt-4 border-t dark:border-gray-700",children:[o.jsx("button",{onClick:n,className:"text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200",children:"Cancel"}),o.jsx("button",{onClick:()=>{r(a,i),n()},className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Apply"})]})]})}function rg({sessions:e,sites:t,startDate:r,endDate:n,animationDirection:a}){const[s,i]=h.useState(!1),l=10,c=he(new Date),u=r!==n,m=!u&&r===c,d=Object.entries(t).sort((S,D)=>D[1]-S[1]),g=d.length>l,p=a?a==="left"?"animate-slide-in-left":"animate-slide-in-right":"";if(d.length===0&&e.length===0)return o.jsx("div",{className:`text-center py-8 text-gray-500 dark:text-gray-400 ${p}`,children:m?"No activity recorded yet today":"No activity recorded for this period"});const f=new Date(r+"T00:00:00"),y=new Date(n+"T23:59:59");let b,k;u?(b=f.getTime(),k=y.getTime()):(b=y.getTime(),k=f.getTime(),e.forEach(S=>{b=Math.min(b,S.startTime),k=Math.max(k,S.endTime)}),b=Math.max(f.getTime(),b-30*60*1e3),k=Math.min(y.getTime(),k+30*60*1e3),e.length===0&&(b=f.getTime()+8*60*60*1e3,k=m?Date.now():f.getTime()+18*60*60*1e3));const v=Math.max(k-b,1),w=new Map;e.forEach(S=>{const D=w.get(S.domain)||[];D.push({start:S.startTime,end:S.endTime}),w.set(S.domain,D)});for(const[S,D]of w){if(D.length<=1)continue;D.sort((E,T)=>E.start-T.start);const I=[D[0]];for(let E=1;E<D.length;E++){const T=I[I.length-1],B=D[E];B.start<=T.end?T.end=Math.max(T.end,B.end):I.push(B)}w.set(S,I)}const j=8,C=[];if(u){const S=Math.ceil((y.getTime()-f.getTime())/864e5),D=Math.max(1,Math.ceil(S/j));let I=new Date(f),E=0;for(;I<=y;){if(E%D===0){const B=(I.getTime()-b)/v*100;C.push({label:I.toLocaleDateString("en-US",{month:"short",day:"numeric"}),position:B})}I.setDate(I.getDate()+1),E++}}else{const S=new Date(b).getHours(),D=new Date(k).getHours(),I=D-S+1,E=Math.max(1,Math.ceil(I/j));for(let T=S;T<=D;T++)if((T-S)%E===0){const B=new Date(f.getFullYear(),f.getMonth(),f.getDate(),T,0,0).getTime();if(B>=b&&B<=k){const Y=(B-b)/v*100;C.push({label:T===0?"12am":T<12?`${T}am`:T===12?"12pm":`${T-12}pm`,position:Y})}}}return d.length>0&&e.length===0?o.jsxs("div",{className:`text-center py-8 text-gray-500 dark:text-gray-400 ${p}`,children:[o.jsx("p",{children:"Timeline data not available for this day."}),o.jsx("p",{className:"text-xs mt-2",children:"Session tracking was enabled recently."})]}):o.jsxs("div",{className:p,children:[o.jsx("div",{className:"relative h-6 mb-2 ml-40",children:C.map((S,D)=>o.jsx("div",{className:"absolute text-xs text-gray-400",style:{left:`${S.position}%`,transform:"translateX(-50%)"},children:S.label},D))}),o.jsx("div",{className:`space-y-2 max-h-[450px] transition-all duration-300 overflow-hidden ${s?"overflow-y-auto":""}`,children:d.map(([S,D])=>{const I=w.get(S)||[],E=eg(S),T=e.filter(V=>V.domain===S),Y=new Set(T.map(V=>V.windowId)).size>1;return o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"w-36 flex-shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("a",{href:`https://${S}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-medium truncate hover:text-blue-600 hover:underline",title:S,children:S.replace(/^www\./,"")}),Y&&o.jsx("span",{title:"Multiple windows",children:o.jsx(fo,{className:"w-3 h-3 text-gray-400 flex-shrink-0"})})]}),o.jsx("span",{className:"text-xs text-gray-500",children:Re(D)})]}),o.jsxs("div",{className:"flex-1 relative h-6 bg-gray-100 dark:bg-gray-700 rounded overflow-hidden",children:[C.map((V,de)=>o.jsx("div",{className:"absolute top-0 bottom-0 w-px bg-gray-200 dark:bg-gray-600",style:{left:`${V.position}%`}},de)),I.map((V,de)=>{const ne=Math.max(0,(V.start-b)/v*100),Ae=Math.min(100,(V.end-b)/v*100),fe=Math.max(.5,Ae-ne);return o.jsx("div",{className:`absolute top-1 bottom-1 ${E} rounded-sm opacity-80 hover:opacity-100 transition-opacity cursor-default`,style:{left:`${ne}%`,width:`${fe}%`},title:u?`${new Date(V.start).toLocaleDateString("en-US",{month:"short",day:"numeric"})} ${Ot(V.start)} - ${Ot(V.end)}`:`${Ot(V.start)} - ${Ot(V.end)}`},de)})]})]},S)})}),g&&o.jsx("div",{className:"mt-4 flex justify-center h-5",children:o.jsxs("button",{onClick:()=>i(!s),className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 flex items-center gap-1.5",children:[o.jsx(ho,{className:`w-4 h-4 transition-transform duration-200 ${s?"rotate-180":""}`}),o.jsx("span",{className:"w-14",children:s?"Collapse":"Expand"})]})})]})}function ng(){const[e,t]=h.useState({}),[r,n]=h.useState({sessions:[],youtubeSessions:[]}),[a,s]=h.useState(!1),[i,l]=h.useState(!0),[c,u]=h.useState(null),[m,d]=h.useState({}),[g,p]=h.useState(null),[f,y]=h.useState({}),b=he(new Date),[k,v]=h.useState(()=>b),[w,j]=h.useState(()=>b),[C,S]=h.useState(!1),[D,I]=h.useState(!1),T=((L,_)=>{if(_!==b)return"custom";const U=new Date(L+"T00:00:00"),x=new Date(_+"T00:00:00"),N=Math.round((x.getTime()-U.getTime())/(1e3*60*60*24));return N===0?"day":N===6?"week":N===29?"month":"custom"})(k,w),B=L=>{const _=new Date;let U;switch(L){case"day":U=_;break;case"week":U=new Date(_),U.setDate(_.getDate()-6);break;case"month":U=new Date(_),U.setDate(_.getDate()-29);break}v(he(U)),j(b)},Y=at();h.useEffect(()=>{V()},[]),h.useEffect(()=>{i||de(k,w)},[k,w,i]),h.useEffect(()=>{if(!i&&Y.hash){const L=document.getElementById(Y.hash.slice(1));L&&L.scrollIntoView({behavior:"smooth"})}},[i,Y.hash]);async function V(){try{const[L,_,U,x]=await Promise.all([chrome.runtime.sendMessage({type:"GET_STATS_SUMMARY"}),chrome.runtime.sendMessage({type:"GET_DOMAIN_CATEGORIES"}),chrome.runtime.sendMessage({type:"GET_SETTINGS"}),chrome.runtime.sendMessage({type:"GET_ACTIVE_YOUTUBE_SESSIONS"})]);t(L||{}),d(_||{}),p(U),y(x||{})}catch(L){console.error("Failed to load stats:",L)}finally{l(!1)}}async function de(L,_){s(!0);try{const U=await chrome.runtime.sendMessage({type:"GET_SESSIONS_FOR_RANGE",payload:{startDate:L,endDate:_}});n(U||{sessions:[],youtubeSessions:[]})}catch(U){console.error("Failed to load sessions:",U)}finally{s(!1)}}function ne(L){const _={};let U=0;for(const[x,N]of Object.entries(L)){const A=Gr(x,m);_[A]=(_[A]||0)+N,U+=N}return ye.map(x=>({category:x.id,time:_[x.id]||0,percent:U>0?(_[x.id]||0)/U*100:0})).filter(x=>x.time>0).sort((x,N)=>N.time-x.time)}const Ae=L=>{const _={};for(const U of L){const x=e[U];if(x)for(const[N,A]of Object.entries(x.sites||{}))_[N]=(_[N]||0)+A}return _};if(i)return o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});const fe=[];let be=new Date(k+"T00:00:00");const Oe=new Date(w+"T00:00:00");for(;be<=Oe;)fe.push(he(be)),be.setDate(be.getDate()+1);const Pe=fe.length,ve=fe.map(L=>e[L]||{date:L,totalTime:0,sites:{},visits:0,blockedAttempts:0}),Te=ve.reduce((L,_)=>L+_.totalTime,0),we=ve.reduce((L,_)=>L+_.blockedAttempts,0),Le=Te/Pe,ie={};for(const L of ve)for(const[_,U]of Object.entries(L.sites))ie[_]=(ie[_]||0)+U;const ke=Object.entries(ie).sort((L,_)=>_[1]-L[1]).slice(0,10),P=Math.max(...ve.map(L=>L.totalTime),1),R=[],O=new Date(k+"T00:00:00");for(let L=Pe;L>0;L--){const _=new Date(O);_.setDate(O.getDate()-L),R.push(he(_))}const te=R.map(L=>e[L]||{totalTime:0}).reduce((L,_)=>L+_.totalTime,0),G=te>0?(Te-te)/te*100:0,se=()=>T==="day"?"day":T==="custom"?"period":T,Me=()=>k===w?Ur(k):`${Dr(k)}  ${Dr(w)}`;return o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Metrics"}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:Me()}),o.jsxs("div",{className:"relative flex bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:[o.jsx("div",{className:"absolute top-1 bottom-1 bg-white dark:bg-gray-700 rounded-md shadow transition-all duration-300 ease-out",style:{width:"calc(25% - 2px)",left:"4px",transform:`translateX(${T==="day"?"0%":T==="week"?"100%":T==="month"?"200%":"300%"})`}}),o.jsx("button",{onClick:()=>B("day"),className:`relative z-10 w-16 py-2 text-sm font-medium rounded-md transition-colors duration-200 text-center ${T==="day"?"text-gray-900 dark:text-gray-100":"text-gray-600 dark:text-gray-400"}`,children:"Day"}),o.jsx("button",{onClick:()=>B("week"),className:`relative z-10 w-16 py-2 text-sm font-medium rounded-md transition-colors duration-200 text-center ${T==="week"?"text-gray-900 dark:text-gray-100":"text-gray-600 dark:text-gray-400"}`,children:"Week"}),o.jsx("button",{onClick:()=>B("month"),className:`relative z-10 w-16 py-2 text-sm font-medium rounded-md transition-colors duration-200 text-center ${T==="month"?"text-gray-900 dark:text-gray-100":"text-gray-600 dark:text-gray-400"}`,children:"Month"}),o.jsxs("div",{className:"relative",children:[o.jsx("button",{onClick:()=>S(!C),className:`relative z-10 w-16 py-2 text-sm font-medium rounded-md transition-colors duration-200 text-center ${T==="custom"?"text-gray-900 dark:text-gray-100":"text-gray-600 dark:text-gray-400"}`,children:"Custom"}),C&&o.jsx(tg,{startDate:k,endDate:w,onSelectRange:(L,_)=>{v(L),j(_)},onClose:()=>S(!1)})]})]})]})]}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total time"}),o.jsx(Bt,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"})]}),o.jsx("p",{className:"text-2xl font-bold",children:Re(Te)}),o.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[G>0?o.jsx(xo,{className:"w-4 h-4 text-red-500"}):o.jsx(hn,{className:"w-4 h-4 text-green-500"}),o.jsxs("span",{className:`text-sm ${G>0?"text-red-500":"text-green-500"}`,children:[Math.abs(G).toFixed(0),"% vs prev ",se()]})]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Daily average"}),o.jsx(Cr,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"})]}),o.jsx("p",{className:"text-2xl font-bold",children:Re(Le)}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"per day"})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Sites blocked"}),o.jsx(hn,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"})]}),o.jsx("p",{className:"text-2xl font-bold",children:we}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"distractions avoided"})]})]}),o.jsxs("div",{id:"activity-timeline",className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[o.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Activity timeline"}),o.jsx("div",{className:"overflow-hidden",children:a?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):o.jsx(rg,{sessions:r.sessions,sites:Ae(fe),startDate:k,endDate:w,animationDirection:null})})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[o.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Top sites"}),ke.length>0?o.jsx("div",{className:"space-y-3",children:ke.slice(0,8).map(([L,_],U)=>o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${Ze[U%Ze.length]}`}),o.jsx("span",{className:"text-sm text-gray-400 dark:text-gray-500 w-4",children:U+1}),o.jsx("div",{className:"flex-1 min-w-0",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("a",{href:`https://${L}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-medium truncate hover:text-blue-600 hover:underline",children:L}),o.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 ml-2",children:Re(_)})]})})]},L))}):o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:"No data for this period"})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[o.jsx("h2",{className:"text-lg font-semibold mb-4",children:"By category"}),(()=>{const L=ne(ie);return L.length===0?o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:"No data for this period"}):o.jsx("div",{className:"space-y-3",children:L.map(({category:_,time:U,percent:x})=>{const N=Ro(_);return o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${N.color}`}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center justify-between mb-1",children:[o.jsx("span",{className:"text-sm font-medium",children:N.name}),o.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:Re(U)})]}),o.jsx("div",{className:"h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full ${N.color} transition-all`,style:{width:`${x}%`}})})]}),o.jsxs("span",{className:"text-xs text-gray-400 dark:text-gray-500 w-12 text-right",children:[x.toFixed(1),"%"]})]},_)})})})()]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("h2",{className:"text-lg font-semibold",children:"Daily breakdown"}),c&&o.jsxs("div",{className:"bg-gray-900 text-white text-xs px-3 py-1.5 rounded-lg flex items-center gap-2 animate-fade-in",children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${Ze[ke.findIndex(([L])=>L===c.domain)%Ze.length]||"bg-gray-400"}`}),o.jsx("span",{className:"font-medium",children:c.domain}),o.jsx("span",{className:"text-gray-300",children:""}),o.jsx("span",{children:Re(c.time)}),o.jsxs("span",{className:"text-gray-400",children:["(",c.percent.toFixed(1),"%)"]})]})]}),o.jsx("div",{className:"space-y-3",children:ve.slice(-7).map(L=>{const _=Object.entries(L.sites).sort((x,N)=>N[1]-x[1]),U=new Map(ke.map(([x],N)=>[x,N]));return o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 w-20",children:Dr(L.date)}),o.jsx("div",{className:"flex-1 h-8 bg-gray-100 dark:bg-gray-700 rounded-lg overflow-hidden flex",children:L.totalTime>0?_.map(([x,N])=>{const A=U.get(x)??9,W=N/P*100;return W<.5?null:o.jsx("div",{className:`h-full ${Ze[A%Ze.length]} hover:opacity-80 transition-opacity cursor-pointer`,style:{width:`${W}%`},onMouseEnter:()=>u({date:L.date,domain:x,time:N,percent:N/L.totalTime*100}),onMouseLeave:()=>u(null)},x)}):o.jsx("div",{className:"flex-1 flex items-center justify-center text-xs text-gray-400 dark:text-gray-500",children:"No activity"})}),o.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400 w-14 text-right",children:Re(L.totalTime)})]},L.date)})}),o.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-4",children:"Hover over segments to see domain details. Colors match the top sites list above."})]}),(g==null?void 0:g.youtubeTrackingEnabled)&&o.jsxs("div",{id:"youtube-channels",className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[o.jsxs("h2",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[o.jsx(yo,{className:"w-5 h-5 text-red-600"}),"YouTube channels"]}),a?o.jsx("div",{className:"flex items-center justify-center py-8",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"})}):(()=>{const L=r.youtubeSessions;if(L.length===0)return o.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:"No YouTube activity recorded in this period"});const _=es(L),U={};for(const q of Object.values(f))q.channelUrl&&q.channelName&&(U[q.channelName]=q.channelUrl);const x=Object.entries(_).sort((q,J)=>J[1].time-q[1].time),N=Object.values(_).reduce((q,J)=>q+J.time,0),A=x.length>0?x[0][1].time:0,z=x.length>10;return o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 dark:text-gray-400 mb-4",children:[o.jsxs("span",{children:[x.length," channel",x.length!==1?"s":""]}),o.jsxs("span",{children:["Total: ",Re(N)]})]}),o.jsx("div",{className:`space-y-4 max-h-[420px] transition-all duration-300 overflow-hidden ${D?"overflow-y-auto":""}`,children:x.map(([q,J],me)=>{const Q=N>0?J.time/N*100:0,ee=A>0?J.time/A*100:0,H=J.url||U[q];return o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[o.jsxs("span",{className:"font-medium truncate flex items-center gap-2",children:[o.jsxs("span",{className:"text-gray-400",children:[me+1,"."]}),H?o.jsx("a",{href:H,target:"_blank",rel:"noopener noreferrer",className:"hover:text-red-600 hover:underline",children:q}):q]}),o.jsxs("span",{className:"text-gray-500 dark:text-gray-400 flex items-center gap-2",children:[Re(J.time),o.jsxs("span",{className:"text-xs text-gray-400",children:["(",Q.toFixed(1),"%)"]})]})]}),o.jsx("div",{className:"h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-red-500 rounded-full transition-all",style:{width:`${ee}%`}})})]},q)})}),z&&o.jsx("div",{className:"mt-4 flex justify-center h-5",children:o.jsxs("button",{onClick:()=>I(!D),className:"text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 flex items-center gap-1.5",children:[o.jsx(ho,{className:`w-4 h-4 transition-transform duration-200 ${D?"rotate-180":""}`}),o.jsx("span",{className:"w-14",children:D?"Collapse":"Expand"})]})})]})})()]})]})}function mo(e){const t=Math.floor(e/3600),r=Math.floor(e%3600/60);return t>0?`${t}h ${r}m`:`${r}m`}function og({isOpen:e,onClose:t,onSave:r,pendingDomain:n,editingCategory:a,editingBuiltInId:s,builtInOverrides:i={}}){const[l,c]=h.useState(""),[u,m]=h.useState(At[0]),d=!!s,g=s?ye.find(k=>k.id===s):null;if(h.useEffect(()=>{a?(c(a.name),m(a.color)):s&&g?(c(i[s]||g.name),m(g.color)):(c(""),m(At[Math.floor(Math.random()*At.length)]))},[a,s,g,i,e]),!e)return null;const p=k=>{k.preventDefault(),l.trim()&&(r(l.trim(),u),t())},f=a||s,y=f?"Edit category":"New category",b=f?"Save changes":"Create category";return o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl w-full max-w-md mx-4 shadow-xl",children:[o.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[o.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:y}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:o.jsx(et,{className:"w-5 h-5 text-gray-500"})})]}),o.jsxs("form",{onSubmit:p,className:"p-6 space-y-4",children:[n&&o.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 px-4 py-3 rounded-lg text-sm text-blue-700 dark:text-blue-300",children:["Creating category for: ",o.jsx("strong",{children:n})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category name"}),o.jsx("input",{type:"text",value:l,onChange:k=>c(k.target.value),placeholder:d&&g?g.name:"e.g., Work Tools, Gaming",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,autoFocus:!0}),d&&g&&o.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Original name: ",g.name]})]}),!d&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),o.jsx("div",{className:"grid grid-cols-9 gap-2",children:At.map(k=>o.jsx("button",{type:"button",onClick:()=>m(k),className:`w-7 h-7 rounded-full ${k} transition-transform ${u===k?"ring-2 ring-offset-2 ring-blue-500 scale-110":"hover:scale-105"}`},k))})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[o.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:b})]})]})]})})}function ag(){const[e,t]=h.useState({}),[r,n]=h.useState({}),[a,s]=h.useState([]),[i,l]=h.useState({}),[c,u]=h.useState(!0),[m,d]=h.useState(!1),[g,p]=h.useState(null),[f,y]=h.useState(null),[b,k]=h.useState(null),[v,w]=h.useState(new Set),[j,C]=h.useState([]),[S,D]=h.useState(!1),[I,E]=h.useState(new Set);h.useEffect(()=>{Ae()},[]),h.useEffect(()=>{if(!c&&j.length===0){const P=ye.filter(O=>O.id!=="other").map(O=>O.id),R=a.sort((O,$)=>O.order-$.order).map(O=>O.id);C([...P,...R])}},[c,a,j.length]);function T(P){w(R=>{const O=new Set(R);return O.has(P)?O.delete(P):O.add(P),O})}function B(){const P=[...j,"other"],R=P.every(O=>v.has(O));w(R?new Set:new Set(P))}function Y(P){E(R=>{const O=new Set(R);return O.has(P)?O.delete(P):O.add(P),O})}function V(P){const R=P.every(O=>I.has(O.domain));E(R?O=>{const $=new Set(O);return P.forEach(te=>$.delete(te.domain)),$}:O=>{const $=new Set(O);return P.forEach(te=>$.add(te.domain)),$})}function de(){D(!1),E(new Set)}async function ne(P){const R=Array.from(I);if(R.length!==0){for(const O of R){const $=O.replace(/^www\./,""),te=Fe[$]||Fe[O]||"other",G=P===te?null:P;await chrome.runtime.sendMessage({type:"SET_DOMAIN_CATEGORY",payload:{domain:O,category:G}}),n(se=>{if(G===null){const{[O]:Me,[$]:L,..._}=se;return _}return{...se,[O]:G}})}de()}}async function Ae(){try{const[P,R,O,$]=await Promise.all([chrome.runtime.sendMessage({type:"GET_STATS_SUMMARY"}),chrome.runtime.sendMessage({type:"GET_DOMAIN_CATEGORIES"}),chrome.runtime.sendMessage({type:"GET_CUSTOM_CATEGORIES"}),chrome.runtime.sendMessage({type:"GET_BUILTIN_CATEGORY_OVERRIDES"})]);t(P||{}),n(R||{}),s(O||[]),l($||{})}catch(P){console.error("Failed to load data:",P)}finally{u(!1)}}async function fe(P,R){const O=await chrome.runtime.sendMessage({type:"ADD_CUSTOM_CATEGORY",payload:{name:P,color:R,order:a.length}});s($=>[...$,O]),C($=>[...$,O.id]),g&&(await chrome.runtime.sendMessage({type:"SET_DOMAIN_CATEGORY",payload:{domain:g,category:O.id}}),n($=>({...$,[g]:O.id})),p(null))}async function be(P,R){if(!f)return;const O={...f,name:P,color:R};await chrome.runtime.sendMessage({type:"UPDATE_CUSTOM_CATEGORY",payload:O}),s($=>$.map(te=>te.id===O.id?O:te)),y(null)}async function Oe(P){if(!b)return;const R=ye.find($=>$.id===b),O=P.trim()===""||P.trim()===(R==null?void 0:R.name)?null:P.trim();await chrome.runtime.sendMessage({type:"UPDATE_BUILTIN_CATEGORY_NAME",payload:{id:b,name:O}}),l($=>{if(O===null){const{[b]:te,...G}=$;return G}return{...$,[b]:O}}),k(null)}function Pe(P,R){f?be(P,R):b?Oe(P):fe(P,R)}async function ve(P){await chrome.runtime.sendMessage({type:"DELETE_CUSTOM_CATEGORY",payload:{id:P}}),s(R=>R.filter(O=>O.id!==P)),C(R=>R.filter(O=>O!==P)),n(R=>{const O={};for(const[$,te]of Object.entries(R))te!==P&&(O[$]=te);return O})}async function Te(P){const{source:R,destination:O,draggableId:$,type:te}=P;if(!O)return;if(te==="category"){if(R.index===O.index)return;const U=Array.from(j),[x]=U.splice(R.index,1);U.splice(O.index,0,x),C(U);return}if(R.droppableId===O.droppableId)return;const G=$,se=O.droppableId;if(se==="new-category"){p(G),d(!0);return}const Me=G.replace(/^www\./,""),L=Fe[Me]||Fe[G]||"other",_=se===L?null:se;await chrome.runtime.sendMessage({type:"SET_DOMAIN_CATEGORY",payload:{domain:G,category:_}}),n(U=>{if(_===null){const{[G]:x,[Me]:N,...A}=U;return A}return{...U,[G]:_}})}const we={};for(const P of Object.values(e))for(const[R,O]of Object.entries(P.sites||{}))we[R]=(we[R]||0)+O;const Le=Object.entries(we).map(([P,R])=>({domain:P,time:R,category:Gr(P,r)})),ie=new Map;for(const P of ye)P.id!=="other"&&ie.set(P.id,[]);for(const P of a.sort((R,O)=>R.order-O.order))ie.set(P.id,[]);ie.set("other",[]);for(const P of Le){const R=ie.get(P.category);R?R.push(P):ie.get("other").push(P)}for(const P of ie.values())P.sort((R,O)=>O.time-R.time);if(c)return o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});const ke=[...j,"other"];return o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Categories"}),o.jsxs("div",{className:"flex items-center gap-2",children:[(()=>{const P=j.length>0&&[...j,"other"].every(R=>v.has(R));return o.jsxs("button",{onClick:B,className:"flex items-center gap-1.5 px-3 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors text-sm",children:[o.jsx(mt,{className:`w-4 h-4 transition-transform duration-200 ${P?"":"rotate-90"}`}),o.jsx("span",{className:"w-[85px]",children:P?"Expand all":"Collapse all"})]})})(),S?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:de,className:"flex items-center gap-2 px-3 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:"Cancel"}),I.size>0&&o.jsxs("div",{className:"relative",children:[o.jsxs("select",{onChange:P=>{P.target.value&&ne(P.target.value)},value:"",className:"appearance-none pl-3 pr-8 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors cursor-pointer text-sm font-medium",children:[o.jsxs("option",{value:"",disabled:!0,children:["Move ",I.size," site",I.size!==1?"s":""," to..."]}),ke.map(P=>{const R=Sn(P,a,i);return o.jsx("option",{value:P,className:"text-gray-900",children:R.name},P)})]}),o.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none",children:o.jsx(mt,{className:"w-4 h-4 rotate-90"})})]})]}):o.jsxs("button",{onClick:()=>D(!0),className:"flex items-center gap-2 px-3 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Select sites to move",children:[o.jsx(dr,{className:"w-4 h-4"}),"Select"]}),o.jsxs("button",{onClick:()=>{p(null),y(null),k(null),d(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[o.jsx(qe,{className:"w-4 h-4"}),"Add category"]})]})]}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:S?"Click sites to select them, then choose a category to move them to.":"Drag categories to reorder. Click to expand/collapse. Drag sites between categories."}),o.jsxs(Ba,{onDragEnd:Te,children:[o.jsx(ft,{droppableId:"categories",type:"category",children:P=>o.jsxs("div",{ref:P.innerRef,...P.droppableProps,className:"space-y-4",children:[ke.map((R,O)=>{const $=ie.get(R)||[],te=Sn(R,a,i),G=!Mo(R),se=R==="other",Me=$.reduce((x,N)=>x+N.time,0),L=v.has(R),_=(x,N)=>o.jsxs("div",{className:`bg-white dark:bg-gray-800 rounded-xl border overflow-hidden transition-colors ${N&&L?"border-blue-500 ring-2 ring-blue-500/50":"border-gray-200 dark:border-gray-700"}`,children:[o.jsxs("div",{className:`flex items-center gap-2 px-4 py-3 transition-colors ${N&&L?"bg-blue-50 dark:bg-blue-900/30":"bg-gray-50 dark:bg-gray-700/50"} ${L?"":"border-b border-gray-200 dark:border-gray-700"}`,children:[!se&&o.jsx("div",{...x,className:"text-gray-300 dark:text-gray-600 hover:text-gray-500 dark:hover:text-gray-400 cursor-grab",children:o.jsx(Ft,{className:"w-4 h-4"})}),o.jsxs("div",{className:"flex items-center gap-3 flex-1 cursor-pointer",onClick:()=>T(R),children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:o.jsx(mt,{className:`w-5 h-5 transition-transform duration-200 ${L?"":"rotate-90"}`})}),o.jsx("div",{className:`w-3 h-3 rounded-full ${te.color}`}),o.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:te.name}),!G&&o.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 bg-gray-100 dark:bg-gray-600 px-1.5 py-0.5 rounded",children:"default"}),o.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[$.length," site",$.length!==1?"s":"","  ",mo(Me)]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[S&&$.length>0&&o.jsx("button",{onClick:A=>{A.stopPropagation(),V($)},className:"p-1.5 text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded transition-colors",title:$.every(A=>I.has(A.domain))?"Deselect all in category":"Select all in category",children:$.every(A=>I.has(A.domain))?o.jsx(dr,{className:"w-4 h-4"}):$.some(A=>I.has(A.domain))?o.jsx("div",{className:"w-4 h-4 border-2 border-current rounded flex items-center justify-center",children:o.jsx("div",{className:"w-2 h-0.5 bg-current"})}):o.jsx(pn,{className:"w-4 h-4"})}),!S&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:A=>{if(A.stopPropagation(),G){const W=a.find(z=>z.id===R);W&&(y(W),k(null),p(null),d(!0))}else k(R),y(null),p(null),d(!0)},className:"p-1.5 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",title:G?"Edit category":"Rename category",children:o.jsx(hs,{className:"w-4 h-4"})}),G&&o.jsx("button",{onClick:A=>{A.stopPropagation(),ve(R)},className:"p-1.5 text-gray-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",title:"Delete category",children:o.jsx(bt,{className:"w-4 h-4"})})]})]})]}),o.jsx("div",{className:"grid transition-all duration-200 ease-in-out",style:{gridTemplateRows:L?"0fr":"1fr"},children:o.jsx("div",{className:"overflow-hidden",children:o.jsx("div",{className:`p-2 min-h-[48px] transition-colors ${N&&!L?"bg-blue-50 dark:bg-blue-900/20":""}`,children:$.length===0?o.jsx("div",{className:"text-center py-4 text-sm text-gray-400 dark:text-gray-500",children:R==="other"?"No uncategorized sites":"Drag sites here to add them to this category"}):o.jsx("div",{className:"space-y-1",children:$.map((A,W)=>o.jsx(Xt,{draggableId:A.domain,index:W,isDragDisabled:S,children:(z,q)=>{const J=I.has(A.domain);return o.jsxs("div",{ref:z.innerRef,...z.draggableProps,...S?{}:z.dragHandleProps,onClick:S?()=>Y(A.domain):void 0,className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors group ${S?"cursor-pointer":"cursor-grab"} ${q.isDragging?"bg-white dark:bg-gray-700 shadow-lg ring-2 ring-blue-500":J?"bg-blue-50 dark:bg-blue-900/30 ring-1 ring-blue-500":"hover:bg-gray-50 dark:hover:bg-gray-700/50"}`,children:[S?o.jsx("div",{className:"text-blue-600 dark:text-blue-400",children:J?o.jsx(dr,{className:"w-4 h-4"}):o.jsx(pn,{className:"w-4 h-4"})}):o.jsx("div",{className:`text-gray-300 dark:text-gray-600 ${q.isDragging?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity`,children:o.jsx(Ft,{className:"w-4 h-4"})}),o.jsx("span",{className:"flex-1 text-sm text-gray-700 dark:text-gray-300 truncate",children:A.domain}),o.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:mo(A.time)})]})}},A.domain))})})})})]}),U=x=>o.jsx(ft,{droppableId:R,type:"site",children:(N,A)=>o.jsxs("div",{ref:N.innerRef,...N.droppableProps,children:[_(x,A.isDraggingOver),N.placeholder]})});return se?o.jsx("div",{children:U()},R):o.jsx(Xt,{draggableId:`category-${R}`,index:O,children:x=>o.jsx("div",{ref:x.innerRef,...x.draggableProps,children:U(x.dragHandleProps||void 0)})},R)}),P.placeholder]})}),o.jsx(ft,{droppableId:"new-category",type:"site",children:(P,R)=>o.jsxs("div",{ref:P.innerRef,...P.droppableProps,className:`border-2 border-dashed rounded-xl p-6 text-center transition-colors mt-4 ${R.isDraggingOver?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600"}`,children:[o.jsx(qe,{className:`w-8 h-8 mx-auto mb-2 ${R.isDraggingOver?"text-blue-500":"text-gray-400"}`}),o.jsx("p",{className:`text-sm font-medium ${R.isDraggingOver?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400"}`,children:"Drop here to create new category"}),P.placeholder]})})]}),o.jsx(og,{isOpen:m,onClose:()=>{d(!1),p(null),y(null),k(null)},onSave:Pe,pendingDomain:g,editingCategory:f,editingBuiltInId:b,builtInOverrides:i})]})}function sg(){const[e,t]=h.useState(null),[r,n]=h.useState(!0),[a,s]=h.useState(!1),[i,l]=h.useState(""),[c,u]=h.useState(""),[m,d]=h.useState("");h.useEffect(()=>{g()},[]);async function g(){try{const v=await chrome.runtime.sendMessage({type:"GET_SETTINGS"});t(v)}catch(v){console.error("Failed to load settings:",v)}finally{n(!1)}}async function p(){if(e){s(!0);try{await chrome.runtime.sendMessage({type:"UPDATE_SETTINGS",payload:e})}catch(v){console.error("Failed to save settings:",v)}finally{s(!1)}}}async function f(){if(i!==c){d("Passwords do not match");return}if(i.length<4){d("Password must be at least 4 characters");return}try{const w=new TextEncoder().encode(i),j=await crypto.subtle.digest("SHA-256",w),S=Array.from(new Uint8Array(j)).map(D=>D.toString(16).padStart(2,"0")).join("");await chrome.runtime.sendMessage({type:"UPDATE_SETTINGS",payload:{passwordHash:S}}),l(""),u(""),d(""),alert("Master password set successfully!")}catch(v){console.error("Failed to set password:",v),d("Failed to set password")}}async function y(){if(confirm("Are you sure you want to clear ALL data? This includes all tracking history and blocked sites. This cannot be undone!"))try{await chrome.storage.local.clear(),alert("All data cleared. The extension will reload."),window.location.reload()}catch(v){console.error("Failed to clear data:",v)}}async function b(){try{const v=await chrome.storage.local.get(null),w=new Blob([JSON.stringify(v,null,2)],{type:"application/json"}),j=URL.createObjectURL(w),C=document.createElement("a");C.href=j;const S=new Date,D=`${S.getFullYear()}-${String(S.getMonth()+1).padStart(2,"0")}-${String(S.getDate()).padStart(2,"0")}`;C.download=`browserutils-export-${D}.json`,C.click(),URL.revokeObjectURL(j)}catch(v){console.error("Failed to export data:",v)}}async function k(v){try{const w=await v.text(),j=JSON.parse(w);await chrome.storage.local.set(j),alert("Data imported successfully!"),window.location.reload()}catch(w){console.error("Failed to import data:",w),alert("Failed to import data. Make sure the file is valid.")}}return r||!e?o.jsx("div",{className:"flex items-center justify-center h-64",children:o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):o.jsxs("div",{className:"max-w-2xl",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-6",children:"Settings"}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[o.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Appearance"}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{children:[o.jsx("label",{className:"block font-medium mb-2",children:"Theme"}),o.jsx("div",{className:"flex gap-2",children:[{value:"light",label:"Light",icon:bs},{value:"dark",label:"Dark",icon:ps},{value:"system",label:"System",icon:gs}].map(({value:v,label:w,icon:j})=>o.jsxs("button",{onClick:()=>{const C={...e,theme:v};t(C),Ja(v),chrome.runtime.sendMessage({type:"UPDATE_SETTINGS",payload:{theme:v}})},className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-colors ${(e==null?void 0:e.theme)===v?"border-blue-500 bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[o.jsx(j,{className:"w-4 h-4"}),w]},v))})]})})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[o.jsx("h2",{className:"text-lg font-semibold mb-4",children:"General"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("label",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Enable Tracking"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Record time spent on websites"})]}),o.jsx("input",{type:"checkbox",checked:e.trackingEnabled,onChange:v=>t({...e,trackingEnabled:v.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]}),o.jsxs("label",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Enable Blocking"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Block access to configured sites"})]}),o.jsx("input",{type:"checkbox",checked:e.blockingEnabled,onChange:v=>t({...e,blockingEnabled:v.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]}),o.jsxs("label",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"YouTube Channel Tracking"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Track which YouTube channels you watch"})]}),o.jsx("input",{type:"checkbox",checked:e.youtubeTrackingEnabled,onChange:v=>t({...e,youtubeTrackingEnabled:v.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-medium mb-1",children:"Data Retention"}),o.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"How long to keep tracking history"}),o.jsxs("select",{value:e.retentionDays,onChange:v=>t({...e,retentionDays:parseInt(v.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[o.jsx("option",{value:7,children:"7 days"}),o.jsx("option",{value:14,children:"14 days"}),o.jsx("option",{value:30,children:"30 days"}),o.jsx("option",{value:60,children:"60 days"}),o.jsx("option",{value:90,children:"90 days"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block font-medium mb-1",children:"Idle Timeout"}),o.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Stop tracking after this many seconds of inactivity. Set to 0 to disable."}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("input",{type:"number",value:e.idleThreshold,onChange:v=>t({...e,idleThreshold:parseInt(v.target.value)||0}),min:0,max:3600,step:15,className:"w-32 px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),o.jsx("span",{className:"text-sm text-gray-500",children:"seconds"}),o.jsx("div",{className:"flex gap-2 ml-auto",children:[30,60,120,300].map(v=>o.jsx("button",{type:"button",onClick:()=>t({...e,idleThreshold:v}),className:`px-2 py-1 text-xs rounded ${e.idleThreshold===v?"bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:v<60?`${v}s`:`${v/60}m`},v))})]}),o.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:"Minimum: 15 seconds (Chrome API limit). Tracking also pauses when windows are minimized."})]})]}),o.jsxs("button",{onClick:p,disabled:a,className:"mt-6 flex items-center gap-2 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 text-white px-4 py-2 rounded-lg transition-colors",children:[o.jsx(gn,{className:"w-4 h-4"}),a?"Saving...":"Save Settings"]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[o.jsx("h2",{className:"text-lg font-semibold mb-4",children:"New Tab"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block font-medium mb-1",children:"Display Name"}),o.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Your name for the greeting on new tabs"}),o.jsx("input",{type:"text",value:e.displayName,onChange:v=>t({...e,displayName:v.target.value}),placeholder:"Enter your name",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),o.jsx("p",{className:"text-sm text-gray-500",children:"Quick links can be added and removed directly on the new tab page."})]}),o.jsxs("button",{onClick:p,disabled:a,className:"mt-6 flex items-center gap-2 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 text-white px-4 py-2 rounded-lg transition-colors",children:[o.jsx(gn,{className:"w-4 h-4"}),a?"Saving...":"Save Settings"]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[o.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Master Password"}),o.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Set a master password for unlocking password-protected blocked sites.",e.passwordHash&&o.jsx("span",{className:"ml-1 text-green-600",children:"(Currently set)"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("input",{type:"password",value:i,onChange:v=>{l(v.target.value),d("")},placeholder:"New password",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),o.jsx("input",{type:"password",value:c,onChange:v=>{u(v.target.value),d("")},placeholder:"Confirm password",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),m&&o.jsx("p",{className:"text-sm text-red-600",children:m}),o.jsx("button",{onClick:f,className:"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:e.passwordHash?"Update Password":"Set Password"})]}),o.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:o.jsxs("label",{className:`flex items-center justify-between ${e.passwordHash?"":"opacity-50"}`,children:[o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx(_t,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5"}),o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:"Lockdown Mode"}),o.jsxs("p",{className:"text-sm text-gray-500",children:["Require master password to disable blocking, remove sites, or disable limits.",!e.passwordHash&&o.jsx("span",{className:"block text-amber-600 dark:text-amber-400 mt-1",children:"Set a master password first to enable this feature."})]})]})]}),o.jsx("input",{type:"checkbox",checked:e.lockdownEnabled??!1,onChange:async v=>{const w=v.target.checked;t({...e,lockdownEnabled:w}),await chrome.runtime.sendMessage({type:"UPDATE_SETTINGS",payload:{lockdownEnabled:w}})},disabled:!e.passwordHash,className:"w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 disabled:cursor-not-allowed"})]})})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 mb-6",children:[o.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Data Management"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:b,className:"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors",children:"Export Data"}),o.jsxs("label",{className:"bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 px-4 py-2 rounded-lg transition-colors cursor-pointer",children:["Import Data",o.jsx("input",{type:"file",accept:".json",onChange:v=>{var w;return((w=v.target.files)==null?void 0:w[0])&&k(v.target.files[0])},className:"hidden"})]})]}),o.jsx("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:o.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[o.jsx(as,{className:"w-5 h-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium text-red-900 dark:text-red-300",children:"Danger Zone"}),o.jsx("p",{className:"text-sm text-red-700 dark:text-red-400 mb-3",children:"This will permanently delete all your data including tracking history, blocked sites, and settings."}),o.jsxs("button",{onClick:y,className:"flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors",children:[o.jsx(bt,{className:"w-4 h-4"}),"Clear All Data"]})]})]})})]})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[o.jsx("h2",{className:"text-lg font-semibold mb-4",children:"About"}),o.jsxs("a",{href:"https://github.com/ericfzhu/browserutils",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:[o.jsx(ds,{className:"w-5 h-5"}),"View on GitHub"]})]})]})}const ig="0.10.6",lg=[{version:"0.10.6",date:"2026-01-10",added:["Focus Sessions - block all sites in a folder with one shared timer","Focus button on folder headers opens modal to set duration","Quick duration presets (15m, 30m, 1h, 2h) in focus modal","Focus sessions override individual site settings - blocks everything in the folder"],changed:["Timer blocking now works as temporary block - sites are accessible until you start the timer",'Timer sites show "Disabled" button that starts blocking when clicked, "Stop" to end early',"Active timer blocks display remaining time with live countdown in dashboard and blocked page","Time remaining now displays to the left of the block type label","Enable All/Disable All on folders now starts/clears timer blocks for timer-type sites","All status buttons (Blocking, Disabled, Stop) now have consistent width"],fixed:["Timer duration input can now be fully cleared before typing a new value","Timer blocks now start instantly when clicking Disabled or Enable All"]},{version:"0.10.5",date:"2026-01-10",changed:["Compact session storage format reduces data size by ~65%","Faster loading of Categories and Metrics pages by loading summary data first","Timeline and YouTube data now loads on-demand for selected date range only","One-time migration converts existing data to compact format on update"]},{version:"0.10.4",date:"2026-01-10",added:["New Categories page - view all sites organized by category with time spent","Collapsible categories - click to expand/collapse each category","Expand all/Collapse all button for quick category management","Select mode for bulk moving multiple sites between categories",'Drag and drop to reorder categories (except "Other" which stays at the bottom)',"Drag and drop sites between categories to recategorize them","Drop sites onto collapsed categories","Custom categories - create your own with custom names and colors",'Drag a site to "Drop here to create new category" zone to create a category for it',"Rename built-in categories (original names preserved, can reset anytime)","Delete custom categories (sites return to their default category)","Default badge on built-in categories to distinguish from custom ones"]},{version:"0.10.3",date:"2026-01-10",added:["Day/Week/Month/Custom date selector on Metrics page with animated sliding indicator","Custom date range picker with calendar and presets (Week to date, Month to date, Last 7 days, Last 30 days)","Expandable/collapsible Activity timeline and YouTube channels sections on Metrics page","Clickable domain links in Metrics page Activity timeline and Top sites",'Anchor navigation from Overview "View all" links to specific sections on Metrics page'],changed:["Labels now use sentence case throughout Overview and Metrics pages","Consistent spacing between sections on Overview and Metrics pages","Activity timeline shows day markers instead of hour markers for multi-day date ranges"]},{version:"0.10.2",date:"2026-01-10",added:["GitHub link in Settings page under new About section"],fixed:["Fixed blocked page not showing when clicking links to blocked sites from other websites (was showing Chrome ERR_BLOCKED_BY_CLIENT error)"]},{version:"0.10.1",date:"2026-01-09",added:["Clickable YouTube channel names - click a channel in Overview or Metrics to visit their page","Site URLs in Overview are now clickable links"],fixed:["Fixed race condition that could cause YouTube session data loss when tracking overlapped with site tracking","Fixed YouTube channel URL not being captured from video pages"]},{version:"0.10.0",date:"2026-01-09",added:["Lockdown Mode - require master password to disable blocking, remove sites, or disable limits","Disabling blocking from popup now requires master password (if one is set)","5-minute authentication session after entering password for uninterrupted changes","Session automatically clears when dashboard is closed","New shield icon as extension favicon and toolbar icon"]},{version:"0.9.0",date:"2026-01-08",added:["Path-based site blocking - block specific URL paths like reddit.com/r/funny/*","URL input normalization - automatically strips https:// and formats patterns correctly"],changed:["Entering https://example.com/ now normalizes to example.com","Entering https://example.com/path/ now normalizes to example.com/path/*"]},{version:"0.8.2",date:"2026-01-08",added:["Folders can now be reordered by dragging in Blocked Sites","Sites can now be reordered within folders by dragging in Blocked Sites"],changed:["Folder headers in Blocked Sites can now be clicked anywhere to expand/collapse"],fixed:["Fixed missing gap between YouTube Channels section and other sections in Overview and Metrics tabs","Fixed drag and drop not working properly when folders are collapsed in Blocked Sites","Improved visual distinction between folder headers and site rows in Blocked Sites"]},{version:"0.8.1",date:"2026-01-07",changed:["YouTube tracking now uses Media Session API for more reliable channel detection","YouTube watch time now tracks actual playback (play/pause) instead of page open time","YouTube continues tracking when tab is in background (if video is still playing)","Overview progress bars now relative to top item for better visual comparison"],fixed:["YouTube channel detection now works reliably across all video pages",'Fixed false "channel changed" detection when channelId was intermittently available']},{version:"0.8.0",date:"2026-01-07",added:["YouTube Channel Tracking - track which channels you watch on YouTube videos and Shorts","New setting to enable/disable YouTube tracking (off by default)","YouTube Channels section in Overview showing top watched channels","YouTube Channels section in Metrics with full channel breakdown"]},{version:"0.7.0",date:"2026-01-07",added:["Dark mode support with three options: Light, Dark, and System (follows OS preference)",'Theme selector in Settings under new "Appearance" section',"Automatic theme switching when OS preference changes (in System mode)"],fixed:["Blocked sites list now properly follows dark mode theme"]},{version:"0.6.1",date:"2026-01-07",changed:["Activity timeline now merges overlapping sessions for cleaner visualization"]},{version:"0.6.0",date:"2026-01-07",added:["Site Categories - domains automatically categorized (Social, Entertainment, News, etc.)","Category breakdown view in Metrics and Overview pages","Pre-built category mappings for ~300 popular domains","Daily Time Limits - set maximum daily browsing time per site",'New "Daily Limits" page for managing time limits',"Bypass options for daily limits: wait timer, password, or no bypass","Limits approaching warning on Overview page","Blocked page shows daily limit exceeded UI with bypass options"]},{version:"0.5.1",date:"2026-01-07",fixed:[`Sidebar now stays fixed while scrolling, keeping version and "What's New" visible on all pages`,"Back button on changelog page now returns to previous page instead of settings"]},{version:"0.5.0",date:"2026-01-07",added:["Multi-window session tracking - tracks activity across all visible browser windows","Activity Timeline visualization showing when sites were visited throughout the day","Timeline preview on Overview page with link to full view","Full timeline on Metrics page with date navigation and calendar picker","Date range mode to view aggregated data across multiple days","Slide animations when navigating between dates","Multiple windows indicator on timeline rows"],changed:["Refactored time tracking from single-session to multi-session model",'"Time today" now represents union of all browsing sessions (no double-counting)']},{version:"0.4.2",date:"2026-01-07",added:["Smooth expand/collapse animation for folder sections"]},{version:"0.4.1",date:"2026-01-07",changed:["New tab greeting is now deterministic based on day of year"]},{version:"0.4.0",date:"2026-01-07",added:["Folder organization for blocked sites","Drag-and-drop support for moving sites between folders","Collapsible folder sections","Group-level enable/disable controls per folder","Folder selector when adding/editing blocked sites"],changed:["Blocked Sites page refactored from table to grouped folder view"]},{version:"0.3.2",date:"2026-01-07",fixed:["Scheduled blocking now correctly checks if current time is within the blocking window","Sites with service workers that bypass declarativeNetRequest are now blocked"],changed:["Content script runs at document_start for faster blocking","Blocked attempts tracked from content script fallback"]},{version:"0.3.1",date:"2026-01-07",fixed:["Blocked site metrics now properly increment"]},{version:"0.3.0",date:"2026-01-07",added:["Content script heartbeat system for accurate time tracking","Page Visibility API integration for true visibility detection","Session state persistence across service worker restarts","Media detection - continues tracking when audio is playing"],fixed:["UTC date bug - all date calculations now use local timezone","Maximum tracking data loss reduced from 60+ seconds to ~15 seconds"]},{version:"0.2.1",date:"2026-01-07",changed:["Quick links now auto-fetch favicons","Simplified add link modal - just enter URL","Auto-extract site name from domain"]},{version:"0.2.0",date:"2026-01-07",added:["Custom new tab page with time-based greetings","Personalized name display in settings","Large clock with date on new tab","Quick links with emoji icons","Today's browsing stats on new tab"]},{version:"0.1.1",date:"2026-01-06",added:["Percentage display in daily breakdown hover tooltip","Included dist folder for easy extension loading"]},{version:"0.1.0",date:"2026-01-06",added:["Website time tracking with per-site breakdowns","Site blocking with password, timer, and schedule options","Dashboard with Overview and Metrics pages","Popup for quick stats access","Settings for tracking, blocking, theme, and data retention","Idle detection to pause tracking when inactive"]}];function cg(){const e=Eo();return h.useEffect(()=>{window.scrollTo(0,0)},[]),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[o.jsx("button",{onClick:()=>e(-1),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:o.jsx(ts,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Changelog"}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"What's new in BrowserUtils"})]})]}),o.jsx("div",{className:"space-y-6",children:lg.map((t,r)=>o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx("div",{className:`p-2 rounded-lg ${r===0?"bg-blue-100 dark:bg-blue-900/50":"bg-gray-100 dark:bg-gray-700"}`,children:o.jsx(bo,{className:`w-5 h-5 ${r===0?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400"}`})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("h2",{className:"text-lg font-semibold",children:["v",t.version]}),r===0&&o.jsx("span",{className:"px-2 py-0.5 bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 text-xs font-medium rounded-full",children:"Current"})]}),o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:dg(t.date)})]})]}),o.jsxs("div",{className:"space-y-4",children:[t.added&&t.added.length>0&&o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-2",children:[o.jsx(qe,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:"Added"})]}),o.jsx("ul",{className:"space-y-1 ml-6",children:t.added.map((n,a)=>o.jsx("li",{className:"text-sm text-gray-600 dark:text-gray-300 list-disc",children:n},a))})]}),t.changed&&t.changed.length>0&&o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 text-amber-600 dark:text-amber-400 mb-2",children:[o.jsx(xs,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:"Changed"})]}),o.jsx("ul",{className:"space-y-1 ml-6",children:t.changed.map((n,a)=>o.jsx("li",{className:"text-sm text-gray-600 dark:text-gray-300 list-disc",children:n},a))})]}),t.fixed&&t.fixed.length>0&&o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 text-red-600 dark:text-red-400 mb-2",children:[o.jsx(ss,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:"Fixed"})]}),o.jsx("ul",{className:"space-y-1 ml-6",children:t.fixed.map((n,a)=>o.jsx("li",{className:"text-sm text-gray-600 dark:text-gray-300 list-disc",children:n},a))})]})]})]},t.version))})]})}function dg(e){return new Date(e+"T00:00:00").toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}function ug({isOpen:e,onClose:t,onSubmit:r,title:n="Enter Master Password"}){const[a,s]=h.useState(""),[i,l]=h.useState(""),[c,u]=h.useState(!1),m=h.useRef(null);if(h.useEffect(()=>{e&&(s(""),l(""),setTimeout(()=>{var g;return(g=m.current)==null?void 0:g.focus()},100))},[e]),!e)return null;async function d(g){if(g.preventDefault(),!(!a||c)){u(!0),l("");try{const p=await r(a);p.success?t():l(p.error||"Invalid password")}catch{l("Authentication failed")}finally{u(!1)}}}return o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl w-full max-w-sm mx-4 overflow-hidden shadow-xl",children:[o.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b dark:border-gray-700",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(_t,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),o.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:n})]}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:o.jsx(et,{className:"w-5 h-5"})})]}),o.jsxs("form",{onSubmit:d,className:"p-6",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Lockdown mode is enabled. Enter your master password to continue."}),o.jsx("input",{ref:m,type:"password",value:a,onChange:g=>{s(g.target.value),l("")},placeholder:"Master password",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-gray-900 dark:text-gray-100",autoFocus:!0}),i&&o.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-2",children:i}),o.jsxs("div",{className:"flex gap-3 mt-6",children:[o.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:!a||c,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded-lg transition-colors",children:c?"Verifying...":"Unlock"})]})]})]})})}const mg=[{to:"/",icon:ms,label:"Overview"},{to:"/blocked",icon:Qe,label:"Blocked Sites"},{to:"/limits",icon:rs,label:"Daily Limits"},{to:"/metrics",icon:ns,label:"Metrics"},{to:"/categories",icon:bo,label:"Categories"},{to:"/settings",icon:os,label:"Settings"}];function gg(){const{showPasswordModal:e,setShowPasswordModal:t,authenticate:r,pendingAction:n,clearSession:a}=mn();h.useEffect(()=>{const i=()=>{a()};return window.addEventListener("beforeunload",i),()=>{window.removeEventListener("beforeunload",i)}},[a]);async function s(i){const l=await r(i);return l.success&&n&&await n(),l}return o.jsx(ug,{isOpen:e,onClose:()=>t(!1),onSubmit:s})}function pg(){const[e,t]=h.useState(!1);return o.jsxs(qm,{children:[o.jsx(gg,{}),o.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex",children:[o.jsxs("nav",{className:"w-64 bg-white dark:bg-gray-800 border-r border-gray-200 dark:border-gray-700 p-4 flex flex-col h-screen sticky top-0",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-8 cursor-default",onMouseEnter:()=>t(!0),onMouseLeave:()=>t(!1),children:[o.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-lg flex items-center justify-center",children:o.jsx(Qe,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{children:[o.jsxs("h1",{className:"font-bold text-gray-900 dark:text-gray-100 relative overflow-hidden h-6",children:[o.jsx("span",{className:`inline-block transition-all duration-300 ${e?"opacity-0 -translate-y-full":"opacity-100 translate-y-0"}`,children:"BrowserUtils"}),o.jsx("span",{className:`absolute left-0 top-0 transition-all duration-300 ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-full"}`,children:"BoyoungUtils"})]}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Focus & Productivity"})]})]}),o.jsx("div",{className:"space-y-1",children:mg.map(({to:r,icon:n,label:a})=>o.jsxs(yi,{to:r,className:({isActive:s})=>`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors ${s?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[o.jsx(n,{className:"w-5 h-5"}),a]},r))}),o.jsxs("div",{className:"mt-auto pt-4 border-t border-gray-200 dark:border-gray-700 space-y-2",children:[o.jsxs(gt,{to:"/changelog",className:"flex items-center gap-2 px-3 py-2 text-sm text-gray-600 dark:text-gray-300 hover:bg-blue-50 dark:hover:bg-blue-900/30 hover:text-blue-700 dark:hover:text-blue-300 rounded-lg transition-colors",children:[o.jsx(fs,{className:"w-4 h-4"}),"What's New"]}),o.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 text-center",children:["v",ig]})]})]}),o.jsx("main",{className:"flex-1 p-8 overflow-auto",children:o.jsxs(li,{children:[o.jsx(Be,{path:"/",element:o.jsx(Ei,{})}),o.jsx(Be,{path:"/blocked",element:o.jsx(Xm,{})}),o.jsx(Be,{path:"/limits",element:o.jsx(Qm,{})}),o.jsx(Be,{path:"/metrics",element:o.jsx(ng,{})}),o.jsx(Be,{path:"/categories",element:o.jsx(ag,{})}),o.jsx(Be,{path:"/settings",element:o.jsx(sg,{})}),o.jsx(Be,{path:"/changelog",element:o.jsx(cg,{})})]})})]})]})}Xa();Za.createRoot(document.getElementById("root")).render(o.jsx(oe.StrictMode,{children:o.jsx(fi,{children:o.jsx(pg,{})})}));
