const u={trackingEnabled:!0,blockingEnabled:!0,theme:"system",retentionDays:30,idleThreshold:60,displayName:"",quickLinks:[]},n={BLOCKED_SITES:"blockedSites",SETTINGS:"settings",DAILY_STATS:"dailyStats",ACTIVE_SESSION:"activeSession"};async function c(){return(await chrome.storage.local.get(n.BLOCKED_SITES))[n.BLOCKED_SITES]||[]}async function i(t){await chrome.storage.local.set({[n.BLOCKED_SITES]:t})}async function w(t){const a=await c(),s={...t,id:crypto.randomUUID(),createdAt:Date.now()};return a.push(s),await i(a),s}async function y(t){const s=(await c()).filter(e=>e.id!==t);await i(s)}async function A(t){const a=await c(),s=a.findIndex(e=>e.id===t.id);s!==-1&&(a[s]=t,await i(a))}async function d(){const t=await chrome.storage.local.get(n.SETTINGS);return{...u,...t[n.SETTINGS]}}async function g(t){const s={...await d(),...t};return await chrome.storage.local.set({[n.SETTINGS]:s}),s}async function r(t){const a=t||new Date().toISOString().split("T")[0];return((await chrome.storage.local.get(n.DAILY_STATS))[n.DAILY_STATS]||{})[a]||{date:a,totalTime:0,sites:{},visits:0,blockedAttempts:0}}async function h(){return(await chrome.storage.local.get(n.DAILY_STATS))[n.DAILY_STATS]||{}}async function S(t,a){const e=(await chrome.storage.local.get(n.DAILY_STATS))[n.DAILY_STATS]||{};e[t]=a,await chrome.storage.local.set({[n.DAILY_STATS]:e})}async function m(t){const a=new Date().toISOString().split("T")[0],s=await r(a);s.blockedAttempts++,await S(a,s)}async function f(t,a){const s=new Date().toISOString().split("T")[0],e=await r(s);e.totalTime+=a,e.sites[t]=(e.sites[t]||0)+a,e.visits++,await S(s,e)}async function I(t){t?await chrome.storage.local.set({[n.ACTIVE_SESSION]:t}):await chrome.storage.local.remove(n.ACTIVE_SESSION)}async function T(t){const s=new TextEncoder().encode(t),e=await crypto.subtle.digest("SHA-256",s);return Array.from(new Uint8Array(e)).map(l=>l.toString(16).padStart(2,"0")).join("")}async function E(t,a){return await T(t)===a}function D(t,a){try{const e=new URL(t).hostname;if(a.startsWith("*.")){const o=a.slice(2);return e===o||e.endsWith("."+o)}return e===a||e==="www."+a}catch{return!1}}export{c as a,A as b,w as c,r as d,h as e,f,d as g,T as h,m as i,D as m,y as r,I as s,g as u,E as v};
