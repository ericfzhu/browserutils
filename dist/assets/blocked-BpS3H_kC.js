import{c as v,r,j as e,a as S,R as E}from"./index-D0l8T7tp.js";import{S as p,C}from"./shield-Cr4ittmT.js";import{L}from"./lock-CHc_P0R9.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=v("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);function B(){const[t,b]=r.useState(null),[c,f]=r.useState(""),[d,l]=r.useState(""),[m,u]=r.useState(!1),[o,y]=r.useState(!1),[n,x]=r.useState(0);r.useEffect(()=>{g()},[]),r.useEffect(()=>{if(n>0){const s=setTimeout(()=>x(n-1),1e3);return()=>clearTimeout(s)}else o&&n===0&&N()},[n,o]);async function g(){const a=new URLSearchParams(window.location.search).get("site");if(a)try{const i=(await chrome.runtime.sendMessage({type:"GET_BLOCKED_SITES"})).find(T=>T.id===a);b(i||null),i&&await chrome.runtime.sendMessage({type:"INCREMENT_BLOCKED_ATTEMPT",payload:{domain:i.pattern}})}catch(h){console.error("Failed to load site:",h)}}async function j(s){if(s.preventDefault(),!(!t||!c)){u(!0),l("");try{const a=await chrome.runtime.sendMessage({type:"UNLOCK_SITE",payload:{id:t.id,password:c}});a.success?window.history.back():l(a.error||"Failed to unlock")}catch(a){console.error("Failed to unlock:",a),l("Failed to unlock site")}finally{u(!1)}}}function w(){t!=null&&t.timerDuration&&(x(5),y(!0))}async function N(){if(t)try{(await chrome.runtime.sendMessage({type:"UNLOCK_SITE",payload:{id:t.id}})).success&&window.history.back()}catch(s){console.error("Failed to unlock:",s)}}function k(){window.history.back()}return t?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-orange-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(p,{className:"w-8 h-8 text-red-600"})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Site Blocked"}),e.jsxs("p",{className:"text-gray-500",children:[e.jsx("span",{className:"font-medium text-gray-700",children:t.pattern})," is blocked"]})]}),t.unlockType==="password"&&e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-4",children:[e.jsx(L,{className:"w-4 h-4"}),e.jsx("span",{children:"Enter password to unlock temporarily"})]}),e.jsx("input",{type:"password",value:c,onChange:s=>{f(s.target.value),l("")},placeholder:"Enter password",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",autoFocus:!0}),d&&e.jsx("p",{className:"text-sm text-red-600",children:d}),e.jsx("button",{type:"submit",disabled:m||!c,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:opacity-50 text-white py-3 rounded-lg transition-colors",children:m?"Unlocking...":"Unlock Site"})]}),t.unlockType==="timer"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 mb-4",children:[e.jsx(C,{className:"w-4 h-4"}),e.jsxs("span",{children:["Wait ",t.timerDuration," minutes to unlock"]})]}),o?n>0?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:n}),e.jsx("p",{className:"text-sm text-gray-500",children:"Taking a moment to reconsider..."})]}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Unlocking..."})]}):e.jsxs("button",{onClick:w,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg transition-colors",children:["Start Timer (",t.timerDuration," min access)"]})]}),t.unlockType==="none"&&e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-gray-600",children:"This site is permanently blocked. Go to the dashboard to change settings."})}),t.unlockType==="schedule"&&t.schedule&&e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-gray-600 mb-2",children:"This site is blocked during scheduled hours."}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Blocked: ",t.schedule.startTime," - ",t.schedule.endTime]})]}),e.jsxs("button",{onClick:k,className:"w-full mt-4 flex items-center justify-center gap-2 text-gray-600 hover:text-gray-900 py-2 transition-colors",children:[e.jsx(U,{className:"w-4 h-4"}),"Go Back"]}),e.jsx("div",{className:"mt-6 pt-6 border-t text-center",children:e.jsx("a",{href:chrome.runtime.getURL("dashboard.html#/blocked"),className:"text-sm text-blue-600 hover:text-blue-700",children:"Manage blocked sites in dashboard"})})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-orange-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(p,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Site Blocked"}),e.jsx("p",{className:"text-gray-600",children:"This site has been blocked by BrowserUtils."})]})})}S.createRoot(document.getElementById("root")).render(e.jsx(E.StrictMode,{children:e.jsx(B,{})}));
