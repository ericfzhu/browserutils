import{c as D,r as n,j as e,i as L,a as I,R as $}from"./theme-CSIzm6eU.js";import{S as w,L as R,C as _}from"./shield-C475B-4x.js";import{B as P}from"./bar-chart-3-D3m7d3Kc.js";import{S as U}from"./settings-V2N9LtMw.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=D("ShieldOff",[["path",{d:"M19.7 14a6.9 6.9 0 0 0 .3-2V5l-8-3-3.2 1.2",key:"342pvf"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M4.7 4.7 4 5v7c0 6 8 10 8 10a20.3 20.3 0 0 0 5.62-4.38",key:"p0ycf4"}]]);function v(a){const o=Math.floor(a/3600),s=Math.floor(a%3600/60);return o>0?`${o}h ${s}m`:`${s}m`}function K(){const[a,o]=n.useState(null),[s,u]=n.useState(null),[k,S]=n.useState(!0),[g,f]=n.useState(!1),[i,p]=n.useState(null),[E,m]=n.useState(!1),[c,d]=n.useState(""),[b,l]=n.useState(""),[x,y]=n.useState(!1);n.useEffect(()=>{T()},[]);async function T(){try{const t=new Date,r=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`,[h,O,B]=await Promise.all([chrome.runtime.sendMessage({type:"GET_STATS",payload:{date:r}}),chrome.runtime.sendMessage({type:"GET_SETTINGS"}),chrome.runtime.sendMessage({type:"LOCKDOWN_GET_STATUS"})]);o(h),u(O),p(B)}catch(t){console.error("Failed to load data:",t)}finally{S(!1)}}async function M(){if(s){if(s.blockingEnabled&&(i!=null&&i.hasPassword)&&!(i!=null&&i.sessionValid)){m(!0),d(""),l("");return}await j()}}async function j(){if(!s)return;const t=!s.blockingEnabled,r=await chrome.runtime.sendMessage({type:"UPDATE_SETTINGS",payload:{blockingEnabled:t,trackingEnabled:t}});u(r),m(!1),d("")}async function A(t){if(t.preventDefault(),!(!c||x)){y(!0),l("");try{const r=await chrome.runtime.sendMessage({type:"LOCKDOWN_AUTHENTICATE",payload:{password:c}});if(r.success){const h=await chrome.runtime.sendMessage({type:"LOCKDOWN_GET_STATUS"});p(h),await j()}else l(r.error||"Invalid password")}catch{l("Authentication failed")}finally{y(!1)}}}function C(){chrome.tabs.create({url:chrome.runtime.getURL("dashboard.html")})}if(k)return e.jsx("div",{className:"w-80 p-4 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});const N=a?Object.entries(a.sites).sort((t,r)=>r[1]-t[1]).slice(0,3):[];return e.jsxs("div",{className:"w-80 bg-white dark:bg-gray-900",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h1",{className:"text-lg font-semibold cursor-default relative overflow-hidden",onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),children:[e.jsx("span",{className:`inline-block transition-all duration-300 ${g?"opacity-0 -translate-y-full":"opacity-100 translate-y-0"}`,children:"BrowserUtils"}),e.jsx("span",{className:`absolute left-0 transition-all duration-300 ${g?"opacity-100 translate-y-0":"opacity-0 translate-y-full"}`,children:"BoyoungðŸ˜˜Utils"})]}),e.jsx("button",{onClick:M,className:`p-2 rounded-lg transition-colors ${s!=null&&s.blockingEnabled?"bg-white/20 hover:bg-white/30":"bg-red-500/50 hover:bg-red-500/70"}`,title:s!=null&&s.blockingEnabled?"Blocking enabled":"Blocking disabled",children:s!=null&&s.blockingEnabled?e.jsx(w,{className:"w-5 h-5"}):e.jsx(G,{className:"w-5 h-5"})})]}),E&&e.jsxs("form",{onSubmit:A,className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-white/80",children:[e.jsx(R,{className:"w-3 h-3"}),e.jsx("span",{children:"Enter master password to continue"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"password",value:c,onChange:t=>{d(t.target.value),l("")},placeholder:"Master password",className:"flex-1 px-2 py-1.5 text-sm bg-white/10 border border-white/20 rounded text-white placeholder-white/50 focus:outline-none focus:ring-1 focus:ring-white/50",autoFocus:!0}),e.jsx("button",{type:"submit",disabled:x||!c,className:"px-3 py-1.5 text-sm bg-white/20 hover:bg-white/30 disabled:opacity-50 rounded transition-colors",children:x?"...":"OK"}),e.jsx("button",{type:"button",onClick:()=>{m(!1),d(""),l("")},className:"px-2 py-1.5 text-sm bg-white/10 hover:bg-white/20 rounded transition-colors",children:"X"})]}),b&&e.jsx("p",{className:"text-xs text-red-300",children:b})]})]}),e.jsxs("div",{className:"p-4 border-b dark:border-gray-700",children:[e.jsx("h2",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:"Today"}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-1",children:e.jsx(_,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"})}),e.jsx("div",{className:"text-lg font-semibold",children:v((a==null?void 0:a.totalTime)||0)}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Time"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-1",children:e.jsx(P,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}),e.jsx("div",{className:"text-lg font-semibold",children:(a==null?void 0:a.visits)||0}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Visits"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex items-center justify-center mb-1",children:e.jsx(w,{className:"w-4 h-4 text-red-600 dark:text-red-400"})}),e.jsx("div",{className:"text-lg font-semibold",children:(a==null?void 0:a.blockedAttempts)||0}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Blocked"})]})]})]}),N.length>0&&e.jsxs("div",{className:"p-4 border-b dark:border-gray-700",children:[e.jsx("h2",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-2",children:"Top Sites"}),e.jsx("div",{className:"space-y-2",children:N.map(([t,r])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm truncate flex-1",children:t}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 ml-2",children:v(r)})]},t))})]}),e.jsx("div",{className:"p-4",children:e.jsxs("button",{onClick:C,className:"w-full flex items-center justify-center gap-2 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-200 py-2 px-4 rounded-lg transition-colors",children:[e.jsx(U,{className:"w-4 h-4"}),"Open Dashboard"]})})]})}L();I.createRoot(document.getElementById("root")).render(e.jsx($.StrictMode,{children:e.jsx(K,{})}));
