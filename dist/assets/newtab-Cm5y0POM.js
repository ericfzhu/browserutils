import{r as c,j as e,a as w,R as k}from"./index-B0L8m7MZ.js";import{S}from"./settings-BF9mFVYS.js";import{X as L,P as M}from"./x-C_RRBeUw.js";function g(a){const l=Math.floor(a/3600),s=Math.floor(a%3600/60);return l>0?`${l}h ${s}m`:`${s}m`}function T(){const a=new Date().getHours();if(a>=0&&a<4){const s=["Hello, night owl","Burning the midnight oil","The night is still young","Late night thoughts"];return s[Math.floor(Math.random()*s.length)]}if(a>=4&&a<7){const s=["Early bird","Rise and shine","Up before the sun","Fresh start"];return s[Math.floor(Math.random()*s.length)]}if(a>=7&&a<12){const s=["Good morning","Morning","Hello there","Ready for today"];return s[Math.floor(Math.random()*s.length)]}if(a>=12&&a<17){const s=["Good afternoon","Afternoon","Hey there","How's your day going"];return s[Math.floor(Math.random()*s.length)]}if(a>=17&&a<21){const s=["Good evening","Evening","Winding down","Hope you had a good day"];return s[Math.floor(Math.random()*s.length)]}const l=["Good night","Getting late","Evening thoughts","Night time"];return l[Math.floor(Math.random()*l.length)]}function p(){return new Date().toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}function D(){return new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}function E(){const[a,l]=c.useState(p()),[s]=c.useState(T()),[i,m]=c.useState(null),[o,y]=c.useState(null),[f,h]=c.useState(!1),[r,d]=c.useState({name:"",url:"",icon:""});c.useEffect(()=>{b();const t=setInterval(()=>{l(p())},1e3);return()=>clearInterval(t)},[]);async function b(){try{const t=new Date().toISOString().split("T")[0],[n,u]=await Promise.all([chrome.runtime.sendMessage({type:"GET_SETTINGS"}),chrome.runtime.sendMessage({type:"GET_STATS",payload:{date:t}})]);m(n),y(u)}catch(t){console.error("Failed to load data:",t)}}async function j(){if(!i||!r.name||!r.url)return;const t={id:crypto.randomUUID(),name:r.name,url:r.url.startsWith("http")?r.url:`https://${r.url}`,icon:r.icon||void 0},n={...i,quickLinks:[...i.quickLinks,t]};await chrome.runtime.sendMessage({type:"UPDATE_SETTINGS",payload:{quickLinks:n.quickLinks}}),m(n),d({name:"",url:"",icon:""}),h(!1)}async function N(t){if(!i)return;const n=i.quickLinks.filter(u=>u.id!==t);await chrome.runtime.sendMessage({type:"UPDATE_SETTINGS",payload:{quickLinks:n}}),m({...i,quickLinks:n})}function v(){window.location.href=chrome.runtime.getURL("dashboard.html")}const x=o?Object.entries(o.sites).sort((t,n)=>n[1]-t[1]).slice(0,3):[];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-16",children:[e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("button",{onClick:v,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded-lg transition-colors",title:"Open Dashboard",children:e.jsx(S,{className:"w-5 h-5"})})}),e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("h1",{className:"text-4xl font-light text-gray-700 mb-2",children:[s,(i==null?void 0:i.displayName)&&e.jsxs("span",{className:"text-blue-600",children:[", ",i.displayName]})]}),e.jsx("div",{className:"text-6xl font-extralight tracking-tight text-gray-900 mb-2",children:a}),e.jsx("p",{className:"text-gray-400",children:D()})]}),e.jsx("div",{className:"mb-12",children:e.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[i==null?void 0:i.quickLinks.map(t=>e.jsxs("a",{href:t.url,className:"group relative flex flex-col items-center gap-2 p-4 bg-white hover:bg-gray-100 rounded-2xl transition-colors min-w-[100px] border border-gray-200 shadow-sm",children:[e.jsx("button",{onClick:n=>{n.preventDefault(),n.stopPropagation(),N(t.id)},className:"absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(L,{className:"w-3 h-3"})}),e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-xl flex items-center justify-center text-2xl",children:t.icon||t.name.charAt(0).toUpperCase()}),e.jsx("span",{className:"text-sm text-gray-600",children:t.name})]},t.id)),e.jsxs("button",{onClick:()=>h(!0),className:"flex flex-col items-center gap-2 p-4 bg-white hover:bg-gray-100 rounded-2xl transition-colors min-w-[100px] border-2 border-dashed border-gray-300",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",children:e.jsx(M,{className:"w-6 h-6 text-gray-400"})}),e.jsx("span",{className:"text-sm text-gray-400",children:"Add"})]})]})}),e.jsx("div",{className:"max-w-sm mx-auto",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-gray-200 shadow-sm",children:[e.jsx("h2",{className:"text-sm font-medium text-gray-400 mb-4",children:"Today"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Browsing time"}),e.jsx("span",{className:"font-medium text-gray-900",children:g((o==null?void 0:o.totalTime)||0)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Sites visited"}),e.jsx("span",{className:"font-medium text-gray-900",children:Object.keys((o==null?void 0:o.sites)||{}).length})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Distractions blocked"}),e.jsx("span",{className:"font-medium text-gray-900",children:(o==null?void 0:o.blockedAttempts)||0})]}),x.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t border-gray-100 my-3"}),e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Top sites"}),x.map(([t,n])=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 truncate",children:t}),e.jsx("span",{className:"text-gray-400",children:g(n)})]},t))]})]})]})})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md mx-4 shadow-xl",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add Quick Link"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Name"}),e.jsx("input",{type:"text",value:r.name,onChange:t=>d({...r,name:t.target.value}),placeholder:"e.g., Gmail",className:"w-full bg-gray-50 border border-gray-300 rounded-lg px-3 py-2 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"URL"}),e.jsx("input",{type:"text",value:r.url,onChange:t=>d({...r,url:t.target.value}),placeholder:"e.g., gmail.com",className:"w-full bg-gray-50 border border-gray-300 rounded-lg px-3 py-2 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Icon (emoji, optional)"}),e.jsx("input",{type:"text",value:r.icon,onChange:t=>d({...r,icon:t.target.value}),placeholder:"e.g., ðŸ“§",className:"w-full bg-gray-50 border border-gray-300 rounded-lg px-3 py-2 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",maxLength:2})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx("button",{onClick:()=>{h(!1),d({name:"",url:"",icon:""})},className:"px-4 py-2 text-gray-600 hover:text-gray-900 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:j,disabled:!r.name||!r.url,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 text-white rounded-lg transition-colors",children:"Add Link"})]})]})]})})]})}w.createRoot(document.getElementById("root")).render(e.jsx(k.StrictMode,{children:e.jsx(E,{})}));
