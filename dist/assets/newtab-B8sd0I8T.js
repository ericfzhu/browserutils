import{r as d,j as e,i as v,a as S,R as T}from"./theme-D3y23CUQ.js";import{S as L}from"./settings-BhcnrwG0.js";import{X as D,P as E}from"./x-B3OF09hh.js";function p(r){const a=Math.floor(r/3600),c=Math.floor(r%3600/60);return a>0?`${a}h ${c}m`:`${c}m`}function U(){const r=new Date,a=r.getHours(),c=new Date(r.getFullYear(),0,0),n=Math.floor((r.getTime()-c.getTime())/(1e3*60*60*24)),o=i=>i[n%i.length];return a>=0&&a<4?o(["Hello, night owl","Burning the midnight oil","The night is still young","Late night thoughts"]):a>=4&&a<7?o(["Early bird","Rise and shine","Up before the sun","Fresh start"]):a>=7&&a<12?o(["Good morning","Morning","Hello there","Ready for today"]):a>=12&&a<17?o(["Good afternoon","Afternoon","Hey there","How's your day going"]):a>=17&&a<21?o(["Good evening","Evening","Winding down","Hope you had a good day"]):o(["Good night","Getting late","Evening thoughts","Night time"])}function f(){return new Date().toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}function A(){return new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}function R(r){try{return`https://www.google.com/s2/favicons?domain=${new URL(r.startsWith("http")?r:`https://${r}`).hostname}&sz=64`}catch{return""}}function G(r){try{return new URL(r.startsWith("http")?r:`https://${r}`).hostname.replace(/^www\./,"")}catch{return r}}function M(){const[r,a]=d.useState(f()),[c]=d.useState(U()),[n,o]=d.useState(null),[i,b]=d.useState(null),[k,m]=d.useState(!1),[l,h]=d.useState("");d.useEffect(()=>{j();const t=setInterval(()=>{a(f())},1e3);return()=>clearInterval(t)},[]);async function j(){try{const t=new Date,s=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`,[g,x]=await Promise.all([chrome.runtime.sendMessage({type:"GET_SETTINGS"}),chrome.runtime.sendMessage({type:"GET_STATS",payload:{date:s}})]);o(g),b(x)}catch(t){console.error("Failed to load data:",t)}}async function u(){if(!n||!l)return;const t=l.startsWith("http")?l:`https://${l}`,s=G(l),g={id:crypto.randomUUID(),name:s.split(".")[0].charAt(0).toUpperCase()+s.split(".")[0].slice(1),url:t},x={...n,quickLinks:[...n.quickLinks,g]};await chrome.runtime.sendMessage({type:"UPDATE_SETTINGS",payload:{quickLinks:x.quickLinks}}),o(x),h(""),m(!1)}async function w(t){if(!n)return;const s=n.quickLinks.filter(g=>g.id!==t);await chrome.runtime.sendMessage({type:"UPDATE_SETTINGS",payload:{quickLinks:s}}),o({...n,quickLinks:s})}function N(){window.location.href=chrome.runtime.getURL("dashboard.html")}const y=i?Object.entries(i.sites).sort((t,s)=>s[1]-t[1]).slice(0,3):[];return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-16",children:[e.jsx("div",{className:"absolute top-4 right-4",children:e.jsx("button",{onClick:N,className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-lg transition-colors",title:"Open Dashboard",children:e.jsx(L,{className:"w-5 h-5"})})}),e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("h1",{className:"text-4xl font-light text-gray-700 dark:text-gray-300 mb-2",children:[c,(n==null?void 0:n.displayName)&&e.jsxs("span",{className:"text-blue-600 dark:text-blue-400",children:[", ",n.displayName]})]}),e.jsx("div",{className:"text-6xl font-extralight tracking-tight text-gray-900 dark:text-gray-100 mb-2",children:r}),e.jsx("p",{className:"text-gray-400 dark:text-gray-500",children:A()})]}),e.jsx("div",{className:"mb-12",children:e.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[n==null?void 0:n.quickLinks.map(t=>e.jsxs("a",{href:t.url,className:"group relative flex flex-col items-center gap-2 p-4 bg-white dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-2xl transition-colors min-w-[100px] border border-gray-200 dark:border-gray-700 shadow-sm",children:[e.jsx("button",{onClick:s=>{s.preventDefault(),s.stopPropagation(),w(t.id)},className:"absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(D,{className:"w-3 h-3"})}),e.jsx("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-700 rounded-xl flex items-center justify-center overflow-hidden",children:e.jsx("img",{src:R(t.url),alt:t.name,className:"w-8 h-8",onError:s=>{s.currentTarget.style.display="none",s.currentTarget.parentElement.innerHTML=`<span class="text-2xl text-gray-400 dark:text-gray-500">${t.name.charAt(0).toUpperCase()}</span>`}})}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:t.name})]},t.id)),e.jsxs("button",{onClick:()=>m(!0),className:"flex flex-col items-center gap-2 p-4 bg-white dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-2xl transition-colors min-w-[100px] border-2 border-dashed border-gray-300 dark:border-gray-600",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",children:e.jsx(E,{className:"w-6 h-6 text-gray-400 dark:text-gray-500"})}),e.jsx("span",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Add"})]})]})}),e.jsx("div",{className:"max-w-sm mx-auto",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm",children:[e.jsx("h2",{className:"text-sm font-medium text-gray-400 dark:text-gray-500 mb-4",children:"Today"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Browsing time"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:p((i==null?void 0:i.totalTime)||0)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Sites visited"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:Object.keys((i==null?void 0:i.sites)||{}).length})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Distractions blocked"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:(i==null?void 0:i.blockedAttempts)||0})]}),y.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t border-gray-100 dark:border-gray-700 my-3"}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mb-2",children:"Top sites"}),y.map(([t,s])=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400 truncate",children:t}),e.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:p(s)})]},t))]})]})]})})]}),k&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-sm mx-4 shadow-xl",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Add Quick Link"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",value:l,onChange:t=>h(t.target.value),placeholder:"Enter URL (e.g., github.com)",className:"w-full bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",autoFocus:!0,onKeyDown:t=>{t.key==="Enter"&&l&&u()}}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-2",children:"Favicon and name will be auto-detected"})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>{m(!1),h("")},className:"px-4 py-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-100 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:u,disabled:!l,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 text-white rounded-lg transition-colors",children:"Add"})]})]})]})})]})}v();S.createRoot(document.getElementById("root")).render(e.jsx(T.StrictMode,{children:e.jsx(M,{})}));
